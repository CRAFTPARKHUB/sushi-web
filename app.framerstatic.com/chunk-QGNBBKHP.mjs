import{C as ce,a as $,m as Se}from"https://app.framerstatic.com/chunk-QYLUE25E.mjs";import{e as Ie}from"https://app.framerstatic.com/chunk-KF2DR4UL.mjs";import{a as ae,e as de}from"https://app.framerstatic.com/chunk-WAQRBJZZ.mjs";import{Bg as Me,O as xe,Wg as oe,ig as se,xg as ve}from"https://app.framerstatic.com/chunk-6YTQAM34.mjs";import{E as F,Tb as Ce,r as Re}from"https://app.framerstatic.com/chunk-HMWS5X5Y.mjs";import{G as L,Id as pe,Jd as ye,Me as ne,Oj as ge,Q as b,X as R,_h as ie,wd as te}from"https://app.framerstatic.com/chunk-ZK325ET3.mjs";import{Sd as re}from"https://app.framerstatic.com/chunk-M7LXWNTO.mjs";import{t as W}from"https://app.framerstatic.com/chunk-GQILM44Y.mjs";import{a as A}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{j as l,k as ee,l as me}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Z=W("PartialTreeReceiver"),Ne=class{constructor(){l(this,"name","uninitialized");l(this,"tree");this.tree=oe.createEmpty()}update(e){if(Me(xe),e.name&&(this.name=e.name),e.tree){Z.debug(this.name,"received new tree",`took ${Date.now()-(e.timestamp||0)}ms to receive update`);let t=se(e.tree.root);A(t,"error creating root from update message");let n=oe.createByAdoptingRoot(t);n.loadReplicasAndCodeComponents(n.root),this.tree=n}if(e.changes&&(Z.trace(this.name,"applying changes"),ve(this.tree,e.changes)),e.scopes){let t=this.tree.root.id;Z.trace(this.name,"updating scopes:",e.scopes.length,`took ${Date.now()-(e.timestamp||0)}ms to receive update`);for(let n of e.scopes){let r=se(n,t);A(r,"error creating scope from update message"),this.tree.remove(r.id),this.tree.insertNode(r,t),this.tree.loadReplicasAndCodeComponents(r)}}return this.tree.hasUncommittedChanges()&&(Z.trace(this.name,"commit"),this.tree=this.tree.commitDiffs()),this.tree}};var qe="getFontsForLoading";function tt(i){return qe in i}function rt(i){let e=[];for(let t of i){let{class:n,properties:r,...o}=t,s={...o,properties:JSON.parse(JSON.stringify(r))};e.push(s)}return e}var mt=W("MeasureContext"),ue=L.isChrome(),le=L.isFirefox(),Q=L.isEdge(),fe=L.isWebKit(),D=Ye();function _(){return window?.devicePixelRatio||0}var G=new DOMMatrixReadOnly;var H,K=class{constructor(){l(this,"computedStyleCache",new Map);l(this,"sizeCache",new Map);l(this,"boundingClientRectCache",new Map);l(this,"matrixCache",new Map);l(this,"transformMatrixAndOffsetCache",new Map);l(this,"untransformedRectCache",new Map);me(this,H,new Map)}getComputedStyle(e){let t=this.computedStyleCache.get(e);return t||(t=getComputedStyle(e),this.computedStyleCache.set(e,{display:t.display,width:t.width,height:t.height,transform:t.transform,opacity:t.opacity,filter:t.filter,overflow:t.overflow,transformStyle:t.transformStyle,transformOrigin:t.transformOrigin,zIndex:t.zIndex}),t)}getCreates3dTransformContext(e){let t=this.getComputedStyle(e);return!(t.transformStyle!=="preserve-3d"||t.opacity!=="1"||t.filter!=="none"||t.overflow!=="visible"&&t.overflow!=="none")}transformOriginPoint(e,t=e/2){if(e===0)return 0;let n=Math.round(t/e*100)/100;return fe?We(e)*n:e*n}getTransformOrigin(e){let t=ee(this,H).get(e);if(t)return t;let n=this.getComputedStyle(e),{width:r,height:o}=this.getSize(e),s=n.transformOrigin;if(!s)return{x:this.transformOriginPoint(r,.5),y:this.transformOriginPoint(o,.5)};let c=He(s),d={x:this.transformOriginPoint(r,c?.x),y:this.transformOriginPoint(o,c?.y)};return ee(this,H).set(e,d),d}getCachedSize(e){return e?this.sizeCache.get(e):void 0}getCachedAttributes(e){let t=this.computedStyleCache.get(e),n=t?.zIndex?parseInt(t.zIndex):void 0,r=this.getTransformOrigin(e),o=this.getMatrix(e);return{zIndex:n,originX:r.x,originY:r.y,matrix:o.toJSON()}}getSize(e){let t=this.sizeCache.get(e);if(t)return t;let n=this.getComputedStyle(e),r=()=>{let d=e instanceof HTMLElement?e.offsetWidth:e.clientWidth;return n.display.startsWith("inline")?d+1:d},o=()=>e instanceof HTMLElement?e.offsetHeight:e.clientHeight,s=n.width.endsWith("px")?parseFloat(n.width):r(),c=n.height.endsWith("px")?parseFloat(n.height):o();return t={width:s||0,height:c||0},this.sizeCache.set(e,t),t}getCSSTransform(e){return this.getComputedStyle(e).transform||"none"}hasTransforms(e){return le?this.getCSSTransform(e)!=="none":!this.getMatrix(e).isIdentity}getMatrix(e){let t=this.matrixCache.get(e);if(t)return t;let n=this.getCSSTransform(e);return t=n==="none"?G:new DOMMatrix(n),this.matrixCache.set(e,t),t}getBoundingClientRect(e){let t=this.boundingClientRectCache.get(e);return t||(t=e.getBoundingClientRect(),this.boundingClientRectCache.set(e,t),t)}getUntransformedRectInGroundNode(e,t,n=!0){let r=this.untransformedRectCache.get(e);if(r)return r;let o=this.getTransformAncestors(e),s={x:0,y:0,paintX:0,paintY:0,translationX:0,translationY:0},c=G,d={x:0,y:0,width:0,height:0};return[...o,e].forEach(u=>{let x=this.getSize(u),m=this.getBoundingClientRect(u),p=this.getMatrix(u),y=n?p.m41/p.m44:0,S=n?p.m42/p.m44:0,{x:g,y:f}=this.getTransformOrigin(u),v=G.translate(g,f).multiplySelf(p).translateSelf(-g,-f),C=R.pointsAtOrigin(x),h=R.fromPoints(R.points(m).map(O=>t.transformPoint(O))),{x:U,y:w,matrix:M}=Ie(c,v,h,C),P=b(Y(U+y),Y(w+S)),j=b(N(P.x),N(P.y)),B=this.hasTransforms(u),k=F.hasNonTranslationTransform(p),T=Xe(u),{rect:z,paintDelta:q,translation:E}=ke(s,P,x,p,B,T),X=Ee(B,k,T,P,j);s.x+=X.x,s.y+=X.y,s.paintX+=q.x,s.paintY+=q.y,s.translationX+=E.x,s.translationY+=E.y,c=this.getCreates3dTransformContext(u)?M:F.flatProjectionMatrix(M),this.transformMatrixAndOffsetCache.set(u,{matrix:c,offset:{...s}}),this.untransformedRectCache.set(u,z),d=z}),d}getTransformAncestors(e){let t=[],n=e.parentElement;for(;n!=null&&!Te(n)&&n!==e.ownerDocument?.documentElement;)this.hasTransforms(n)&&t.unshift(n),n=n.parentElement;return t}getOffsetParentBoundingRect(e){if(!(e instanceof HTMLElement&&e.dataset.framerOffsetParentId))return;let t=document.getElementById(e.dataset.framerOffsetParentId);if(t)return this.getBoundingClientRect(t)}getOffsetParent(e){let t=e instanceof HTMLElement?e.offsetParent??e.parentElement:e.parentElement;return t instanceof HTMLElement&&t.dataset.layoutTemplateRoot?this.getOffsetParent(t):t}getParentRelativeRect(e,t,n,r){let o=this.getUntransformedRectInGroundNode(e,t,r),s=o,c,d,a=this.getOffsetParentBoundingRect(e);if(a){let m=t.transformPoint(new DOMPoint(a.x,a.y));return{x:o.x-m.x,y:o.y-m.y,width:o.width,height:o.height}}let u=this.getOffsetParent(e);return u&&!Te(u)?(s=this.getUntransformedRectInGroundNode(u,t),c=o.x-s.x,d=o.y-s.y):n?(c=n.x,d=n.y):(c=0,d=0),{x:c,y:d,width:o.width,height:o.height}}};H=new WeakMap;function Te(i){return i.classList.contains(ce)||i.parentElement?.classList.contains(ce)}function Ee(i,e,t,n,r){return le&&i?r:(ue||Q)&&e?{x:t.includes(0)?n.x:r.x,y:t.includes(1)?n.y:r.y}:n}function De(i){let e=_();if(e<2)return Math.round(Y(i));let t=be(i)/D;return $(t*e,0)/e}function Le(i){return _()<2?Math.round(Y(i)):Math.round(Y(i)*2)/2}function ze(i){let e=be(i),t=0,n=e%D,r=Math.trunc(e/D)*D;return _()<=1?(n>=32&&(t=64),n<-32&&(t=-64)):(n>=16&&n<48&&(t=32),n>=48&&(t=64),n<-16&&n>=-24&&(t=-24),n<-24&&n>=-48&&(t=-32),n<-48&&n>=-56&&(t=-56),n<-56&&(t=-64)),(r+t)/D}function Ae(){return ue||Q?Le:fe?ze:De}var N=Ae();function J({x:i,y:e,width:t,height:n}){let r=N(i),o=N(e);return{x:r,y:o,width:N(i+t)-r,height:N(e+n)-o}}function We(i){let e=_();return $(i*e,0)/e}function Y(i){return $(i*D,0)/D}function be(i){return Math.trunc(i*D)}function Fe({x:i,y:e,width:t,height:n},r){let{rotation:o,translation:s}=he(r),c=b(i-s.x,e-s.y),d=J({...c,width:t,height:n}),a=b(d.x+N(t)/2,d.y+N(n)/2),u=G.translate(a.x+s.x,a.y+s.y).rotateSelf(o).translateSelf(-a.x,-a.y),x=F.convertPoint(u,R.center(d)),m=x.x-d.width/2,p=x.y-d.height/2;return{paintedRect:{x:m,y:p,width:d.width,height:d.height},snappedLayoutRect:d,translation:s}}function Ge({x:i,y:e,width:t,height:n},r,o=[]){let{rotation:s,translation:c}=he(r);o.includes(0)&&(c.x=-.5*t),o.includes(1)&&(c.y=-.5*n);let d=b(i-c.x,e-c.y),a=J({...d,width:t,height:n}),u=Math.round(t),x=Math.round(n),m=s!==0?u:a.width,p=s!==0?x:a.height,y=b(a.x+t/2,a.y+n/2),S=G.translate(y.x+c.x,y.y+c.y).rotateSelf(s).translateSelf(-y.x,-y.y),g=b(a.x+m/2,a.y+p/2),f=F.convertPoint(S,g),v=f.x-m/2,C=f.y-p/2;return{paintedRect:{x:v,y:C,width:m,height:p},snappedLayoutRect:a,translation:c}}function Be(i,e,{width:t,height:n},r){let{rotation:o,translation:s}=he(r),c=b(e.x-s.x,e.y-s.y),d=i.x+N(c.x),a=i.y+N(c.y),u=b(d+t/2,a+n/2),x=G.translate(u.x+s.x,u.y+s.y).rotateSelf(o).translateSelf(-u.x,-u.y),m=F.convertPoint(x,b(d+t/2,a+n/2)),p=m.x-t/2,y=m.y-n/2;return{x:p,y,width:t,height:n}}function ke(i,e,t,n,r,o){let s={x:0,y:0},c={x:-i.paintX,y:-i.paintY},d={x:i.translationX,y:i.translationY},a={x:i.x-d.x+e.x,y:i.y-d.y+e.y,...t};if(fe){let y=J(a),S=R.offset(y,{x:d.x+c.x,y:d.y+c.y});if(r){let{paintedRect:g,snappedLayoutRect:f,translation:v}=Fe(a,n),C=R.offset(g,{x:d.x+c.x,y:d.y+c.y}),h=R.offset(f,v);return s={x:h.x-g.x,y:h.y-g.y},{rect:C,paintDelta:s,translation:v}}return{rect:S,paintDelta:s,translation:{x:0,y:0}}}if(ue||Q){let y=J(a),S=R.offset(y,{x:d.x+c.x,y:d.y+c.y});if(r){let{paintedRect:g,snappedLayoutRect:f,translation:v}=Ge(a,n,o),C=R.offset(g,{x:d.x+c.x,y:d.y+c.y}),h=R.offset(f,v);return s={x:h.x-g.x,y:h.y-g.y},{rect:C,paintDelta:s,translation:v}}return{rect:S,paintDelta:s,translation:{x:0,y:0}}}let u=i.x+e.x,x=i.y+e.y,m={x:u,y:x,...t};if(r){let y=R.offset({x:i.x+N(e.x),y:i.y+N(e.y),width:m.width,height:m.height},c),S=R.offset(Be(i,e,t,n),c);return s={x:y.x-S.x,y:y.y-S.y},{rect:S,paintDelta:s,translation:{x:0,y:0}}}return{rect:R.offset(m,c),paintDelta:s,translation:{x:0,y:0}}}function he(i){let e=Math.atan2(i.b,i.a)*(180/Math.PI),t={x:i.e,y:i.f};return{rotation:e,translation:t}}function Xe(i){let e=[];return i instanceof HTMLElement&&(i.dataset.framerLayoutHintCenterX&&e.push(0),i.dataset.framerLayoutHintCenterY&&e.push(1)),e}function Ye(){return le?60:Q?100:64}function He(i){let[e,t]=i.split(" ").map(n=>parseFloat(n));if(!(!re(e)||!re(t)))return{x:e,y:t}}var I=W("LayoutMeasureQueue"),Ue=new DOMMatrixReadOnly,Pe=L.isFirefox()?1:0,Oe=class{constructor({shouldMeasureCallback:e,shouldMeasureCallbackDelayMs:t,renderingStateTracker:n}={}){l(this,"measureRequests",new Map);l(this,"measureRequestIds",new Set);l(this,"refinementRequests",new Map);l(this,"refinementRequestsByGroundNodeId",new Map);l(this,"richTextRenderIds",new Set);l(this,"previousScopeNodeId","");l(this,"previousZoomLevel");l(this,"previousGroundNodesInViewport");l(this,"resizeObserver",null);l(this,"shouldMeasureTimerStarted",!1);l(this,"shouldMeasureCallback");l(this,"shouldMeasureCallbackDelay");l(this,"renderingStateTracker");l(this,"runShouldMeasureCallback",()=>{this.shouldMeasureTimerStarted=!1,this.size()!==0&&this.shouldMeasureCallback&&this.shouldMeasureCallback()});l(this,"resized",(e,t)=>{if(this.resizeObserver===t)for(let n of e){let r=n.target;if(!r.isConnected||!r.id)return;let o=ie(r.id);this.add(o,r)}});this.shouldMeasureCallback=e,this.shouldMeasureCallbackDelay=t??100,this.renderingStateTracker=n}getRequestId(e,t){return t?`${e}-${t}`:e}add(e,t,n,r){if(I.trace("layout measure queue:",e),r&&A(ae(e),"Layout templates should only have a primary rendering"),!n&&this.measureRequests.has(t))return;let o=de(e);this.measureRequests.set(t,{nodeId:o,renderId:e,layoutTemplateSelector:r,children:n});let s=this.getRequestId(e,r);this.measureRequestIds.add(s),this.shouldMeasureCallback&&!this.shouldMeasureTimerStarted&&(setTimeout(this.runShouldMeasureCallback,this.shouldMeasureCallbackDelay),this.shouldMeasureTimerStarted=!0)}stylePresetChanged(e){for(let t of this.richTextRenderIds){let n=e.get(t);this.remeasureNodeAndAncestors(e,n)}this.richTextRenderIds.clear()}remeasureNode(e){this.remeasureCachedElements(e,(t,n)=>{I.trace("remeasureNode:",t,n)})}remeasureCachedElements(e,t){if(e.cache.elementByRenderId)for(let[n,r]of e.cache.elementByRenderId){let o=this.getRequestId(n,void 0);this.measureRequestIds.has(o)||(this.add(n,r,void 0,void 0),t?.(n,void 0))}if(e.cache.elementByLayoutTemplateSelector)for(let[n,r]of e.cache.elementByLayoutTemplateSelector){let o=this.getRequestId(e.id,n);this.measureRequestIds.has(o)||(this.add(e.id,r,void 0,n),t?.(e.id,n))}}remeasureNodeAndAncestors(e,t){t&&(this.remeasureCachedElements(t),this.remeasureNodeAndAncestors(e,e.getNodeParent(t)))}remeasureChildrenWithDOMRects(e){if(I.trace("remeasureChildrenWithLayout:",e.id),!!e.children&&!te(e))for(let t of e.children)ge(t)&&!t.usesDOMRectCached()||this.remeasureCachedElements(t,(n,r)=>{I.trace("remeasureChildrenWithLayout, child:",n,r)})}remeasureLayoutChildren(e){if(I.trace("remeasureLayoutChildren:",e.id),!!te(e))for(let t of e.children)this.remeasureCachedElements(t,(n,r)=>{I.trace("remeasureLayoutChildren, child:",n,r)})}remeasureAutosizingAncestors(e,t){!t||!t.children||(I.trace("remeasureAutosizingAncestors:",t.id),this.remeasureLayoutChildren(t),ne(t)&&(t.widthType!==2&&t.heightType!==2||(this.remeasureCachedElements(t,(n,r)=>{I.trace("remeasureAutosizingAncestors, add:",n,r)}),this.remeasureAutosizingAncestors(e,e.getNodeParent(t)))))}process({scopeId:e,zoom:t,offsetX:n,offsetY:r,tree:o,groundNodesInViewport:s}){this.previousScopeNodeId!==e&&(I.debug("switching to a new page",this.previousScopeNodeId,e),this.richTextRenderIds.clear(),this.refinementRequests.clear(),this.refinementRequestsByGroundNodeId.clear(),we(o.get(this.previousScopeNodeId)),this.previousScopeNodeId=e,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(this.resized));let c=this.previousZoomLevel!==void 0&&t!==this.previousZoomLevel;this.previousZoomLevel=t;let d=this.previousGroundNodesInViewport!==void 0&&s!==this.previousGroundNodesInViewport,a=new Set([...s]),u=new Set;if(this.previousGroundNodesInViewport!==void 0)for(let f of s)this.previousGroundNodesInViewport.has(f)&&(a.delete(f),u.add(f));if(this.previousGroundNodesInViewport=s,d&&this.processRefinementRequests(a),(d||c)&&t>Pe&&this.processRefinementRequests(u),I.trace("process:",this.size()),this.size()===0)return[];let x=Ue.scale(t).translateSelf(-n,-r),m=[],p=new Map,y=new K;for(let[f,v]of this.measureRequests){let C=o.getNode(v.nodeId);C&&(this.remeasureAutosizingAncestors(o,o.getNodeParent(C)),this.remeasureChildrenWithDOMRects(C),this.remeasureLayoutChildren(C))}let S=je(this.measureRequests.values(),o,x),g=new Set;for(let[f,v]of this.measureRequests){let{nodeId:C,renderId:h,children:U,layoutTemplateSelector:w}=v,M=o.getNode(C);if(!M)continue;if(!f.isConnected){I.trace("measureRequest: not connected",h);continue}w?(A(ae(h),"Layout templates should only have a primary rendering"),M.cache.elementByLayoutTemplateSelector??=new Map,M.cache.elementByLayoutTemplateSelector.set(w,f)):(M.cache.elementByRenderId??=new Map,M.cache.elementByRenderId.set(h,f));let P=S.get(C),j=P.matrix,B=P.rect;if(!s.has(P.id)){this.addRefinementRequest(h,{element:f,groundNodeId:P.id,measureRequest:v}),I.trace("measureRequest: refine",h);continue}let k;if(U){k=[];for(let q of U){if(Se(q))continue;let E=ie(q.id),X=de(E),O=p.get(q);if(O||(O=y.getParentRelativeRect(q,j,B),p.set(q,O),E&&m.push({nodeId:X,renderId:E,layoutMetrics:O})),E){let V=o.getNode(X);if(V&&(R.equals(V.cache.getRawDOMRect(h),O)||g.add(E),V.cache.setRawDOMRect(h,O),!Re(V,M)))continue}k.push(O)}}let T=p.get(f);T?I.trace("measureRequest: cached",h,T):(T=y.getParentRelativeRect(f,j,B,!w),p.set(f,T),I.trace("measureRequest: getParentRelativeRect",h,T)),t<=Pe&&this.addRefinementRequest(h,{element:f,groundNodeId:P.id,measureRequest:v});let z={...T};w?Object.assign(z,y.getCachedAttributes(f)):z.childrenRects=k,M&&(pe(M)?this.richTextRenderIds.add(M.id):ye(M)&&this.resizeObserver?.observe(f),!w&&!R.equals(M.cache.getRawDOMRect(h)??null,T)&&(g.add(h),M.cache.setRawDOMRect(h,T))),m.push({nodeId:C,renderId:h,layoutTemplateSelector:w,layoutMetrics:z})}return this.measureRequests.clear(),this.measureRequestIds.clear(),g.size>0&&this.renderingStateTracker?.processNodesWithChangedRects(g),m}size(){return this.measureRequests.size}addRefinementRequest(e,t){let n=this.refinementRequests.get(e);if(n&&n.groundNodeId&&this.refinementRequestsByGroundNodeId.get(n.groundNodeId)?.delete(n),this.refinementRequests.set(e,t),t.groundNodeId){let r=this.refinementRequestsByGroundNodeId.get(t.groundNodeId);r||(r=new Set,this.refinementRequestsByGroundNodeId.set(t.groundNodeId,r)),r.add(t)}}processRefinementRequests(e){for(let t of e){let n=this.refinementRequestsByGroundNodeId.get(t);if(!(!n||n.size===0)){for(let r of n){if(this.refinementRequests.delete(r.measureRequest.renderId),!r.element.isConnected)continue;let o=this.getRequestId(r.measureRequest.renderId,r.measureRequest.layoutTemplateSelector);this.measureRequestIds.has(o)||(I.trace("refine:",r.measureRequest.renderId),this.measureRequests.set(r.element,r.measureRequest))}n.clear()}}}};function je(i,e,t){let n=new Map,r=new Map;for(let{nodeId:o}of i){let s=t,c=e.get(o),d=[],a=c;for(;a&&e.getParent(a.id);){let u=r.get(a.id);if(u){a=e.get(u);break}a=e.getParent(a.id),a&&d.push(a.id)}if(a&&ne(a)){s=n.get(a.id)?.matrix||s.translate(a.left||0,a.top||0).inverse();for(let x of d)r.set(x,a.id)}else s=s.inverse();n.set(o,{id:a?.id,matrix:s,rect:a?Ce(a):null})}return n}function we(i){if(!i)return;i.cache.elementByRenderId=void 0,i.cache.elementByLayoutTemplateSelector=void 0;let e=i.children;if(e)for(let t of e)we(t)}export{Ne as a,tt as b,rt as c,Oe as d};
//# sourceMappingURL=https://app.framerstatic.com/chunk-QGNBBKHP.mjs.map
