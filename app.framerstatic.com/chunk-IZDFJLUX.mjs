import{b as zy}from"https://app.framerstatic.com/chunk-6TTJU3MI.mjs";import{$b as Jg,$d as py,A as Eg,Ad as Qg,Ae as gy,B as Ag,Bd as Zg,Cd as ey,Dd as ry,Eb as Gg,Ed as oy,Fd as Ps,Hd as kt,Id as Fs,Jd as ny,K as Bg,Ka as Wg,Kd as iy,Ld as ay,Lf as Cy,Md as sy,Nd as ly,Pd as cy,Tf as vy,Vb as _g,Vf as _n,Wb as jg,Wf as by,bg as Ny,ca as Og,cg as Ri,da as zg,ee as Oc,eg as Ry,fe as Hn,fg as Bs,ge as Ls,gg as $y,if as yy,ig as Uy,jc as Xg,jf as Sy,jg as _y,kf as Es,la as $g,nf as Gn,ng as jy,od as qg,uf as Un,wa as Ac,xb as Ms,xd as ko,yd as Ds,zd as Yg}from"https://app.framerstatic.com/chunk-LFHNV3Y3.mjs";import{a as Kg,b as xi}from"https://app.framerstatic.com/chunk-MXONXJZS.mjs";import{i as hy}from"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import{k as Bc}from"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import{b as gr}from"https://app.framerstatic.com/chunk-IDXTJXXX.mjs";import{d as Lg}from"https://app.framerstatic.com/chunk-MSOVP7VS.mjs";import{I as Fg}from"https://app.framerstatic.com/chunk-PCV272DA.mjs";import{a as Hc,b as Ly}from"https://app.framerstatic.com/chunk-OC6NILJY.mjs";import{q as uy}from"https://app.framerstatic.com/chunk-T54BTL7R.mjs";import{a as Hg}from"https://app.framerstatic.com/chunk-KRBJUBXO.mjs";import{a as my,c as ky,d as Vy,e as My,f as Dy,g as Wc,i as Py,l as Fy,m as Os,n as Ey,o as Ay,p as By,q as Oy,t as Gy}from"https://app.framerstatic.com/chunk-W42HW5VE.mjs";import{a as Iy,b as zc,c as Ty,e as $c}from"https://app.framerstatic.com/chunk-WAQRBJZZ.mjs";import{d as Ug,f as Qr,g as ty,i as dy,j as fy}from"https://app.framerstatic.com/chunk-DTJW3CSW.mjs";import{a as As}from"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import{Ac as Jh,Bb as qo,Bf as Cg,Cb as Ph,Cc as Xh,Ce as lg,Cf as vg,De as cg,Df as bg,Ec as vs,Ef as Ig,Fc as qh,Ff as Tg,Gb as Fh,Ib as Cs,If as Ng,Jc as Kh,Jf as wg,Jg as xs,Kb as Lh,Kf as xg,Lb as Eh,Ld as Ns,Lf as Rg,Mb as Ah,Md as ws,Mf as kg,Nb as It,Nc as bs,Ob as zn,Of as Vg,Og as Rs,Pb as Bh,Qb as $n,Qc as Yh,Qf as Lc,Rc as Qh,S as At,Sb as Oh,Se as Wn,Sg as ks,T as km,Tb as zh,Tc as Zh,Te as dg,Tg as Mg,Ua as Nh,Ub as $h,Ud as rg,V as bi,Vd as og,Ve as ug,Wa as gs,Wd as ng,Wg as Dg,X as Dm,Xd as Fc,Z as Bm,_ as Om,_e as pg,a as Cm,aa as zm,bc as Hh,cc as Gh,dc as Uh,ea as Hm,eb as wh,fa as Gm,fb as ys,fe as ig,gb as xh,gd as eg,h as vm,ha as Mn,hb as Rh,jb as kh,ka as Ka,lb as Vh,ld as tg,lf as mg,mb as hr,mf as fg,nf as hg,ob as Mh,pb as Dh,qb as Ro,rb as Be,rc as _h,re as ag,sb as Ss,te as sg,tf as gg,uf as yg,vf as Sg,yc as jh,yd as Is,zb as Pc,zd as Ts}from"https://app.framerstatic.com/chunk-6YTQAM34.mjs";import{e as bt,k as Xo,m as Th,v as Wh}from"https://app.framerstatic.com/chunk-AZP6OTDM.mjs";import{f as Gt}from"https://app.framerstatic.com/chunk-R57RKM33.mjs";import{b as Hy,d as Gc}from"https://app.framerstatic.com/chunk-TVYYAEV6.mjs";import{Ee as Vs,Eg as wi}from"https://app.framerstatic.com/chunk-AAFAMNTF.mjs";import{a as Wy}from"https://app.framerstatic.com/chunk-2OHDEXOT.mjs";import{h as wy,l as xy,m as yr}from"https://app.framerstatic.com/chunk-7VTUJ2SW.mjs";import{$a as Je,$c as Yr,$e as jo,$h as dh,Ad as nf,Ag as as,Ah as _f,Bd as No,Bg as Dr,C as qa,Cd as Nc,Cg as En,Dd as af,Dg as Ef,Dh as Mc,E as mr,Eb as _m,Eh as jf,Fe as xc,Ff as Rf,Fg as ss,Fh as Jf,Gg as ls,Gh as Dc,Hd as ts,Hg as cs,Hh as Xf,Ie as os,Ig as Af,Ih as qf,Jd as Pn,Jh as Kf,Ka as Vm,Kf as Rc,Kh as Yf,Lg as Bf,Lh as Qf,Md as rs,Mh as Zf,Nb as jm,Nc as Ya,Of as is,Pg as Of,Qf as kf,Qg as zf,Qh as eh,R as Tm,Rh as th,Sa as Mm,Sg as xo,T as Nm,Td as Ti,Te as uf,Tg as ds,Th as rh,Uc as Xm,Ue as pf,Ug as An,Uh as oh,V as wm,Vb as Jm,Vg as Bn,Vh as nh,Wa as Pm,Wg as us,Wh as ih,Xa as X,Xe as hf,Xg as $f,Xh as ah,Ya as Fm,Yc as Kr,Ye as gf,Yf as Vf,Yh as sh,Zc as qm,Zg as Wf,Zh as lh,_a as B,_c as To,_e as yf,_h as ch,ab as Uo,ad as Km,ai as uh,bd as Ym,bg as Mf,bi as ph,cd as Qm,cg as kc,db as Lm,dd as Zm,df as Sf,di as mh,eb as Em,ed as ef,ef as Cf,ei as fh,f as bm,fb as Am,fg as Vc,fi as hh,gb as $m,hf as vf,hg as Df,ib as Wm,ih as fs,ii as gh,jf as Tf,ji as yh,k as wn,ke as wc,kg as Ni,ki as Sh,ld as Qa,le as sf,lg as Ln,md as _o,mf as Nf,n as _a,nb as Vn,ni as Ch,o as Mr,od as tf,oh as hs,p as Go,pd as Za,pg as Pf,ph as Hf,qc as Dn,qi as vh,r as xn,rf as wf,rg as Ff,s as ja,sb as Um,se as lf,sf as xf,sh as Gf,t as Ja,ta as xm,tb as it,te as cf,ti as bh,u as Im,vg as Lf,vi as On,wi as Ih,xd as es,xe as df,y as Xa,yd as rf,yg as x,yh as Uf,zd as of,zg as Jo}from"https://app.framerstatic.com/chunk-HMWS5X5Y.mjs";import{$m as Ap,$n as Ci,$t as Rn,Ab as Bo,Ad as Ue,Af as ka,Ah as Da,An as Sc,Aq as om,Ar as dm,Bd as he,Bf as Va,Bi as So,Bm as Pp,Bn as Up,Br as um,Ca as Du,Cd as De,Cf as qu,Ch as je,Da as Pu,Db as Bu,Dd as W,Dg as Ma,Dh as ft,Di as lp,Dt as Sm,Eb as Ou,Ed as Pe,Eh as Cn,Ej as $e,Eu as ns,Fd as we,Ff as Ku,Fi as cp,Fm as Fp,Fn as _p,Fu as wo,G as Iu,Ga as Fu,Gd as Uu,Gf as Yu,Gg as tp,Gj as vn,Gn as Et,Gr as pm,Gu as bf,Hb as mi,Hd as wa,He as yn,Hg as go,Hj as mc,Hu as If,Id as xe,If as Qu,Jd as U,Jg as rp,Jo as Kp,Kb as fi,Kd as Fe,Ke as Ye,Kj as mp,Kp as Zp,L as Ao,Ld as xa,Lk as Jr,Lm as Lp,Md as nt,Me as Ct,Mj as xr,Mk as La,Mq as nm,N as Vu,Nd as mo,Nj as fp,Nk as Ea,Nl as Ba,Od as gn,Oj as vo,Ok as $o,Ol as bo,Pk as fc,Pm as Ep,Pt as Y,Q as Ge,Qc as Pt,Qt as v,Rc as Gu,Rj as hp,Rt as xt,Se as ju,Sf as Zu,Sj as zo,St as A,Tk as Cp,To as za,Tr as mm,Tt as vi,Uc as D,Un as jp,Uo as Yp,Ut as te,V as ac,Va as TT,Vt as u,W as St,Wq as im,Wt as ye,X as tt,Xn as Jp,Xo as Qp,Xq as am,Ya as Lu,Yc as mt,Yh as ip,Yi as dp,Yn as Io,Yo as $a,Yt as ce,Zm as Vr,_d as _u,am as j,an as Bp,at as gm,au as kn,bd as hi,bj as up,cb as hn,cj as pp,cr as sm,ct as bc,db as va,dd as Ta,dj as Fa,dq as Ha,ed as po,eg as ep,eh as gi,en as Op,es as Ga,et as Ic,fb as ba,fd as _r,fh as dc,fs as Ua,gc as zu,gd as Ft,ge as Tr,gm as kp,he as fo,hh as uc,hi as Si,hm as Vp,hn as qr,ho as Cc,ie as Oo,ii as Pa,j as ic,jc as pe,jm as Ht,jq as em,kc as Ia,kp as Wa,ku as fr,l as P,la as Mu,lc as Hu,mj as Co,mm as Oa,nk as Te,nl as Xr,no as vc,nq as tm,nt as Wo,ok as gp,ol as wp,on as zp,oo as Xp,ou as Tc,pk as yp,pm as gc,pn as yc,pt as Ho,qh as pc,ql as ht,qm as Mp,qr as lm,rf as Ju,rh as op,rk as Rr,rm as vt,ro as Nn,ru as Rm,sd as or,sk as Sp,sn as $p,so as qp,su as Rt,td as nr,te as ho,tj as Lt,tu as Ii,ua as dr,ue as Ra,ul as xp,uu as mf,vi as ap,vl as Tn,vn as Wp,vo as wt,vt as ym,vu as ff,w as bu,wh as yi,wi as sp,wj as wr,wl as Rp,wn as Hp,wr as cm,xd as jr,xm as Dp,xn as Gp,xs as fm,yd as Na,yf as cc,yi as yo,ys as hm,zd as ze,ze as lc,zf as Xu,zh as Sn,zi as Nr,zq as rm,zu as Fn}from"https://app.framerstatic.com/chunk-ZK325ET3.mjs";import{a as Np,b as hc}from"https://app.framerstatic.com/chunk-5DSVU7DA.mjs";import{c as bn,f as vp,g as Aa,i as bp,r as In,u as qt,v as Ip,w as kr,y as pr,z as Tp}from"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import{b as ps,c as ms}from"https://app.framerstatic.com/chunk-XX4R3RQ6.mjs";import{t as $u,v as Wu}from"https://app.framerstatic.com/chunk-MFZYGAHA.mjs";import{a as pi,b as Dt}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{g as Bt,i as Ec,m as Pg}from"https://app.framerstatic.com/chunk-XWEO5KIO.mjs";import{b as vu}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{H as _e,a as Tu,b as ga,c as Nu,d as wu,j as xu,m as Ru,n as ku}from"https://app.framerstatic.com/chunk-MM3XA4KU.mjs";import{a as ur,b as E,d as G,e as rt,f as rr,h as Eu,i as k,j as Sa,k as Au,l as ot,n as sc,o as Ca}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ia as ya,Qd as np,a as IT,b as fn}from"https://app.framerstatic.com/chunk-M7LXWNTO.mjs";import{f as nc}from"https://app.framerstatic.com/chunk-PFHOMMMY.mjs";import{c as Cu}from"https://app.framerstatic.com/chunk-WIUFUKXG.mjs";import{A as Ir,B as Mt,C as be,E as oc,F as gu,G as Ae,I as pt,J as Q,V as Ur,aa as yu,ba as Su,ea as Xt,ga as ha,i as hu,k as ke,o as Me,t as ge,x as oe,y as yt}from"https://app.framerstatic.com/chunk-GQILM44Y.mjs";import{a as y,b as $}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{d as bT,e as uo,j as T,k as I,l as _,m as se,n as et}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var ki=new qu(async()=>{let e=await Promise.all([import("https://app.framerstatic.com/dist-UBOM75PL.mjs"),import("https://app.framerstatic.com/dist-NO2QPBRR.mjs"),import("https://app.framerstatic.com/dist-XWBD7SWG.mjs"),import("https://app.framerstatic.com/dist-K7NPOJ6B.mjs"),import("https://app.framerstatic.com/dist-3Z7TBJKD.mjs"),import("https://app.framerstatic.com/dist-FUKVCZCW.mjs"),import("https://app.framerstatic.com/dist-62LMN7PQ.mjs"),import("https://app.framerstatic.com/dist-FMNFBH4C.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-7VONC64C.mjs")]);return Object.assign({},...e)});function eP(){let e=ki.preload();e&&e.catch(ke)}async function tP(){let e=ki.preload();return e&&await e,ki.read()}function rP(){let e=ki.preload();if(e)throw e;return ki.read()}function Uc(e){return Be(e)?!0:xe(e)?e.hasLinks():wa(e)?e.getInlineLinks(!1).filter(Boolean).length>0:!1}var NT=ge("update-tree-cache-for-vekter");function wT(e,t){return t?Eu(t)?t.has(e):t===e:!0}var _c=[];Object.freeze(_c);function xT(e,t,r,o){return wt(e)?Fe(e)?o??r??mr.identity():!r||!t?mr.identity():mr.boundingRectMatrix(r,t):r??mr.identity()}function BP(e,t,r,o,n,i,a,s){let l=e.root,c=l.cache,p=l.getLocale(i);c.visible=!0,c.lockedByParent=!1,c.renderId=l.id,zs(c);let m=l.children;for(let d of m)if(!(s&&!wT(d.id,s))){if(bt(d)){if(!d.isLoaded())continue;RT(e,d,l,t,r,o,n,p,a)}else jc(e,d,l,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,_c,null,null,null,null,void 0,void 0,t,r,o,n,p,void 0,void 0,!1,a,void 0);jn(l,d)}return e}function RT(e,t,r,o,n,i,a,s,l){let c=t.cache;c.visible=!0,c.lockedByParent=!1,c.renderId=t.id,c.parentRenderId=r.id,zs(c);let p=t.children,{combinedVariableValueMap:m,combinedVariableControlMap:d}=t.combineVariableValueAndControlMaps(e,void 0,void 0,P,n,a,s),f=W(t);for(let h of p)jc(e,h,t,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,_c,null,null,null,null,m,d,o,n,i,a,s,void 0,void 0,!1,l,f),jn(t,h)}function jc(e,t,r,o,n,i,a,s,l,c,p,m,d,f,h,g,S,C,N,b,w,M,L,F,H,z,J,me,fe,de,le){let R=t.cache,Z=R.activeVekterLocale;R.activeVekterLocale=z;let{combinedVariableValueMap:ie,combinedVariableControlMap:Ie,combinedVariableMapsAreEqual:ct}=t.combineVariableValueAndControlMaps(e,b,w,P,L,H,z),K=ze(t),O=K?L.isEmpty(t.id):!1,[ne,Ke]=PT(e,t,r,a,s,M,L,F);R.groundNodeAncestorId=J?.groundNodeId,R.masterAncestorId=c,R.replicaAncestorId=p,R.overlayAncestorId=m,R.formContainerAncestorId=f;let Ee=n&&!!ne,He=!J||mr.equals(R.groundNodeMatrix,J.groundNodeMatrix),ve=!hi(t)||R.layout===t.layout,Jt=Z===R.activeVekterLocale,tr=vc(t,J),Wr=!!de?.nodes.has(t.id),cr=Wr===R.isEffectPreview&&dr(de?.effectIds??null,R.effectIds)&&(de?.type??null)===R.effectType&&R.webPageEffect===le,gt=Cc(t)||tt.equals(R.viewportRect,tr);o||=Lt(t);let st=ve&&Jt&&gt&&cr&&ct&&R.insideVariant===o&&R.visible===Ee&&R.collectionIsEmpty===O&&R.lockedByParent===i&&R.lastUpdate===t.update&&R.parentDirected===me&&R.parentDirectedRowHeightFitContent===fe&&Yy(t.cache.getRenderInstance(t.id),ne)&&DT(t.cache.secondaryRenderInstances,Ke)&&hp(e,t)===R.usesLayoutTemplateRectForModuleIdentifier,co=R.anchorLinkAncestorId===S&&R.ariaLabelAncestorId===C&&R.altTextAncestorId===g&&R.richTextAncestorId===N;if(st&&He&&co)return{anchorLinkDescendantId:R.anchorLinkDescendantId,ariaLabelDescendantId:R.ariaLabelDescendantId,altTextDescendantId:R.altTextDescendantId,richTextDescendantId:R.richTextDescendantId};R.isEffectPreview=Wr,R.effectIds=de?.effectIds??null,R.effectType=de?.type??null,R.webPageEffect=le,R.altTextAncestorId=g,R.anchorLinkAncestorId=S,R.ariaLabelAncestorId=C,R.richTextAncestorId=N,R.ancestorRepeaterIds=h;let Hr=!1;Hr&&Hr.cacheUpdated(),st?R.canvasRect=void 0:(Hr&&Hr.cacheReset(),R.reset(),R.groundNodeAncestorId=J?.groundNodeId,R.masterAncestorId=c,R.replicaAncestorId=p,R.overlayAncestorId=m,R.slotPropertyAncestorId=d,R.formContainerAncestorId=f,R.anchorLinkAncestorId=S,R.altTextAncestorId=g,R.ariaLabelAncestorId=C,R.richTextAncestorId=N,R.activeVekterLocale=z,R.visible=Ee,R.collectionIsEmpty=O,R.insideVariant=o,R.lockedByParent=i,R.lastUpdate=t.update,R.parentDirected=me,R.parentDirectedRowHeightFitContent=fe,R.viewportRect=tr,R.layout=hi(t)?t.layout:void 0,R.ancestorRepeaterIds=h,R.usesLayoutTemplateRectForModuleIdentifier=vo(t)?t.usesLayoutTemplateRectForModuleIdentifier():void 0,ne&&(R.renderId=t.id,Object.assign(R,ne)),R.secondaryRenderInstances=Ke);let{parentRectByRenderIdForChildren:ae,parentMatrixByRenderIdForChildren:ue,parentUsesDOMRectForChildren:dt,groundNodeContextForChildren:Gr}=Ky(e,t,l,J,M),Cr=t.children;if(!Cr)return{anchorLinkDescendantId:Uc(t)?t.id:null,ariaLabelDescendantId:ys(t)?t.id:null,altTextDescendantId:Pn(t)?t.id:null,richTextDescendantId:xe(t)?t.id:null};let di=po(t)?t.layout:void 0,lt=Ft(t)&&t.gridRowHeightType==="fit",ut=c;!ut&&Bu(t)&&(ut=t.id);let vr=p;!vr&&mi(t)&&(vr=t.id);let br=S;Be(t)&&(br=t.id);let ec=Jc(t,h);for(let tc=0;tc<Cr.length;tc++){let ui=Cr[tc];if(!ui)continue;if(!ve)for(let[,vT]of ui.cache.iterateRenderInstances())vT.parentRect=void 0;let rc=K&&Fn(e,ui,t),ST=rc&&O,du=K&&!rc,CT=_e.isOn("visibilityFromSandbox")?Ee:rc?!ST&&Ee:Ee,{anchorLinkDescendantId:uu,ariaLabelDescendantId:pu,altTextDescendantId:mu,richTextDescendantId:fu}=jc(e,ui,t,o,CT,xf(t),ae,ue,dt,ut,vr,wt(t)?t.id:m,Ra(t)?t.id:d,Vr(t)?t.id:f,ec,Pn(t)?t.id:g,br,ys(t)?t.id:C,xe(t)?t.id:N,du?b:ie,du?w:Ie,M,L,F,H,z,Gr,di,lt,de,le);jn(t,ui),!R.anchorLinkDescendantId&&uu&&(R.anchorLinkDescendantId=uu),!R.ariaLabelDescendantId&&pu&&(R.ariaLabelDescendantId=pu),!R.altTextDescendantId&&mu&&(R.altTextDescendantId=mu),!R.richTextDescendantId&&fu&&(R.richTextDescendantId=fu)}return{anchorLinkDescendantId:Uc(t)?t.id:R.anchorLinkDescendantId,ariaLabelDescendantId:ys(t)?t.id:R.ariaLabelDescendantId,altTextDescendantId:Pn(t)?t.id:R.altTextDescendantId,richTextDescendantId:xe(t)?t.id:R.richTextDescendantId}}function OP(e,t,r){let o=kT(e,r),n=e.root,i=n.cache;i.visible=!0,i.renderId=n.id,zs(i);let a=n.children;for(let s of a){if(bt(s)){if(!s.isLoaded())continue;VT(e,s,n,t,o)}else Xc(e,s,n,new Map,new Map,!1,t,o,void 0,!1,void 0);jn(n,s)}return o}function kT(e,t){let r=new Set,o=new Set;function n(a){o.has(a.id)||(r.add(a.id),o.add(a.id),a.children&&a.children.forEach(n))}function i(a){let s=a.id;for(;s&&!r.has(s);)r.add(s),s=e.getNode(s)?.parentid}for(let a of t){let s=e.getNode(a);s&&(i(s),s.children&&s.children.forEach(n))}return r}function Jc(e,t){return ze(e)?t.length===0?[e.id]:[...t,e.id]:t}function VT(e,t,r,o,n){let i=t.cache;i.visible=!0,i.renderId=t.id,i.parentRenderId=r.id,zs(i);let a=t.children;for(let s of a)Xc(e,s,t,new Map,new Map,!1,o,n,void 0,!1,void 0),jn(t,s)}function Xc(e,t,r,o,n,i,a,s,l,c,p){if(!s.has(t.id))return;let m=t.cache;if(m.parentDirected=l,m.parentDirectedRowHeightFitContent=c,m.viewportRect=vc(t,p),!m.visible)return;for(let[b,w]of m.iterateRenderInstances()){let M=w.parentRenderId;y(M,"Missing `parentRenderId`"),w.parentRect=o.get(M),w.parentMatrix=n.get(M),w.parentDirectedRect=Qy(t,b,r,a)}let{parentRectByRenderIdForChildren:d,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:h,groundNodeContextForChildren:g}=Ky(e,t,i,p,a),S=t.children;if(!S)return;let C=po(t)?t.layout:void 0,N=Ft(t)&&t.gridRowHeightType==="fit";for(let b of S)Xc(e,b,t,d,f,h,a,s,C,N,g),jn(t,b)}function MT(e,t){if(!t||!Ct(e)||!$e(e))return;let r=new Map;for(let[o,n]of t){let i=n.originX??Rc*n.width,a=n.originY??Rc*n.height,l=mr.identity().translate(e.left??0,e.top??0).translate(i,a).multiplySelf(mr.identity().translate(n.x,n.y).multiplySelf(n.matrix)).translateSelf(-i,-a),c=mr.convertPointsWithClipping(l,tt.pointsAtOrigin({width:n.width,height:n.height}));r.set(o,{domRect:n,canvasCorners:c,canvasRect:tt.boundingRectFromPoints(c)})}return r}function Ky(e,t,r,o,n){let i=t.cache,a=n.getRects(t.id);a&&(i.domRects=new Map(a));let s=vo(t)&&!!i.usesLayoutTemplateRectForModuleIdentifier;s&&(i.layoutTemplateRects=MT(t,n.getLayoutTemplateRects(t.id))),i.groundNodeMatrix=o?.groundNodeMatrix??null;let l=vo(t)&&t.usesDOMRectCached(),c=!(l||r),p=!!i.viewportRect||!Cc(t),m,d=new Map,f=new Map;for(let[h,g]of i.iterateRenderInstances()){let{parentRect:S,parentMatrix:C,parentDirectedRect:N}=g,b=e.getParentSizeInfo(t,void 0,c,p,h),w=N??t.rect(b,c,void 0,h);d.set(h,w);let M=t.originAdjustedMatrix(b,w,h),L=xT(t,S,C,o?.groundNodeMatrix),F;try{F=L.multiply(M)}catch(me){NT.reportErrorOncePerMinute(me,{parentRect:S,frame:w,parentMatrix:L,transformMatrix:M}),F=new DOMMatrix}let H=Rf(t)?F:mr.flatProjectionMatrix(F);f.set(h,H),g.matrix=F;let z=e.convertCornerPointsToCanvas(t,!1,void 0,h);g.cornerPoints=z;let J=tt.boundingRectFromPoints(z);if(g.canvasRect=J,qa(t)&&Bf(t)&&t.strokeEnabled){let me=t.resolveValue("strokeWidth")??0;J=tt.inflate(J,me/2)}s?qy(g,i.getLayoutTemplateContainerRect()?.canvasRect??J):qy(g,J),Iy(h)&&(m=o??Xp(t,w,{groundNodeId:t.id,groundNodeMatrix:H}))}return{parentRectByRenderIdForChildren:d,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:l,groundNodeContextForChildren:m}}function Jy(e,t,r){if(_e.isOn("visibilityFromSandbox"))return r.getVisible(t);let o=wt(e)&&!e.cache.overlayVisible;return e.isVisible()&&!Ou(e)&&!o}function Yy(e,t){return!e&&!t?!0:!e||!t?!1:tt.equals(e.parentRect??null,t.parentRect??null)&&mr.equals(e.parentMatrix??null,t.parentMatrix??null)&&tt.equals(e.parentDirectedRect??null,t.parentDirectedRect??null)&&zu(e.collectionItemIds,t.collectionItemIds)&&e.collectionItemId===t.collectionItemId}function DT(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let[r,o]of t){let n=e.get(r);if(!Yy(o,n))return!1}return!0}function Xy(e,t,r,o,n,i,a,s,l){return{parentRenderId:o,parentRect:i.get(o),parentMatrix:a.get(o),parentDirectedRect:Qy(e,t,r,s),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,collectionItemIds:l.getItemIds(t),collectionItemId:n,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function PT(e,t,r,o,n,i,a,s){let l=new Map;if(ze(r)&&Fn(e,t,r))for(let[m,d]of r.cache.iterateRenderInstances()){let f=d.collectionItemIds;if(f)for(let h=0;h<f.length;h++){let g=f[h];if(!g)continue;let S=Ty(m,r.id,g,h),C=zc(S,t.id);Jy(t,C,s)&&l.set(C,Xy(t,C,r,m,g??d.collectionItemId,o,n,i,a))}}else for(let[m,d]of r.cache.iterateRenderInstances()){let f=zc(m,t.id);Jy(t,f,s)&&l.set(f,Xy(t,f,r,m,d.collectionItemId,o,n,i,a))}let c=l.get(t.id);l.delete(t.id);let p=l.size>0?l:void 0;return[c,p]}function zs(e){e.minX=1/0,e.maxX=-1/0,e.minY=1/0,e.maxY=-1/0}function qy(e,t){e.minX=t.x,e.maxX=t.x+t.width,e.minY=t.y,e.maxY=t.y+t.height}function FT(e,t){e.minX>t.minX&&(e.minX=t.minX),e.maxX<t.maxX&&(e.maxX=t.maxX),e.minY>t.minY&&(e.minY=t.minY),e.maxY<t.maxY&&(e.maxY=t.maxY)}function jn(e,t){for(let[,r]of t.cache.iterateRenderInstances()){let o=r.parentRenderId;y(o,"Missing `parentRenderId`");let n=e.cache.getRenderInstance(o);y(n,"Missing `renderInstance`"),FT(n,r)}}function Qy(e,t,r,o){if(po(r)&&xn(e,r))return o.getRect(t)}var Zy="https://app.framerstatic.com/cursor-add-6XAMN4WT.png";var eS="https://app.framerstatic.com/cursor-add@2x-2LFPOUCY.png";var tS="https://app.framerstatic.com/cursor-disconnect-ZKL7EWFU.png";var rS="https://app.framerstatic.com/cursor-disconnect@2x-OE3AENSJ.png";var oS="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var nS="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var iS="https://app.framerstatic.com/cursor-grab-FRV55RHP.png";var aS="https://app.framerstatic.com/cursor-grab@2x-GIY2VUEH.png";var sS="https://app.framerstatic.com/cursor-grabbing-OKC4B74I.png";var lS="https://app.framerstatic.com/cursor-grabbing@2x-WE42DW3I.png";var cS="https://app.framerstatic.com/cursor-insert-6UGIJVAR.png";var dS="https://app.framerstatic.com/cursor-insert@2x-ZOKYLV6L.png";var uS="https://app.framerstatic.com/cursor-remove-Q4ORWDOQ.png";var pS="https://app.framerstatic.com/cursor-remove@2x-QZ7R5XN6.png";var mS="https://app.framerstatic.com/cursor-swap-2VDBHJ6M.png";var fS="https://app.framerstatic.com/cursor-swap@2x-BAI7OT3Z.png";var hS="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var gS="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var yS="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var SS="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var CS="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var vS="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var bS="https://app.framerstatic.com/cursor-zoom-in-2YKQ3Z67.png";var IS="https://app.framerstatic.com/cursor-zoom-in@2x-ZUXRFEB6.png";var TS="https://app.framerstatic.com/cursor-zoom-out-IWSRWDMJ.png";var NS="https://app.framerstatic.com/cursor-zoom-out@2x-EW4OYJ5J.png";var wS="https://app.framerstatic.com/resize-east-west-ANAPBU4H.png";var xS="https://app.framerstatic.com/resize-east-west@2x-HS4NZ3H2.png";var RS="https://app.framerstatic.com/resize-east-XHHFSY6J.png";var kS="https://app.framerstatic.com/resize-east@2x-3TA77JQ5.png";var VS="https://app.framerstatic.com/resize-nesw-GL7KYSRE.png";var MS="https://app.framerstatic.com/resize-nesw@2x-7OD4PILK.png";var DS="https://app.framerstatic.com/resize-north-east-OYDCT3XA.png";var PS="https://app.framerstatic.com/resize-north-east@2x-GB4FBRV3.png";var FS="https://app.framerstatic.com/resize-north-south-JYDNIYWS.png";var LS="https://app.framerstatic.com/resize-north-south@2x-IHAJOLEA.png";var ES="https://app.framerstatic.com/resize-north-west-WOGBMCQ7.png";var AS="https://app.framerstatic.com/resize-north-west@2x-CGE2AJ7O.png";var BS="https://app.framerstatic.com/resize-north-TOADQ3IJ.png";var OS="https://app.framerstatic.com/resize-north@2x-U6CXDTI2.png";var zS="https://app.framerstatic.com/resize-nwse-CTXL5YSS.png";var $S="https://app.framerstatic.com/resize-nwse@2x-H5TFIU4Y.png";var WS="https://app.framerstatic.com/resize-south-east-7BL2E7ZY.png";var HS="https://app.framerstatic.com/resize-south-east@2x-YOYUZV36.png";var GS="https://app.framerstatic.com/resize-south-west-EZHHVQZN.png";var US="https://app.framerstatic.com/resize-south-west@2x-XZTWVP5E.png";var _S="https://app.framerstatic.com/resize-south-MEM66EWG.png";var jS="https://app.framerstatic.com/resize-south@2x-KMVPTHAA.png";var JS="https://app.framerstatic.com/resize-west-GRT5XBDQ.png";var XS="https://app.framerstatic.com/resize-west@2x-DBCUQ6K5.png";var qS="https://app.framerstatic.com/touch-active-CQT44XON.png";var KS="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var YS="https://app.framerstatic.com/touch-K4JGV3WE.png";var QS="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var ZS={"cursor-add":[Zy,eS],"cursor-disconnect":[tS,rS],"cursor-feedback":[oS,nS],"cursor-grab":[iS,aS],"cursor-grabbing":[sS,lS],"cursor-insert":[cS,dS],"cursor-remove":[uS,pS],"cursor-swap":[mS,fS],"cursor-vector-add":[hS,gS],"cursor-vector-point":[yS,SS],"cursor-vector":[CS,vS],"cursor-zoom-in":[bS,IS],"cursor-zoom-out":[TS,NS],"resize-nesw":[VS,MS],"resize-nwse":[zS,$S],"resize-north-east":[DS,PS],"resize-north-west":[ES,AS],"resize-south-east":[WS,HS],"resize-south-west":[GS,US],"resize-east-west":[wS,xS],"resize-west":[JS,XS],"resize-east":[RS,kS],"resize-north-south":[FS,LS],"resize-north":[BS,OS],"resize-south":[_S,jS],"touch-active":[qS,KS],touch:[YS,QS]};var LN=Iu.isFirefox(),ir=(e,t=12)=>{let r=G(t)?t:t.x,o=G(t)?t:t.y,[n,i]=ZS[e];return LN?`url(${n}) ${r} ${o}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${r} ${o}, default`},Kc={x:6,y:2},YL=ir("cursor-vector",Kc),QL=ir("cursor-vector-add",Kc),ZL=ir("cursor-vector-point",Kc),e0=ir("cursor-disconnect",10),t0=ir("cursor-add",10),r0=ir("cursor-remove",10),o0=ir("cursor-swap",{x:3,y:3}),n0=ir("cursor-feedback",{x:16,y:16}),$s={x:15,y:15},i0=ir("cursor-insert",$s),a0=ir("cursor-zoom-in",$s),s0=ir("cursor-zoom-out",$s),l0=ir("cursor-grabbing",$s),EN=(e,t)=>{switch(e){case 0:{if(t.x&&t.y)return 8;if(t.x)return 6;if(t.y)return 2;break}case 1:{if(t.x)return 7;break}case 2:{if(t.x&&t.y)return 6;if(t.x)return 8;if(t.y)return 0;break}case 3:{if(t.y)return 5;break}case 5:{if(t.y)return 3;break}case 6:{if(t.x&&t.y)return 2;if(t.x)return 0;if(t.y)return 8;break}case 7:{if(t.x)return 1;break}case 8:{if(t.x&&t.y)return 0;if(t.x)return 2;if(t.y)return 6;break}default:break}return e},AN=e=>8-e,BN=(e,t,r)=>{let{fx:o,fy:n}=e,i=t.findIndex(p=>p.fx===o&&p.fy===n),a=EN(i,r),s=t[a];y(s,"handle must be defined",s,t);let l=AN(a),c=t[l];return y(c,"handle must be defined",c,t),Ge.angleFromX(c,s)},ON=e=>{switch(e){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},Jn=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M5 10.25v3.5c0 .138.112.25.25.25H13v2.7a.25.25 0 0 0 .415.187l5.37-4.699a.25.25 0 0 0 0-.376l-5.37-4.7a.25.25 0 0 0-.415.189V10H5.25a.25.25 0 0 0-.25.25Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M6 11h8V9l3.5 3-3.5 3v-2H6z'/></g></g></svg>") 12 12, pointer`,zN=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M9 13.98v2.72a.25.25 0 0 1-.415.187l-5.37-4.699a.25.25 0 0 1 0-.376l5.37-4.7A.25.25 0 0 1 9 7.302V10l6 .02V7.3a.25.25 0 0 1 .415-.187l5.37 4.699a.25.25 0 0 1 0 .376l-5.37 4.7a.25.25 0 0 1-.415-.189V14l-6-.02Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M16 13v2l3.5-3L16 9v2H8V9l-3.5 3L8 15v-2z'/></g></g></svg>") 12 12, pointer`,qc=e=>e+180,$N=(e,t,r)=>{if(t){let o=t.x.max&&t.x.min,n=t.y.max&&t.y.min,i=ON(e),a=i===8||i===12,s=i===14||i===10;if(a&&n||s&&o)return;if(s&&t.x.max)return Jn(qc(r));if(s&&t.x.min)return Jn(r);if(a&&t.y.max)return Jn(qc(r));if(a&&t.y.min)return Jn(r);let l=i===15||i===13||i===9||i===11;if(l&&t.x.max&&t.y.max)return Jn(qc(r));if(l&&t.x.min&&t.y.min)return Jn(r)}return zN(r)},c0=(e,t,r,o={})=>{let n=t.findIndex(i=>i.fx===e.fx&&i.fy===e.fy);if(!(n<-1))return $N(n,r,BN(e,t,o))},WN=e=>{switch(e){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},HN=(e,t)=>{let{fx:r,fy:o}=e,n=t.findIndex(N=>N.fx===r&&N.fy===o),i=t[n];y(i,"handle must be defined",i,t);let[a,s]=WN(n),l=t[a],c=t[s];y(l&&c,"handle must be defined",a,s,t);let p=Ge.angleFromX(i,l),m=Ge.angleFromX(i,c),d=Math.abs(p-m),f=(d>180?360-d:d)/2,h=[t[0],t[4],t[2]];return(Xu.isClockwise(h)?p:m)+f-180},GN=e=>`url("data:image/svg+xml,<svg width='24px' height='24px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M10.25,20 C10.1119288,20 10,19.8880712 10,19.75 L10,12.6035534 C10,12.4654822 10.1119288,12.3535534 10.25,12.3535534 C10.3163041,12.3535534 10.3798926,12.3798926 10.4267767,12.4267767 L12.9218922,14.9225703 C13.5940823,14.1362843 14,13.1155457 14,12 C14,10.8844543 13.5940823,9.86371572 12.9218922,9.07742971 L10.4267767,11.5732233 C10.3798926,11.6201074 10.3163041,11.6464466 10.25,11.6464466 C10.1119288,11.6464466 10,11.5345178 10,11.3964466 L10,4.25 C10,4.11192881 10.1119288,4 10.25,4 L17.3964466,4 C17.4627507,4 17.5263392,4.02633921 17.5732233,4.0732233 C17.6708544,4.17085438 17.6708544,4.32914562 17.5732233,4.4267767 L15.7556302,6.24518726 C17.1490803,7.75912242 18,9.78018974 18,12 C18,14.2195857 17.1492525,16.2404687 15.7560531,17.7543533 L17.5732233,19.5732233 C17.6708544,19.6708544 17.6708544,19.8291456 17.5732233,19.9267767 C17.5263392,19.9736608 17.4627507,20 17.3964466,20 L10.25,20 Z' id='b'/><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='0.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='0.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='0.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 0.75) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b'/></g><g transform='translate(0, 1) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23c)' xlink:href='%23b'/></g><g transform='rotate(${e} 12 12)'><use fill='%23FFF' xlink:href='%23b'/><path d='M11,19 L11,14.5 L12.8568184,16.3571474 C14.160342,15.3514059 15,13.7737593 15,12 C15,10.2262407 14.160342,8.6485941 12.8568184,7.64285263 L11,9.5 L11,5 L12.193,4.99949654 L15.5,5 L14.2798125,6.22017067 C15.9414235,7.59584189 17,9.67429905 17,12 C17,14.3257233 15.9414031,16.4041981 14.2797646,17.779869 L15.5,19 L11,19 Z' fill='%23000'/></g></g></svg>") 12 12, pointer`,d0=(e,t)=>GN(HN(e,t));var h0="appPointerEvents_arpwu8w",g0="appDisablePointerEvents_a1pulxae";var eC=uo(TT());var Vi=uo(fn());async function tC(e,t,r=1/0,o){o??=new _n(e,{silent:!0});let n=[],i=[],a=[];for(let l of t){if(a.length>=r){i.push(l);continue}if(!ms.includes(l.type)){n.push(l);continue}let c=o.add(l);a.push(c)}return n.length>0&&gr({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,Vi.jsxs)("span",{className:wi,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&gr({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,Vi.jsxs)("span",{className:wi,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),Yc(o,a).catch(()=>{}),(await Promise.all(a)).filter(xi)}async function Yc(e,t){let r="uploadEmbeddedImagesByUrl",o={type:"add",key:r,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of e.statusUpdates())gr({...o,text:(0,Vi.jsxs)("span",{className:wi,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(t);let{failed:n}=e.status;n>0&&gr({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,Vi.jsxs)("span",{className:wi,children:["Failed to upload ",n," ",(0,eC.default)("image",n)]}),duration:5e3}),gr({type:"remove",key:r})}var rC=ge("ChooseFileService"),Qc=class{constructor(t,r,o){this.engine=t;this.assetService=r;this.filePickerRef=o;T(this,"assetUploader");this.assetUploader=new _n(this.engine)}async pickFile({allowedFileTypes:t,multiple:r}={}){let o=this.filePickerRef.current;if(!o)return null;let n=await o.show(t?.map(i=>`.${i}`),r);return n.isFiles()?n.value:null}async pickImage({allowedFileTypes:t=ps,multiple:r}={}){return this.pickFile({allowedFileTypes:t,multiple:r})}async pickAndUploadImage(t={}){try{let r=await this.pickImage(t);if(!r)return[];if(r.length===1){let o=await this.assetUploader.add(r[0]);if(!o)return[];if(await this.assetService.refresh().catch(ke),xi(o))return[o]}else return await tC(this.engine,r,t.maxUploads)}catch(r){rC.warn("Failed to upload file:",r)}return[]}async pickAndUploadFile(t){try{let r=await this.pickFile(t);if(!r)return;let o=r[0];return o?await this.assetUploader.add(o):void 0}catch(r){rC.warn("Failed to upload file:",r)}}async addImages(t){if(!t?.length)return[];let o=(await Promise.all(Array.from(t,n=>this.assetUploader.add(n)))).filter(xi);return o.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(ke),o}},{service:oC,resolve:_N}=Kg();function V0(e,t,r){_N(new Qc(e,t,r))}var nC=class{constructor(){T(this,"nodeIdToRenderIdToRect",new Map);T(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);T(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(t){let r=new Set,o=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:s}of t){let{childrenRects:l,...c}=a;o.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),o.add(n);let p=s?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(s):this.nodeIdToRenderIdToRect.get(n)?.get(i),m=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(dr(p,c,!0)&&jN(m,l))){if(s){let d=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,f=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;d.set(s,{...c,matrix:f}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,d)}else{let d=this.nodeIdToRenderIdToRect.get(n)??new Map;d.set(i,tt.from(c)),this.nodeIdToRenderIdToRect.set(n,d)}if(l){let d=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;d.set(i,l),this.nodeIdToRenderIdToChildrenRects.set(n,d)}r.add(n)}}return r}getContentSize(t){let r=this.getRect(t),o=this.getChildrenRects(t);if(!r||!o)return;let{width:n,height:i}=tt.merge(...o);return{width:n,height:i}}getRect(t){let r=$c(t);return this.nodeIdToRenderIdToRect.get(r)?.get(t)}getRects(t){return this.nodeIdToRenderIdToRect.get(t)}getLayoutTemplateRects(t){return this.nodeIdToLayoutTemplateSelectorToRect.get(t)}getChildrenRects(t){let r=$c(t);return this.nodeIdToRenderIdToChildrenRects.get(r)?.get(t)}pruneAfterTreeChanges(t){for(let r of t){let o=r.to.parentid&&r.from?.parentid&&r.to.parentid!==r.from.parentid;r.removed?(this.nodeIdToRenderIdToRect.delete(r.id),this.nodeIdToRenderIdToChildrenRects.delete(r.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(r.id)):o&&this.nodeIdToRenderIdToRect.delete(r.id)}}};function jN(e,t){return e===t?!0:e===void 0||t===void 0||e.length!==t.length?!1:t.every((r,o)=>tt.equals(r,e[o]??null))}function iC(e){window.addEventListener("beforeunload",t=>{e()&&(t.preventDefault(),t.returnValue="You have unsaved changes. They might be lost if you leave the page.")})}var JN={track:!0};function aC(e){let t={...e,event:"preview_shown"};vu(t,JN)}var XN=ge("CodeGenerationStore"),qN="transform",Xn,Ko,Ws=class{constructor(t){this.sourceNode=t;_(this,Xn,[]);_(this,Ko)}start(t){let r=performance.now();return{end:o=>{I(this,Xn).push([t,performance.now()-r]),se(this,Ko,I(this,Ko)??o),t===qN&&this.completeSession()}}}restartSession(){se(this,Xn,[]),se(this,Ko,void 0)}completeSession(){I(this,Ko)?.forEach(({type:t,source:r,artifacts:o})=>{let n=KN(t,this.sourceNode);if(!n)return;let i={codeType:n,durationMs:0,updateCount:0,updateDurationMs:0,serializationDurationMs:0,compilationDurationMs:0,synchronizationDurationMs:0,size:r.length,id:this.sourceNode.id,nodes:o?.metrics?.nodes??1,variants:o?.metrics?.variants??0,svgBytes:o?.metrics?.svgBytes,textBytes:o?.metrics?.textBytes};for(let[s,l]of I(this,Xn))switch(i.durationMs+=l,s){case"update":i.updateCount++,i.updateDurationMs+=l;break;case"serialize":i.serializationDurationMs+=l;break;case"transform":i.compilationDurationMs+=l;break;case"synchronize":i.synchronizationDurationMs+=l;break;default:$(s)}let a;for(a in i){let s=i[a];G(s)&&(i[a]=Math.round(s))}XN.trace("Code Generation Metrics",i),Gt("code_generation",i)}),this.restartSession()}};Xn=new WeakMap,Ko=new WeakMap;function KN(e,t){switch(e){case"canvasComponent":return"smart_component";case"css":return"styles_preset";case"collection":return"collection";case"draftCollection":return"draft_collection";case"componentPresets":return"component_presets";case"screen":return W(t)?"web_page":"prototype_screen";case"prototype":return"prototype";case"vector":return"vector";case"vectorSet":return"vector_set";case"codeFile":case"config":case"siteMetadata":case"webPageMetadata":case"layoutTemplate":case"localization":case"design":return;default:$(e)}}function YN(e,t){let r={};if(!t||sm(e))return r;for(let o of e.cases)for(let n of t){let i=o.nameLocalized;if(!i)continue;let a=i[n.id]?.value;if(!E(a))continue;let s=r[o.id]??{};r[o.id]=s,s[n.id]=a}return r}function sC(e,t,r){if(e.cases.length===0)return u`(value) => value`;let o=YN(e,t),n=u`value`,i=u`locale`,a=u`fallbackLocale`;return new v(te.lines(u`(${n}, ${i}) => {`,u`const ${a} = ${i}?.fallback;`,u`switch (${n}) {`,...e.cases.map(({id:s,name:l})=>{let c=o[s];return c?new v(te.lines(u`case ${s}:`,u`switch (${i}?.id) {`,...Object.entries(c).map(([p,m])=>u`case ${p}: return ${m};`),u`default:`,u`if (${a}) return ${v.fn(r,n,a)};`,u`return ${l};`,u`}`)):u`case ${s}: return ${l};`}),u`default: return "";`,u`}`,u`}`))}var Zc="framercms";function lC(e,t,r){return`${e}-${t}.${r}`}var Hs=class{constructor(t){this.componentSourceNodeId=t;T(this,"assets",{})}create(t,r,o){let n=lC(this.componentSourceNodeId,t,r);return this.assets[n]=o,u`new URL(${`./${n}`}, import.meta.url).href`}};var QN=128e3,Gs=class{constructor(){T(this,"values",new Map)}add(t){let r=this.values.get(t);if(G(r))return r;let o=this.values.size;return this.values.set(t,o),o}serialize(t,r,o,n,i,a,s){let l=n.create(),c=l.declarations,p=l.bindings,m=[],d=n.create();for(let[g,S]of this.values){d.estimatedSize+g.length>QN&&(d=n.create());let C=d.imports,N=d.declarations,b=d.bindings,w=new No(t,C,b,void 0,r,o),M=r.tree.getScopeNodeFor(t),L=yr(g,{definitionProvider:P,tree:r.tree,nodeId:t.id,scopeId:M?.id,collectors:{assets:a,imports:C,links:w}}),F=b.create("richText");N.create(u`export const ${F} = ${L}`);let H=c.dedupe("getRichText",u.joinLines(u`(submodule, key) => async () => {`,u`const module = await submodule()`,u`return module[key]`,u`}`)),z=c.dedupe("submodule",u`() => import(${d.submoduleImport})`);m[S]=v.fn(H,z,String(F))}let f=c.dedupe("richTexts",m),h=p.create(`resolveRichText${Wu(s)}`);return c.create(u.joinLines(u`export async function ${h}(pointer: number) {`,u`const richText = ${f}[pointer]`,u`if (richText) return await richText()`,u`}`)),i.addImport(l.submoduleImport,{exportSpecifier:String(h)})}};var cC=uo(IT());function We(e,...t){if(!e)throw Error("Assertion Error"+(t.length>0?": "+t.join(" "):""))}function Mi(e){throw new Error(`Unexpected value: ${e}`)}var ZN=uo(fn());var dC=`// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
import { ComponentPresetsConsumer, Link } from "framer";
import { Fragment, createElement } from "react";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
var RichTextJsonType = /* @__PURE__ */ ((RichTextJsonType2) => {
  RichTextJsonType2[RichTextJsonType2["Fragment"] = 1] = "Fragment";
  RichTextJsonType2[RichTextJsonType2["Link"] = 2] = "Link";
  RichTextJsonType2[RichTextJsonType2["Module"] = 3] = "Module";
  RichTextJsonType2[RichTextJsonType2["Tag"] = 4] = "Tag";
  RichTextJsonType2[RichTextJsonType2["Text"] = 5] = "Text";
  return RichTextJsonType2;
})(RichTextJsonType || {});
function getRichTextJsonResolver(components) {
  const cache = /* @__PURE__ */ new Map();
  function deserializeChildren(children) {
    return children.map(deserializeNode);
  }
  function deserializeNode(node) {
    switch (node[0]) {
      case 1 /* Fragment */: {
        const [, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Fragment, void 0, ...childNodes);
      }
      case 2 /* Link */: {
        const [, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Link, props, ...childNodes);
      }
      case 3 /* Module */: {
        const [, identifier, props] = node;
        const Component = components[identifier];
        assert(Component, "Module not found");
        return <ComponentPresetsConsumer componentIdentifier={identifier}>
                        {(presetProps) => <Component {...presetProps} {...props} />}
                    </ComponentPresetsConsumer>;
      }
      case 4 /* Tag */: {
        const [, tag, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(tag, props, ...childNodes);
      }
      case 5 /* Text */: {
        const [, text] = node;
        return text;
      }
    }
  }
  return (pointer) => {
    const cached = cache.get(pointer);
    if (cached) return cached;
    const json = JSON.parse(pointer);
    const result = deserializeNode(json);
    cache.set(pointer, result);
    return result;
  };
}
export {
  RichTextJsonType,
  getRichTextJsonResolver
};
`;var Us=class{constructor(t,r,o,n,i,a,s,l){this.collectionNode=t;this.treeStore=r;this.imports=o;this.submodules=n;this.bindings=i;this.declarations=a;this.assets=s;this.links=l;T(this,"scopeNode");T(this,"cache",new Map);T(this,"components",{});T(this,"resolvers");T(this,"serializers",{fragment:t=>[1,...t],link:(t,r)=>[2,t,...r],module:(t,r)=>{if(this.addModuleImport(t))return[3,t,r]},tag:(t,r,o)=>[4,t,r,...o],text:t=>[5,t]});T(this,"resolveRichTextBinding");this.resolveRichTextBinding=this.bindings.create("resolveRichText"),this.scopeNode=this.treeStore.tree.getScopeNodeFor(this.collectionNode),this.resolvers=xy(this.assets,this.links,void 0,void 0)}addModuleImport(t){if(t in this.components)return!0;let r=Q(t),o=this.imports.addModuleImport(r);return o?(this.components[t]=o,!0):!1}add(t){let r=this.cache.get(t);if(r)return r;let o=wy(t,this.resolvers,this.serializers,{definitionProvider:P,tree:this.treeStore.tree,nodeId:this.collectionNode.id,scopeId:this.scopeNode?.id}),n=JSON.stringify(o);return this.cache.set(t,n),n}serialize(){let t=this.imports.addImport(this.submodules.create(dC).submoduleImport,{exportSpecifier:"getRichTextJsonResolver"}),r=this.declarations.dedupe("richTextComponents",this.components);this.declarations.create(u`const ${this.resolveRichTextBinding} = ${v.fn(t,r)}`)}};var _s=class{constructor(){T(this,"values",new Map)}add(t){let r=this.values.get(t);if(G(r))return r;let o=this.values.size;return this.values.set(t,o),o}serialize(t,r){let o=[];for(let[i,a]of this.values){let s=Q(i),{importSpecifier:l}=Yr(s,"collection",t);y(l,"Import specifier must be defined"),o[a]=u`() => import(${l})`}let n=r.dedupe("vectors",o);return r.dedupe("resolveVectorSetItem",u`(pointer: number) => {${u.joinLines(u`const vector = ${n}[pointer]`,u`if (vector) return vector().then(v => v.default)`)}}`)}};var Qe={Uint8:1,Uint16:2,Uint32:4,BigUint64:8,Int8:1,Int16:2,Int32:4,BigInt64:8,Float32:4,Float64:8},js=class{constructor(t){this.bytes=t;T(this,"offset",0);T(this,"view");T(this,"decoder",new TextDecoder);this.view=qn(this.bytes)}getOffset(){return this.offset}ensureLength(t){let r=this.bytes.length;if(!(this.offset+t<=r))throw new Error("Reading out of bounds")}readUint8(){let t=Qe.Uint8;this.ensureLength(t);let r=this.view.getUint8(this.offset);return this.offset+=t,r}readUint16(){let t=Qe.Uint16;this.ensureLength(t);let r=this.view.getUint16(this.offset);return this.offset+=t,r}readUint32(){let t=Qe.Uint32;this.ensureLength(t);let r=this.view.getUint32(this.offset);return this.offset+=t,r}readUint64(){let t=this.readBigUint64();return Number(t)}readBigUint64(){let t=Qe.BigUint64;this.ensureLength(t);let r=this.view.getBigUint64(this.offset);return this.offset+=t,r}readInt8(){let t=Qe.Int8;this.ensureLength(t);let r=this.view.getInt8(this.offset);return this.offset+=t,r}readInt16(){let t=Qe.Int16;this.ensureLength(t);let r=this.view.getInt16(this.offset);return this.offset+=t,r}readInt32(){let t=Qe.Int32;this.ensureLength(t);let r=this.view.getInt32(this.offset);return this.offset+=t,r}readInt64(){let t=this.readBigInt64();return Number(t)}readBigInt64(){let t=Qe.BigInt64;this.ensureLength(t);let r=this.view.getBigInt64(this.offset);return this.offset+=t,r}readFloat32(){let t=Qe.Float32;this.ensureLength(t);let r=this.view.getFloat32(this.offset);return this.offset+=t,r}readFloat64(){let t=Qe.Float64;this.ensureLength(t);let r=this.view.getFloat64(this.offset);return this.offset+=t,r}readBytes(t){let r=this.offset,o=r+t,n=this.bytes.subarray(r,o);return this.offset=o,n}readString(){let t=this.readUint32(),r=this.readBytes(t);return this.decoder.decode(r)}readJson(){let t=this.readString();return JSON.parse(t)}};function qn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}var ew=1024,tw=1.5,ed=e=>2**e-1,td=e=>-(2**(e-1)),rd=e=>2**(e-1)-1,Pr={Uint8:0,Uint16:0,Uint32:0,Uint64:0,BigUint64:0,Int8:td(8),Int16:td(16),Int32:td(32),Int64:Number.MIN_SAFE_INTEGER,BigInt64:-(BigInt(2)**BigInt(63))},Fr={Uint8:ed(8),Uint16:ed(16),Uint32:ed(32),Uint64:Number.MAX_SAFE_INTEGER,BigUint64:BigInt(2)**BigInt(64)-BigInt(1),Int8:rd(8),Int16:rd(16),Int32:rd(32),Int64:Number.MAX_SAFE_INTEGER,BigInt64:BigInt(2)**BigInt(63)-BigInt(1)};function Lr(e,t,r,o){We(e>=t,e,"outside lower bound for",o),We(e<=r,e,"outside upper bound for",o)}var Yo=class{constructor(){T(this,"offset",0);T(this,"bytes",new Uint8Array(ew));T(this,"view",qn(this.bytes));T(this,"encoder",new TextEncoder);T(this,"encodedStrings",new Map)}getOffset(){return this.offset}slice(t=0,r=this.offset){return this.bytes.slice(t,r)}subarray(t=0,r=this.offset){return this.bytes.subarray(t,r)}ensureLength(t){let r=this.bytes.length;if(this.offset+t<=r)return;let o=Math.ceil(r*tw)+t,n=new Uint8Array(o);n.set(this.bytes),this.bytes=n,this.view=qn(n)}writeUint8(t){Lr(t,Pr.Uint8,Fr.Uint8,"Uint8");let r=Qe.Uint8;this.ensureLength(r),this.view.setUint8(this.offset,t),this.offset+=r}writeUint16(t){Lr(t,Pr.Uint16,Fr.Uint16,"Uint16");let r=Qe.Uint16;this.ensureLength(r),this.view.setUint16(this.offset,t),this.offset+=r}writeUint32(t){Lr(t,Pr.Uint32,Fr.Uint32,"Uint32");let r=Qe.Uint32;this.ensureLength(r),this.view.setUint32(this.offset,t),this.offset+=r}writeUint64(t){Lr(t,Pr.Uint64,Fr.Uint64,"Uint64");let r=BigInt(t);this.writeBigUint64(r)}writeBigUint64(t){Lr(t,Pr.BigUint64,Fr.BigUint64,"BigUint64");let r=Qe.BigUint64;this.ensureLength(r),this.view.setBigUint64(this.offset,t),this.offset+=r}writeInt8(t){Lr(t,Pr.Int8,Fr.Int8,"Int8");let r=Qe.Int8;this.ensureLength(r),this.view.setInt8(this.offset,t),this.offset+=r}writeInt16(t){Lr(t,Pr.Int16,Fr.Int16,"Int16");let r=Qe.Int16;this.ensureLength(r),this.view.setInt16(this.offset,t),this.offset+=r}writeInt32(t){Lr(t,Pr.Int32,Fr.Int32,"Int32");let r=Qe.Int32;this.ensureLength(r),this.view.setInt32(this.offset,t),this.offset+=r}writeInt64(t){Lr(t,Pr.Int64,Fr.Int64,"Int64");let r=BigInt(t);this.writeBigInt64(r)}writeBigInt64(t){Lr(t,Pr.BigInt64,Fr.BigInt64,"BigInt64");let r=Qe.BigInt64;this.ensureLength(r),this.view.setBigInt64(this.offset,t),this.offset+=r}writeFloat32(t){let r=Qe.Float32;this.ensureLength(r),this.view.setFloat32(this.offset,t),this.offset+=r}writeFloat64(t){let r=Qe.Float64;this.ensureLength(r),this.view.setFloat64(this.offset,t),this.offset+=r}writeBytes(t){let r=t.length;this.ensureLength(r),this.bytes.set(t,this.offset),this.offset+=r}encodeString(t){let r=this.encodedStrings.get(t);if(r)return r;let o=this.encoder.encode(t);return this.encodedStrings.set(t,o),o}writeString(t){let r=this.encodeString(t),o=r.length;this.writeUint32(o),this.writeBytes(r)}writeJson(t){let r=JSON.stringify(t);this.writeString(r)}};var uC=`var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// ../../../node_modules/dataloader/index.js
var require_dataloader = __commonJS({
  "../../../node_modules/dataloader/index.js"(exports, module) {
    "use strict";
    var DataLoader2 = /* @__PURE__ */ function() {
      function DataLoader3(batchLoadFn, options) {
        if (typeof batchLoadFn !== "function") {
          throw new TypeError("DataLoader must be constructed with a function which accepts " + ("Array<key> and returns Promise<Array<value>>, but got: " + batchLoadFn + "."));
        }
        this._batchLoadFn = batchLoadFn;
        this._maxBatchSize = getValidMaxBatchSize(options);
        this._batchScheduleFn = getValidBatchScheduleFn(options);
        this._cacheKeyFn = getValidCacheKeyFn(options);
        this._cacheMap = getValidCacheMap(options);
        this._batch = null;
        this.name = getValidName(options);
      }
      var _proto = DataLoader3.prototype;
      _proto.load = function load(key) {
        if (key === null || key === void 0) {
          throw new TypeError("The loader.load() function must be called with a value, " + ("but got: " + String(key) + "."));
        }
        var batch = getCurrentBatch(this);
        var cacheMap = this._cacheMap;
        var cacheKey = this._cacheKeyFn(key);
        if (cacheMap) {
          var cachedPromise = cacheMap.get(cacheKey);
          if (cachedPromise) {
            var cacheHits = batch.cacheHits || (batch.cacheHits = []);
            return new Promise(function(resolve) {
              cacheHits.push(function() {
                resolve(cachedPromise);
              });
            });
          }
        }
        batch.keys.push(key);
        var promise = new Promise(function(resolve, reject) {
          batch.callbacks.push({
            resolve,
            reject
          });
        });
        if (cacheMap) {
          cacheMap.set(cacheKey, promise);
        }
        return promise;
      };
      _proto.loadMany = function loadMany(keys) {
        if (!isArrayLike(keys)) {
          throw new TypeError("The loader.loadMany() function must be called with Array<key> " + ("but got: " + keys + "."));
        }
        var loadPromises = [];
        for (var i = 0; i < keys.length; i++) {
          loadPromises.push(this.load(keys[i])["catch"](function(error) {
            return error;
          }));
        }
        return Promise.all(loadPromises);
      };
      _proto.clear = function clear(key) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          cacheMap["delete"](cacheKey);
        }
        return this;
      };
      _proto.clearAll = function clearAll() {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          cacheMap.clear();
        }
        return this;
      };
      _proto.prime = function prime(key, value) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          if (cacheMap.get(cacheKey) === void 0) {
            var promise;
            if (value instanceof Error) {
              promise = Promise.reject(value);
              promise["catch"](function() {
              });
            } else {
              promise = Promise.resolve(value);
            }
            cacheMap.set(cacheKey, promise);
          }
        }
        return this;
      };
      return DataLoader3;
    }();
    var enqueuePostPromiseJob = typeof process === "object" && typeof process.nextTick === "function" ? function(fn) {
      if (!resolvedPromise) {
        resolvedPromise = Promise.resolve();
      }
      resolvedPromise.then(function() {
        process.nextTick(fn);
      });
    } : typeof setImmediate === "function" ? function(fn) {
      setImmediate(fn);
    } : function(fn) {
      setTimeout(fn);
    };
    var resolvedPromise;
    function getCurrentBatch(loader) {
      var existingBatch = loader._batch;
      if (existingBatch !== null && !existingBatch.hasDispatched && existingBatch.keys.length < loader._maxBatchSize) {
        return existingBatch;
      }
      var newBatch = {
        hasDispatched: false,
        keys: [],
        callbacks: []
      };
      loader._batch = newBatch;
      loader._batchScheduleFn(function() {
        dispatchBatch(loader, newBatch);
      });
      return newBatch;
    }
    function dispatchBatch(loader, batch) {
      batch.hasDispatched = true;
      if (batch.keys.length === 0) {
        resolveCacheHits(batch);
        return;
      }
      var batchPromise;
      try {
        batchPromise = loader._batchLoadFn(batch.keys);
      } catch (e) {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function " + ("errored synchronously: " + String(e) + ".")));
      }
      if (!batchPromise || typeof batchPromise.then !== "function") {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise: " + String(batchPromise) + ".")));
      }
      batchPromise.then(function(values) {
        if (!isArrayLike(values)) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise of an Array: " + String(values) + "."));
        }
        if (values.length !== batch.keys.length) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys." + ("\\n\\nKeys:\\n" + String(batch.keys)) + ("\\n\\nValues:\\n" + String(values)));
        }
        resolveCacheHits(batch);
        for (var i = 0; i < batch.callbacks.length; i++) {
          var value = values[i];
          if (value instanceof Error) {
            batch.callbacks[i].reject(value);
          } else {
            batch.callbacks[i].resolve(value);
          }
        }
      })["catch"](function(error) {
        failedDispatch(loader, batch, error);
      });
    }
    function failedDispatch(loader, batch, error) {
      resolveCacheHits(batch);
      for (var i = 0; i < batch.keys.length; i++) {
        loader.clear(batch.keys[i]);
        batch.callbacks[i].reject(error);
      }
    }
    function resolveCacheHits(batch) {
      if (batch.cacheHits) {
        for (var i = 0; i < batch.cacheHits.length; i++) {
          batch.cacheHits[i]();
        }
      }
    }
    function getValidMaxBatchSize(options) {
      var shouldBatch = !options || options.batch !== false;
      if (!shouldBatch) {
        return 1;
      }
      var maxBatchSize = options && options.maxBatchSize;
      if (maxBatchSize === void 0) {
        return Infinity;
      }
      if (typeof maxBatchSize !== "number" || maxBatchSize < 1) {
        throw new TypeError("maxBatchSize must be a positive number: " + maxBatchSize);
      }
      return maxBatchSize;
    }
    function getValidBatchScheduleFn(options) {
      var batchScheduleFn = options && options.batchScheduleFn;
      if (batchScheduleFn === void 0) {
        return enqueuePostPromiseJob;
      }
      if (typeof batchScheduleFn !== "function") {
        throw new TypeError("batchScheduleFn must be a function: " + batchScheduleFn);
      }
      return batchScheduleFn;
    }
    function getValidCacheKeyFn(options) {
      var cacheKeyFn = options && options.cacheKeyFn;
      if (cacheKeyFn === void 0) {
        return function(key) {
          return key;
        };
      }
      if (typeof cacheKeyFn !== "function") {
        throw new TypeError("cacheKeyFn must be a function: " + cacheKeyFn);
      }
      return cacheKeyFn;
    }
    function getValidCacheMap(options) {
      var shouldCache = !options || options.cache !== false;
      if (!shouldCache) {
        return null;
      }
      var cacheMap = options && options.cacheMap;
      if (cacheMap === void 0) {
        return /* @__PURE__ */ new Map();
      }
      if (cacheMap !== null) {
        var cacheFunctions = ["get", "set", "delete", "clear"];
        var missingFunctions = cacheFunctions.filter(function(fnName) {
          return cacheMap && typeof cacheMap[fnName] !== "function";
        });
        if (missingFunctions.length !== 0) {
          throw new TypeError("Custom cacheMap missing methods: " + missingFunctions.join(", "));
        }
      }
      return cacheMap;
    }
    function getValidName(options) {
      if (options && options.name) {
        return options.name;
      }
      return null;
    }
    function isArrayLike(x) {
      return typeof x === "object" && x !== null && typeof x.length === "number" && (x.length === 0 || x.length > 0 && Object.prototype.hasOwnProperty.call(x, x.length - 1));
    }
    module.exports = DataLoader2;
  }
});

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var import_dataloader = __toESM(require_dataloader());

// src/code-generation/components/cms/bundled/BufferReader.ts
var BYTE_LENGTH = {
  Uint8: 1,
  Uint16: 2,
  Uint32: 4,
  BigUint64: 8,
  Int8: 1,
  Int16: 2,
  Int32: 4,
  BigInt64: 8,
  Float32: 4,
  Float64: 8
};
var BufferReader = class {
  constructor(bytes) {
    this.bytes = bytes;
    __publicField(this, "offset", 0);
    __publicField(this, "view");
    __publicField(this, "decoder", new TextDecoder());
    this.view = getDataView(this.bytes);
  }
  getOffset() {
    return this.offset;
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    throw new Error("Reading out of bounds");
  }
  readUint8() {
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    const value = this.view.getUint8(this.offset);
    this.offset += size;
    return value;
  }
  readUint16() {
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    const value = this.view.getUint16(this.offset);
    this.offset += size;
    return value;
  }
  readUint32() {
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    const value = this.view.getUint32(this.offset);
    this.offset += size;
    return value;
  }
  readUint64() {
    const bigint = this.readBigUint64();
    return Number(bigint);
  }
  readBigUint64() {
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    const value = this.view.getBigUint64(this.offset);
    this.offset += size;
    return value;
  }
  readInt8() {
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    const value = this.view.getInt8(this.offset);
    this.offset += size;
    return value;
  }
  readInt16() {
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    const value = this.view.getInt16(this.offset);
    this.offset += size;
    return value;
  }
  readInt32() {
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    const value = this.view.getInt32(this.offset);
    this.offset += size;
    return value;
  }
  readInt64() {
    const bigint = this.readBigInt64();
    return Number(bigint);
  }
  readBigInt64() {
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    const value = this.view.getBigInt64(this.offset);
    this.offset += size;
    return value;
  }
  readFloat32() {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    const value = this.view.getFloat32(this.offset);
    this.offset += size;
    return value;
  }
  readFloat64() {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    const value = this.view.getFloat64(this.offset);
    this.offset += size;
    return value;
  }
  readBytes(length) {
    const start = this.offset;
    const end = start + length;
    const value = this.bytes.subarray(start, end);
    this.offset = end;
    return value;
  }
  readString() {
    const length = this.readUint32();
    const bytes = this.readBytes(length);
    return this.decoder.decode(bytes);
  }
  readJson() {
    const string = this.readString();
    return JSON.parse(string);
  }
};
function getDataView(bytes) {
  return new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
import { ControlType as ControlType2 } from "framer";

// ../../library/src/utils/utils.ts
var isWindow = typeof window !== "undefined";
var supportsRequestIdleCallback = isWindow && typeof window.requestIdleCallback === "function";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}
function assertNever(condition) {
  throw new Error(\`Unexpected value: \${condition}\`);
}

// src/code-generation/components/cms/bundled/BufferWriter.ts
var INITIAL_BUFFER_SIZE = 1024;
var GROWTH_FACTOR = 1.5;
var maxUnsignedNumber = (bits) => 2 ** bits - 1;
var minSignedNumber = (bits) => -(2 ** (bits - 1));
var maxSignedNumber = (bits) => 2 ** (bits - 1) - 1;
var MIN_VALUE = {
  Uint8: 0,
  Uint16: 0,
  Uint32: 0,
  Uint64: 0,
  BigUint64: 0,
  Int8: minSignedNumber(8),
  Int16: minSignedNumber(16),
  Int32: minSignedNumber(32),
  Int64: Number.MIN_SAFE_INTEGER,
  BigInt64: -(BigInt(2) ** BigInt(63))
};
var MAX_VALUE = {
  Uint8: maxUnsignedNumber(8),
  Uint16: maxUnsignedNumber(16),
  Uint32: maxUnsignedNumber(32),
  Uint64: Number.MAX_SAFE_INTEGER,
  BigUint64: BigInt(2) ** BigInt(64) - BigInt(1),
  Int8: maxSignedNumber(8),
  Int16: maxSignedNumber(16),
  Int32: maxSignedNumber(32),
  Int64: Number.MAX_SAFE_INTEGER,
  BigInt64: BigInt(2) ** BigInt(63) - BigInt(1)
};
function assertRange(value, min, max, dataType) {
  assert(value >= min, value, "outside lower bound for", dataType);
  assert(value <= max, value, "outside upper bound for", dataType);
}
var BufferWriter = class {
  constructor() {
    __publicField(this, "offset", 0);
    __publicField(this, "bytes", new Uint8Array(INITIAL_BUFFER_SIZE));
    __publicField(this, "view", getDataView(this.bytes));
    __publicField(this, "encoder", new TextEncoder());
    __publicField(this, "encodedStrings", /* @__PURE__ */ new Map());
  }
  getOffset() {
    return this.offset;
  }
  slice(start = 0, end = this.offset) {
    return this.bytes.slice(start, end);
  }
  subarray(start = 0, end = this.offset) {
    return this.bytes.subarray(start, end);
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    const newLength = Math.ceil(oldLength * GROWTH_FACTOR) + requiredBytes;
    const newBytes = new Uint8Array(newLength);
    newBytes.set(this.bytes);
    this.bytes = newBytes;
    this.view = getDataView(newBytes);
  }
  writeUint8(value) {
    assertRange(value, MIN_VALUE.Uint8, MAX_VALUE.Uint8, "Uint8");
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    this.view.setUint8(this.offset, value);
    this.offset += size;
  }
  writeUint16(value) {
    assertRange(value, MIN_VALUE.Uint16, MAX_VALUE.Uint16, "Uint16");
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    this.view.setUint16(this.offset, value);
    this.offset += size;
  }
  writeUint32(value) {
    assertRange(value, MIN_VALUE.Uint32, MAX_VALUE.Uint32, "Uint32");
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    this.view.setUint32(this.offset, value);
    this.offset += size;
  }
  writeUint64(value) {
    assertRange(value, MIN_VALUE.Uint64, MAX_VALUE.Uint64, "Uint64");
    const bigint = BigInt(value);
    this.writeBigUint64(bigint);
  }
  writeBigUint64(value) {
    assertRange(value, MIN_VALUE.BigUint64, MAX_VALUE.BigUint64, "BigUint64");
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    this.view.setBigUint64(this.offset, value);
    this.offset += size;
  }
  writeInt8(value) {
    assertRange(value, MIN_VALUE.Int8, MAX_VALUE.Int8, "Int8");
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    this.view.setInt8(this.offset, value);
    this.offset += size;
  }
  writeInt16(value) {
    assertRange(value, MIN_VALUE.Int16, MAX_VALUE.Int16, "Int16");
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    this.view.setInt16(this.offset, value);
    this.offset += size;
  }
  writeInt32(value) {
    assertRange(value, MIN_VALUE.Int32, MAX_VALUE.Int32, "Int32");
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    this.view.setInt32(this.offset, value);
    this.offset += size;
  }
  writeInt64(value) {
    assertRange(value, MIN_VALUE.Int64, MAX_VALUE.Int64, "Int64");
    const bigint = BigInt(value);
    this.writeBigInt64(bigint);
  }
  writeBigInt64(value) {
    assertRange(value, MIN_VALUE.BigInt64, MAX_VALUE.BigInt64, "BigInt64");
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    this.view.setBigInt64(this.offset, value);
    this.offset += size;
  }
  writeFloat32(value) {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    this.view.setFloat32(this.offset, value);
    this.offset += size;
  }
  writeFloat64(value) {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    this.view.setFloat64(this.offset, value);
    this.offset += size;
  }
  writeBytes(value) {
    const size = value.length;
    this.ensureLength(size);
    this.bytes.set(value, this.offset);
    this.offset += size;
  }
  encodeString(value) {
    const cached = this.encodedStrings.get(value);
    if (cached) return cached;
    const bytes = this.encoder.encode(value);
    this.encodedStrings.set(value, bytes);
    return bytes;
  }
  writeString(value) {
    const bytes = this.encodeString(value);
    const size = bytes.length;
    this.writeUint32(size);
    this.writeBytes(bytes);
  }
  writeJson(value) {
    const json = JSON.stringify(value);
    this.writeString(json);
  }
};

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}
function isNull(value) {
  return value === null;
}

// src/code-generation/components/cms/bundled/models/DatabaseItemPointerModel.ts
var DatabaseItemPointerModel = class _DatabaseItemPointerModel {
  constructor(chunkId, offset, length) {
    this.chunkId = chunkId;
    this.offset = offset;
    this.length = length;
  }
  static fromString(value) {
    const [chunkId, offset, length] = value.split("/").map(Number);
    assert(isNumber(chunkId), "Invalid chunkId");
    assert(isNumber(offset), "Invalid offset");
    assert(isNumber(length), "Invalid length");
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  toString() {
    return \`\${this.chunkId}/\${this.offset}/\${this.length}\`;
  }
  static read(reader) {
    const chunkId = reader.readUint16();
    const offset = reader.readUint32();
    const length = reader.readUint32();
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  write(writer) {
    writer.writeUint16(this.chunkId);
    writer.writeUint32(this.offset);
    writer.writeUint32(this.length);
  }
  compare(other) {
    if (this.chunkId < other.chunkId) return -1;
    if (this.chunkId > other.chunkId) return 1;
    if (this.offset < other.offset) return -1;
    if (this.offset > other.offset) return 1;
    assert(this.length === other.length);
    return 0;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseValueModel.ts
import { ControlType } from "framer";
function getValueType(value) {
  if (isNull(value)) {
    return 0 /* Null */;
  }
  switch (value.type) {
    case ControlType.Array:
      return 1 /* Array */;
    case ControlType.Boolean:
      return 2 /* Boolean */;
    case ControlType.Color:
      return 3 /* Color */;
    case ControlType.Date:
      return 4 /* Date */;
    case ControlType.Enum:
      return 5 /* Enum */;
    case ControlType.File:
      return 6 /* File */;
    case ControlType.ResponsiveImage:
      return 10 /* ResponsiveImage */;
    case ControlType.Link:
      return 7 /* Link */;
    case ControlType.Number:
      return 8 /* Number */;
    case ControlType.Object:
      return 9 /* Object */;
    case ControlType.RichText:
      return 11 /* RichText */;
    case ControlType.String:
      return 12 /* String */;
    case ControlType.VectorSetItem:
      return 13 /* VectorSetItem */;
    default:
      assertNever(value);
  }
}
var DatabaseValueModel;
((DatabaseValueModel2) => {
  function read(reader) {
    const type = reader.readUint8();
    switch (type) {
      case 0 /* Null */:
        return null;
      case 1 /* Array */:
        return readArray(reader);
      case 2 /* Boolean */:
        return readBoolean(reader);
      case 3 /* Color */:
        return readColor(reader);
      case 4 /* Date */:
        return readDate(reader);
      case 5 /* Enum */:
        return readEnum(reader);
      case 6 /* File */:
        return readFile(reader);
      case 7 /* Link */:
        return readLink(reader);
      case 8 /* Number */:
        return readNumber(reader);
      case 9 /* Object */:
        return readObject(reader);
      case 10 /* ResponsiveImage */:
        return readResponsiveImage(reader);
      case 11 /* RichText */:
        return readRichText(reader);
      case 12 /* String */:
        return readString(reader);
      case 13 /* VectorSetItem */:
        return readVectorSetItem(reader);
      default:
        assertNever(type);
    }
  }
  DatabaseValueModel2.read = read;
  function write(writer, value) {
    const type = getValueType(value);
    writer.writeUint8(type);
    if (isNull(value)) return;
    switch (value.type) {
      case ControlType.Array:
        return writeArray(writer, value);
      case ControlType.Boolean:
        return writeBoolean(writer, value);
      case ControlType.Color:
        return writeColor(writer, value);
      case ControlType.Date:
        return writeDate(writer, value);
      case ControlType.Enum:
        return writeEnum(writer, value);
      case ControlType.File:
        return writeFile(writer, value);
      case ControlType.Link:
        return writeLink(writer, value);
      case ControlType.Number:
        return writeNumber(writer, value);
      case ControlType.Object:
        return writeObject(writer, value);
      case ControlType.ResponsiveImage:
        return writeResponsiveImage(writer, value);
      case ControlType.RichText:
        return writeRichText(writer, value);
      case ControlType.VectorSetItem:
        return writeVectorSetItem(writer, value);
      case ControlType.String:
        return writeString(writer, value);
      default:
        assertNever(value);
    }
  }
  DatabaseValueModel2.write = write;
  function compare(left, right, collation) {
    const leftType = getValueType(left);
    const rightType = getValueType(right);
    if (leftType < rightType) return -1;
    if (leftType > rightType) return 1;
    if (isNull(left) || isNull(right)) return 0;
    switch (left.type) {
      case ControlType.Array:
        assert(right.type === ControlType.Array);
        return compareArray(left, right, collation);
      case ControlType.Boolean:
        assert(right.type === ControlType.Boolean);
        return compareBoolean(left, right);
      case ControlType.Color:
        assert(right.type === ControlType.Color);
        return compareColor(left, right);
      case ControlType.Date:
        assert(right.type === ControlType.Date);
        return compareDate(left, right);
      case ControlType.Enum:
        assert(right.type === ControlType.Enum);
        return compareEnum(left, right);
      case ControlType.File:
        assert(right.type === ControlType.File);
        return compareFile(left, right);
      case ControlType.Link:
        assert(right.type === ControlType.Link);
        return compareLink(left, right);
      case ControlType.Number:
        assert(right.type === ControlType.Number);
        return compareNumber(left, right);
      case ControlType.Object:
        assert(right.type === ControlType.Object);
        return compareObject(left, right, collation);
      case ControlType.ResponsiveImage:
        assert(right.type === ControlType.ResponsiveImage);
        return compareResponsiveImage(left, right);
      case ControlType.RichText:
        assert(right.type === ControlType.RichText);
        return compareRichText(left, right);
      case ControlType.VectorSetItem:
        assert(right.type === ControlType.VectorSetItem);
        return compareVectorSetItem(left, right);
      case ControlType.String:
        assert(right.type === ControlType.String);
        return compareString(left, right, collation);
      default:
        assertNever(left);
    }
  }
  DatabaseValueModel2.compare = compare;
})(DatabaseValueModel || (DatabaseValueModel = {}));
function readArray(reader) {
  const length = reader.readUint16();
  const value = [];
  for (let i = 0; i < length; i++) {
    const item = DatabaseValueModel.read(reader);
    value.push(item);
  }
  return {
    type: ControlType.Array,
    value
  };
}
function writeArray(writer, value) {
  writer.writeUint16(value.value.length);
  for (const item of value.value) {
    DatabaseValueModel.write(writer, item);
  }
}
function compareArray(left, right, collation) {
  const leftLength = left.value.length;
  const rightLength = right.value.length;
  if (leftLength < rightLength) return -1;
  if (leftLength > rightLength) return 1;
  for (let i = 0; i < leftLength; i++) {
    const leftItem = left.value[i];
    const rightItem = right.value[i];
    const result = DatabaseValueModel.compare(leftItem, rightItem, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readBoolean(reader) {
  return {
    type: ControlType.Boolean,
    value: reader.readUint8() !== 0
  };
}
function writeBoolean(writer, value) {
  writer.writeUint8(value.value ? 1 : 0);
}
function compareBoolean(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readColor(reader) {
  return {
    type: ControlType.Color,
    value: reader.readString()
  };
}
function writeColor(writer, value) {
  writer.writeString(value.value);
}
function compareColor(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readDate(reader) {
  const timestamp = reader.readInt64();
  const date = new Date(timestamp);
  return {
    type: ControlType.Date,
    value: date.toISOString()
  };
}
function writeDate(writer, value) {
  const date = new Date(value.value);
  const timestamp = date.getTime();
  writer.writeInt64(timestamp);
}
function compareDate(left, right) {
  const leftDate = new Date(left.value);
  const rightDate = new Date(right.value);
  if (leftDate < rightDate) return -1;
  if (leftDate > rightDate) return 1;
  return 0;
}
function readEnum(reader) {
  return {
    type: ControlType.Enum,
    value: reader.readString()
  };
}
function writeEnum(writer, value) {
  writer.writeString(value.value);
}
function compareEnum(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readFile(reader) {
  return {
    type: ControlType.File,
    value: reader.readString()
  };
}
function writeFile(writer, value) {
  writer.writeString(value.value);
}
function compareFile(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readLink(reader) {
  return {
    type: ControlType.Link,
    value: reader.readJson()
  };
}
function writeLink(writer, value) {
  writer.writeJson(value.value);
}
function compareLink(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readNumber(reader) {
  return {
    type: ControlType.Number,
    value: reader.readFloat64()
  };
}
function writeNumber(writer, value) {
  writer.writeFloat64(value.value);
}
function compareNumber(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readObject(reader) {
  const length = reader.readUint16();
  const result = {};
  for (let i = 0; i < length; i++) {
    const key = reader.readString();
    result[key] = DatabaseValueModel.read(reader);
  }
  return {
    type: ControlType.Object,
    value: result
  };
}
function writeObject(writer, value) {
  const entries = Object.entries(value.value);
  writer.writeUint16(entries.length);
  for (const [key, item] of entries) {
    writer.writeString(key);
    DatabaseValueModel.write(writer, item);
  }
}
function compareObject(left, right, collation) {
  const leftKeys = Object.keys(left.value).sort();
  const rightKeys = Object.keys(right.value).sort();
  if (leftKeys.length < rightKeys.length) return -1;
  if (leftKeys.length > rightKeys.length) return 1;
  for (let i = 0; i < leftKeys.length; i++) {
    const leftKey = leftKeys[i];
    const rightKey = rightKeys[i];
    if (leftKey < rightKey) return -1;
    if (leftKey > rightKey) return 1;
    const leftValue = left.value[leftKey] ?? null;
    const rightValue = right.value[rightKey] ?? null;
    const result = DatabaseValueModel.compare(leftValue, rightValue, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readResponsiveImage(reader) {
  return {
    type: ControlType.ResponsiveImage,
    value: reader.readJson()
  };
}
function writeResponsiveImage(writer, value) {
  writer.writeJson(value.value);
}
function compareResponsiveImage(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readRichText(reader) {
  const type = reader.readInt8();
  if (type === 0) {
    return {
      type: ControlType.RichText,
      value: reader.readUint32()
    };
  }
  if (type === 1) {
    return {
      type: ControlType.RichText,
      value: reader.readString()
    };
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function writeRichText(writer, value) {
  if (isNumber(value.value)) {
    writer.writeInt8(0);
    writer.writeUint32(value.value);
    return;
  }
  if (isString(value.value)) {
    writer.writeInt8(1);
    writer.writeString(value.value);
    return;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function compareRichText(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (isNumber(leftValue) && isNumber(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  if (isString(leftValue) && isString(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function readString(reader) {
  return {
    type: ControlType.String,
    value: reader.readString()
  };
}
function writeString(writer, value) {
  writer.writeString(value.value);
}
function compareString(left, right, collation) {
  let leftValue = left.value;
  let rightValue = right.value;
  if (collation.type === 0 /* CaseInsensitive */) {
    leftValue = left.value.toLowerCase();
    rightValue = right.value.toLowerCase();
  }
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}
function readVectorSetItem(reader) {
  return {
    type: ControlType.VectorSetItem,
    value: reader.readUint32()
  };
}
function writeVectorSetItem(writer, value) {
  writer.writeUint32(value.value);
}
function compareVectorSetItem(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}

// src/code-generation/components/cms/bundled/models/DatabaseDictionaryIndexModel.ts
var DatabaseDictionaryIndexModel = class _DatabaseDictionaryIndexModel {
  constructor(fieldNames, options) {
    this.fieldNames = fieldNames;
    this.options = options;
    __publicField(this, "entries", []);
  }
  sortEntries() {
    this.entries.sort((left, right) => {
      for (let i = 0; i < this.fieldNames.length; i++) {
        const leftValue = left.values[i];
        const rightValue = right.values[i];
        const result = DatabaseValueModel.compare(leftValue, rightValue, this.options.collation);
        if (result !== 0) return result;
      }
      return left.pointer.compare(right.pointer);
    });
  }
  static deserialize(bytes) {
    const reader = new BufferReader(bytes);
    const collation = reader.readJson();
    const fieldCount = reader.readUint8();
    const fieldNames = [];
    for (let i = 0; i < fieldCount; i++) {
      const fieldName = reader.readString();
      fieldNames.push(fieldName);
    }
    const index = new _DatabaseDictionaryIndexModel(fieldNames, {
      collation
    });
    const entryCount = reader.readUint32();
    for (let i = 0; i < entryCount; i++) {
      const values = [];
      for (let j = 0; j < fieldCount; j++) {
        const fieldValue = DatabaseValueModel.read(reader);
        values.push(fieldValue);
      }
      const pointer = DatabaseItemPointerModel.read(reader);
      index.entries.push({ values, pointer });
    }
    return index;
  }
  serialize() {
    const writer = new BufferWriter();
    writer.writeJson(this.options.collation);
    writer.writeUint8(this.fieldNames.length);
    for (const fieldName of this.fieldNames) {
      writer.writeString(fieldName);
    }
    this.sortEntries();
    writer.writeUint32(this.entries.length);
    for (const entry of this.entries) {
      const { values, pointer } = entry;
      for (const value of values) {
        DatabaseValueModel.write(writer, value);
      }
      pointer.write(writer);
    }
    return writer.subarray();
  }
  addItem(item, pointer) {
    const values = this.fieldNames.map((fieldName) => {
      return item.getField(fieldName) ?? null;
    });
    this.entries.push({ values, pointer });
  }
};

// src/code-generation/components/cms/bundled/fetchWithRetries.ts
var maxRetries = 3;
var baseDelay = 250;
var retriableHTTPCodes = [
  408,
  // Request Timeout
  429,
  // Too Many Requests
  500,
  // Internal Server Error
  502,
  // Bad Gateway
  503,
  // Service Unavailable
  504
  // Gateway Timeout
];
var fetchWithRetries = async (input, init) => {
  let retryCount = 0;
  while (true) {
    try {
      const res = await fetch(input, init);
      if (!retriableHTTPCodes.includes(res.status) || ++retryCount > maxRetries) {
        return res;
      }
    } catch (error) {
      if (init?.signal?.aborted || ++retryCount > maxRetries) {
        throw error;
      }
    }
    await retryDelay(retryCount);
  }
};
async function retryDelay(retryCount) {
  const backoffExponent = retryCount - 1;
  const jitter = Math.random() + 1;
  const timeout = Math.floor(baseDelay * jitter * 2 ** backoffExponent);
  await new Promise((resolve) => {
    setTimeout(resolve, timeout);
  });
}

// src/code-generation/components/cms/bundled/rangeRequest.ts
async function rangeRequest(url, ranges) {
  const collapsedRanges = collapseRanges(ranges);
  const rangeStrings = [];
  let expectedLength = 0;
  for (const range of collapsedRanges) {
    rangeStrings.push(\`\${range.from}-\${range.to - 1}\`);
    expectedLength += range.to - range.from;
  }
  const rangeUrl = new URL(url);
  const rangeQuery = rangeStrings.join(",");
  rangeUrl.searchParams.set("range", rangeQuery);
  const response = await fetchWithRetries(rangeUrl);
  if (response.status !== 200) {
    throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
  }
  const buffer = await response.arrayBuffer();
  const bytes = new Uint8Array(buffer);
  if (bytes.length !== expectedLength) {
    throw new Error("Request failed: Unexpected response length");
  }
  const file = new PartialFile();
  let start = 0;
  for (const range of collapsedRanges) {
    const length = range.to - range.from;
    const end = start + length;
    const part = bytes.subarray(start, end);
    file.write(range.from, part);
    start = end;
  }
  return ranges.map((range) => {
    return file.read(range.from, range.to - range.from);
  });
}
var PartialFile = class {
  constructor() {
    __publicField(this, "chunks", []);
  }
  read(position, length) {
    for (const chunk of this.chunks) {
      if (position < chunk.start) {
        throw new Error("Missing data");
      }
      if (position > chunk.end) {
        continue;
      }
      if (position + length > chunk.end) {
        throw new Error("Missing data");
      }
      const from = position - chunk.start;
      const to = from + length;
      return chunk.data.slice(from, to);
    }
    throw new Error("Missing data");
  }
  write(position, data) {
    let start = position;
    let end = start + data.length;
    let fromIndex = 0;
    let toIndex = this.chunks.length;
    for (; fromIndex < toIndex; fromIndex++) {
      const chunk2 = this.chunks[fromIndex];
      assert(chunk2, "Missing chunk");
      if (start > chunk2.end) {
        continue;
      }
      if (start > chunk2.start) {
        const offset = start - chunk2.start;
        const prefix = chunk2.data.subarray(0, offset);
        data = join(prefix, data);
        start = chunk2.start;
      }
      break;
    }
    for (; toIndex > fromIndex; toIndex--) {
      const chunk2 = this.chunks[toIndex - 1];
      assert(chunk2, "Missing chunk");
      if (end < chunk2.start) {
        continue;
      }
      if (end < chunk2.end) {
        const offset = end - chunk2.start;
        const suffix = chunk2.data.subarray(offset);
        data = join(data, suffix);
        end = chunk2.end;
      }
      break;
    }
    const chunk = {
      start,
      end,
      data
    };
    const deleteCount = toIndex - fromIndex;
    this.chunks.splice(fromIndex, deleteCount, chunk);
  }
};
function join(left, right) {
  const length = left.length + right.length;
  const result = new Uint8Array(length);
  result.set(left, 0);
  result.set(right, left.length);
  return result;
}
function collapseRanges(ranges) {
  assert(ranges.length > 0, "Must have at least one range");
  const sorted = [...ranges].sort((a, b) => a.from - b.from);
  const collapsed = [];
  for (const range of sorted) {
    const index = collapsed.length - 1;
    const previous = collapsed[index];
    if (previous && range.from <= previous.to) {
      collapsed[index] = {
        from: previous.from,
        to: Math.max(previous.to, range.to)
      };
    } else {
      collapsed.push(range);
    }
  }
  return collapsed;
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
var DatabaseDictionaryIndex = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "fields");
    __publicField(this, "supportedLookupTypes", [
      "All" /* All */,
      "Equals" /* Equals */,
      "NotEquals" /* NotEquals */,
      "LessThan" /* LessThan */,
      "GreaterThan" /* GreaterThan */,
      "Contains" /* Contains */,
      "StartsWith" /* StartsWith */,
      "EndsWith" /* EndsWith */
    ]);
    __publicField(this, "modelPromise");
    __publicField(this, "model");
    __publicField(this, "collation");
    const schema = {};
    const fields = [];
    for (const fieldName of this.options.fieldNames) {
      const definition = this.options.collectionSchema[fieldName];
      assert(definition, "Missing definition for field", fieldName);
      schema[fieldName] = definition;
      fields.push({ type: "Identifier", name: fieldName });
    }
    this.schema = schema;
    this.fields = fields;
    this.collation = this.options.collation;
  }
  async loadModel() {
    const [bytes] = await rangeRequest(this.options.url, [this.options.range]);
    assert(bytes, "Failed to load model");
    return DatabaseDictionaryIndexModel.deserialize(bytes);
  }
  async getModel() {
    this.modelPromise ??= this.loadModel();
    this.model ??= await this.modelPromise;
    return this.model;
  }
  async lookupItems(queries) {
    assert(queries.length === this.fields.length, "Invalid query length");
    const model = await this.getModel();
    const chunks = queries.reduce(
      (memo, query, position) => memo.flatMap((entries) => {
        switch (query.type) {
          case "All" /* All */:
            return [entries];
          case "Equals" /* Equals */:
            return this.queryEquals(entries, query, position);
          case "NotEquals" /* NotEquals */:
            return this.queryNotEquals(entries, query, position);
          case "LessThan" /* LessThan */:
            return this.queryLessThan(entries, query, position);
          case "GreaterThan" /* GreaterThan */:
            return this.queryGreaterThan(entries, query, position);
          case "Contains" /* Contains */:
            return this.queryContains(entries, query, position);
          case "StartsWith" /* StartsWith */:
            return this.queryStartsWith(entries, query, position);
          case "EndsWith" /* EndsWith */:
            return this.queryEndsWith(entries, query, position);
          default:
            assertNever(query);
        }
      }),
      [model.entries]
    );
    const result = [];
    for (const entries of chunks) {
      for (const entry of entries) {
        const data = {};
        for (let i = 0; i < this.options.fieldNames.length; i++) {
          const fieldName = this.options.fieldNames[i];
          const fieldValue = entry.values[i];
          data[fieldName] = fieldValue;
        }
        result.push({ pointer: entry.pointer.toString(), data });
      }
    }
    return result;
  }
  queryEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(leftMost, rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryNotEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const result = [];
    const before = entries.slice(0, leftMost);
    if (before.length > 0) result.push(before);
    const after = entries.slice(rightMost + 1);
    if (after.length > 0) result.push(after);
    return result;
  }
  queryLessThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const rightMost = this.getRightMost(entries, position, query.value);
      const slice2 = entries.slice(0, rightMost + 1);
      return slice2.length > 0 ? [slice2] : [];
    }
    const leftMost = this.getLeftMost(entries, position, query.value);
    const slice = entries.slice(0, leftMost);
    return slice.length > 0 ? [slice] : [];
  }
  queryGreaterThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const leftMost = this.getLeftMost(entries, position, query.value);
      const slice2 = entries.slice(leftMost);
      return slice2.length > 0 ? [slice2] : [];
    }
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryContains(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.includes(target);
    });
  }
  queryStartsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.startsWith(target);
    });
  }
  queryEndsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.endsWith(target);
    });
  }
  /**
   * Returns the index of the left most entry that is equal to the target.
   *
   * \`\`\`text
   *   Left most
   *       \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the left most entry that is equal to the target.
   */
  getLeftMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) < 0) {
        left = middle + 1;
      } else {
        right = middle;
      }
    }
    return left;
  }
  /**
   * Returns the index of the right most entry that is equal to the target.
   *
   * \`\`\`text
   *              Right most
   *                   \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the right most entry that is equal to the target.
   */
  getRightMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) > 0) {
        right = middle;
      } else {
        left = middle + 1;
      }
    }
    return right - 1;
  }
  /**
   * Finds all items that are matching the predicate and groups adjacent items together.
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param predicate The predicate to match the values against.
   * @returns An array of chunks that match the predicate.
   */
  findItems(entries, position, predicate) {
    const result = [];
    let start = 0;
    for (let i = 0; i < entries.length; i++) {
      const entry = entries[i];
      const value = entry.values[position];
      const isMatching = predicate(value);
      if (isMatching) continue;
      if (start < i) {
        const slice = entries.slice(start, i);
        result.push(slice);
      }
      start = i + 1;
    }
    if (start < entries.length) {
      const slice = entries.slice(start);
      result.push(slice);
    }
    return result;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseItemModel.ts
var DatabaseItemModel = class _DatabaseItemModel {
  constructor() {
    __publicField(this, "fields", /* @__PURE__ */ new Map());
  }
  static read(reader) {
    const item = new _DatabaseItemModel();
    const fieldCount = reader.readUint16();
    for (let i = 0; i < fieldCount; i++) {
      const key = reader.readString();
      const value = DatabaseValueModel.read(reader);
      item.setField(key, value);
    }
    return item;
  }
  write(writer) {
    writer.writeUint16(this.fields.size);
    for (const [key, value] of this.fields) {
      writer.writeString(key);
      DatabaseValueModel.write(writer, value);
    }
  }
  getData() {
    const data = {};
    for (const [key, value] of this.fields) {
      data[key] = value;
    }
    return data;
  }
  setField(key, value) {
    this.fields.set(key, value);
  }
  getField(key) {
    return this.fields.get(key);
  }
};

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var DatabaseChunk = class {
  constructor(id, url) {
    this.id = id;
    this.url = url;
    __publicField(this, "itemsPromise");
    __publicField(this, "itemLoader", new import_dataloader.default(async (pointers) => {
      const ranges = pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        return { from: pointerModel.offset, to: pointerModel.offset + pointerModel.length };
      });
      const rangeBytes = await rangeRequest(this.url, ranges);
      return rangeBytes.map((bytes, index) => {
        const reader = new BufferReader(bytes);
        const itemModel = DatabaseItemModel.read(reader);
        const pointer = pointers[index];
        assert(pointer, "Missing pointer");
        return {
          pointer,
          data: itemModel.getData()
        };
      });
    }));
  }
  scanItems() {
    this.itemsPromise ??= fetchWithRetries(this.url).then(async (response) => {
      if (!response.ok) {
        throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
      }
      const buffer = await response.arrayBuffer();
      const bytes = new Uint8Array(buffer);
      const reader = new BufferReader(bytes);
      const items = [];
      const itemCount = reader.readUint32();
      for (let i = 0; i < itemCount; i++) {
        const offset = reader.getOffset();
        const itemModel = DatabaseItemModel.read(reader);
        const length = reader.getOffset() - offset;
        const pointerModel = new DatabaseItemPointerModel(this.id, offset, length);
        const pointer = pointerModel.toString();
        const item = {
          pointer,
          data: itemModel.getData()
        };
        this.itemLoader.prime(pointer, item);
        items.push(item);
      }
      return items;
    });
    return this.itemsPromise;
  }
  resolveItem(pointer) {
    return this.itemLoader.load(pointer);
  }
};
var DatabaseCollection = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "indexes");
    __publicField(this, "resolveRichText");
    __publicField(this, "resolveVectorSetItem");
    __publicField(this, "chunks");
    this.chunks = this.options.chunks.map((url, id) => {
      return new DatabaseChunk(id, url);
    });
    this.schema = options.schema;
    this.indexes = options.indexes;
    this.resolveRichText = options.resolveRichText;
    this.resolveVectorSetItem = options.resolveVectorSetItem;
  }
  async scanItems() {
    const chunkedItems = await Promise.all(
      this.chunks.map(async (chunk) => {
        return chunk.scanItems();
      })
    );
    return chunkedItems.flat();
  }
  async resolveItems(pointers) {
    return Promise.all(
      pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        const chunk = this.chunks[pointerModel.chunkId];
        assert(chunk, "Missing chunk");
        return chunk.resolveItem(pointer);
      })
    );
  }
  compareItems(left, right) {
    const leftModel = DatabaseItemPointerModel.fromString(left.pointer);
    const rightModel = DatabaseItemPointerModel.fromString(right.pointer);
    return leftModel.compare(rightModel);
  }
  compareValues(left, right, collation) {
    return DatabaseValueModel.compare(left, right, collation);
  }
};
export {
  DatabaseCollection,
  DatabaseDictionaryIndex
};
`;var pC=`var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
import { ControlType } from "framer";

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
var DraftDatabaseCollection = class {
  constructor(draftCollection, originalCollection, previousItemId, nextItemId) {
    this.draftCollection = draftCollection;
    this.originalCollection = originalCollection;
    this.previousItemId = previousItemId;
    this.nextItemId = nextItemId;
    __publicField(this, "schema");
    // We cannot use the original indexes because the draft items
    // are not in the original collection.
    // Having no indexes means that we perform a full collection scan for every query.
    __publicField(this, "indexes", []);
    __publicField(this, "itemsPromise");
    this.schema = originalCollection.schema;
    this.itemsPromise = this.getItems();
  }
  async getItems() {
    const [[...draftItems], [...originalItems]] = await Promise.all([
      this.draftCollection.scanItems(),
      this.originalCollection.scanItems()
    ]);
    const lastDraftItem = draftItems.pop();
    const firstOriginalItem = originalItems.shift();
    if (lastDraftItem) {
      draftItems.push({
        ...lastDraftItem,
        data: {
          ...lastDraftItem.data,
          [this.nextItemId]: firstOriginalItem?.data.id ?? null
        }
      });
    }
    if (firstOriginalItem) {
      originalItems.unshift({
        ...firstOriginalItem,
        data: {
          ...firstOriginalItem.data,
          [this.previousItemId]: lastDraftItem?.data.id ?? null
        }
      });
    }
    return draftItems.map(draftItem).concat(...originalItems);
  }
  /**
   * Get all items, updating pointers for draft items.
   */
  async scanItems() {
    return this.itemsPromise;
  }
  /**
   * Depending on the pointer, resolve draft rich text from the draft
   * collection, and original rich text from the original collection.
   */
  async resolveRichText(pointer) {
    if (isDraftRichTextPointer(pointer)) {
      const originalPointer = undraftRichTextPointer(pointer);
      return this.draftCollection.resolveRichText(originalPointer);
    }
    return this.originalCollection.resolveRichText(pointer);
  }
  async resolveVectorSetItem(pointer) {
    if (isDraftVectorSetItemPointer(pointer)) {
      const originalPointer = undraftVectorSetItemPointer(pointer);
      return this.draftCollection.resolveVectorSetItem?.(originalPointer);
    }
    return this.originalCollection.resolveVectorSetItem?.(pointer);
  }
  async resolveItems(pointers) {
    const items = await this.itemsPromise;
    return pointers.map((pointer) => {
      const item = items.find((current) => current.pointer === pointer);
      assert(item, "Item must exist");
      return item;
    });
  }
  /**
   * Compare two items, the draft items should come first.
   */
  compareItems(left, right) {
    const leftIsDraft = isDraftPointer(left.pointer);
    const rightIsDraft = isDraftPointer(right.pointer);
    if (leftIsDraft && rightIsDraft) {
      const originalLeft = undraftItem(left);
      const originalRight = undraftItem(right);
      return this.draftCollection.compareItems(originalLeft, originalRight);
    }
    if (leftIsDraft) return -1;
    if (rightIsDraft) return 1;
    return this.originalCollection.compareItems(left, right);
  }
};
var draftPrefix = "draft:";
function isDraftPointer(pointer) {
  return pointer.startsWith(draftPrefix);
}
function draftPointer(pointer) {
  assert(!isDraftPointer(pointer), "Should be a non-draft pointer");
  return draftPrefix + pointer;
}
function undraftPointer(pointer) {
  assert(isDraftPointer(pointer), "Should be a draft pointer");
  return pointer.slice(draftPrefix.length);
}
function isDraftRichTextPointer(pointer) {
  if (isNumber(pointer)) {
    return pointer < 0;
  }
  if (isString(pointer)) {
    return pointer.startsWith(draftPrefix);
  }
  throw new Error("Invalid rich text pointer");
}
function draftRichTextPointer(pointer) {
  assert(!isDraftRichTextPointer(pointer), "Should be a non-draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return draftPrefix + pointer;
  }
  throw new Error("Invalid rich text pointer");
}
function undraftRichTextPointer(pointer) {
  assert(isDraftRichTextPointer(pointer), "Should be a draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return pointer.slice(draftPrefix.length);
  }
  throw new Error("Invalid rich text pointer");
}
function isDraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  return pointer < 0;
}
function draftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(!isDraftVectorSetItemPointer(pointer), "Should be a non-draft vector set item pointer");
  return -pointer - 1;
}
function undraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(isDraftVectorSetItemPointer(pointer), "Should be a draft vector set item pointer");
  return -pointer - 1;
}
function draftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: draftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: draftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: draftPointer(item.pointer),
    data
  };
}
function undraftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: undraftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: undraftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: undraftPointer(item.pointer),
    data
  };
}
export {
  DraftDatabaseCollection
};
`;var Kn=class e{constructor(t,r,o){this.chunkId=t;this.offset=r;this.length=o}static fromString(t){let[r,o,n]=t.split("/").map(Number);return We(G(r),"Invalid chunkId"),We(G(o),"Invalid offset"),We(G(n),"Invalid length"),new e(r,o,n)}toString(){return`${this.chunkId}/${this.offset}/${this.length}`}static read(t){let r=t.readUint16(),o=t.readUint32(),n=t.readUint32();return new e(r,o,n)}write(t){t.writeUint16(this.chunkId),t.writeUint32(this.offset),t.writeUint32(this.length)}compare(t){return this.chunkId<t.chunkId?-1:this.chunkId>t.chunkId?1:this.offset<t.offset?-1:this.offset>t.offset?1:(We(this.length===t.length),0)}};function od(e){if(ot(e))return 0;switch(e.type){case"array":return 1;case"boolean":return 2;case"color":return 3;case"date":return 4;case"enum":return 5;case"file":return 6;case"responsiveimage":return 10;case"link":return 7;case"number":return 8;case"object":return 9;case"richtext":return 11;case"string":return 12;case"vectorsetitem":return 13;default:Mi(e)}}var Ut;(o=>{function e(n){let i=n.readUint8();switch(i){case 0:return null;case 1:return ow(n);case 2:return aw(n);case 3:return cw(n);case 4:return pw(n);case 5:return hw(n);case 6:return Sw(n);case 7:return bw(n);case 8:return Nw(n);case 9:return Rw(n);case 10:return Mw(n);case 11:return Fw(n);case 12:return Aw(n);case 13:return zw(n);default:Mi(i)}}o.read=e;function t(n,i){let a=od(i);if(n.writeUint8(a),!ot(i))switch(i.type){case"array":return nw(n,i);case"boolean":return sw(n,i);case"color":return dw(n,i);case"date":return mw(n,i);case"enum":return gw(n,i);case"file":return Cw(n,i);case"link":return Iw(n,i);case"number":return ww(n,i);case"object":return kw(n,i);case"responsiveimage":return Dw(n,i);case"richtext":return Lw(n,i);case"vectorsetitem":return $w(n,i);case"string":return Bw(n,i);default:Mi(i)}}o.write=t;function r(n,i,a){let s=od(n),l=od(i);if(s<l)return-1;if(s>l)return 1;if(ot(n)||ot(i))return 0;switch(n.type){case"array":return We(i.type==="array"),iw(n,i,a);case"boolean":return We(i.type==="boolean"),lw(n,i);case"color":return We(i.type==="color"),uw(n,i);case"date":return We(i.type==="date"),fw(n,i);case"enum":return We(i.type==="enum"),yw(n,i);case"file":return We(i.type==="file"),vw(n,i);case"link":return We(i.type==="link"),Tw(n,i);case"number":return We(i.type==="number"),xw(n,i);case"object":return We(i.type==="object"),Vw(n,i,a);case"responsiveimage":return We(i.type==="responsiveimage"),Pw(n,i);case"richtext":return We(i.type==="richtext"),Ew(n,i);case"vectorsetitem":return We(i.type==="vectorsetitem"),Ww(n,i);case"string":return We(i.type==="string"),Ow(n,i,a);default:Mi(n)}}o.compare=r})(Ut||={});function ow(e){let t=e.readUint16(),r=[];for(let o=0;o<t;o++){let n=Ut.read(e);r.push(n)}return{type:"array",value:r}}function nw(e,t){e.writeUint16(t.value.length);for(let r of t.value)Ut.write(e,r)}function iw(e,t,r){let o=e.value.length,n=t.value.length;if(o<n)return-1;if(o>n)return 1;for(let i=0;i<o;i++){let a=e.value[i],s=t.value[i],l=Ut.compare(a,s,r);if(l!==0)return l}return 0}function aw(e){return{type:"boolean",value:e.readUint8()!==0}}function sw(e,t){e.writeUint8(t.value?1:0)}function lw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function cw(e){return{type:"color",value:e.readString()}}function dw(e,t){e.writeString(t.value)}function uw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function pw(e){let t=e.readInt64(),r=new Date(t);return{type:"date",value:r.toISOString()}}function mw(e,t){let o=new Date(t.value).getTime();e.writeInt64(o)}function fw(e,t){let r=new Date(e.value),o=new Date(t.value);return r<o?-1:r>o?1:0}function hw(e){return{type:"enum",value:e.readString()}}function gw(e,t){e.writeString(t.value)}function yw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function Sw(e){return{type:"file",value:e.readString()}}function Cw(e,t){e.writeString(t.value)}function vw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function bw(e){return{type:"link",value:e.readJson()}}function Iw(e,t){e.writeJson(t.value)}function Tw(e,t){let r=JSON.stringify(e.value),o=JSON.stringify(t.value);return r<o?-1:r>o?1:0}function Nw(e){return{type:"number",value:e.readFloat64()}}function ww(e,t){e.writeFloat64(t.value)}function xw(e,t){return e.value<t.value?-1:e.value>t.value?1:0}function Rw(e){let t=e.readUint16(),r={};for(let o=0;o<t;o++){let n=e.readString();r[n]=Ut.read(e)}return{type:"object",value:r}}function kw(e,t){let r=Object.entries(t.value);e.writeUint16(r.length);for(let[o,n]of r)e.writeString(o),Ut.write(e,n)}function Vw(e,t,r){let o=Object.keys(e.value).sort(),n=Object.keys(t.value).sort();if(o.length<n.length)return-1;if(o.length>n.length)return 1;for(let i=0;i<o.length;i++){let a=o[i],s=n[i];if(a<s)return-1;if(a>s)return 1;let l=e.value[a]??null,c=t.value[s]??null,p=Ut.compare(l,c,r);if(p!==0)return p}return 0}function Mw(e){return{type:"responsiveimage",value:e.readJson()}}function Dw(e,t){e.writeJson(t.value)}function Pw(e,t){let r=JSON.stringify(e.value),o=JSON.stringify(t.value);return r<o?-1:r>o?1:0}function Fw(e){let t=e.readInt8();if(t===0)return{type:"richtext",value:e.readUint32()};if(t===1)return{type:"richtext",value:e.readString()};throw new Error("Invalid rich text pointer")}function Lw(e,t){if(G(t.value)){e.writeInt8(0),e.writeUint32(t.value);return}if(E(t.value)){e.writeInt8(1),e.writeString(t.value);return}throw new Error("Invalid rich text pointer")}function Ew(e,t){let r=e.value,o=t.value;if(G(r)&&G(o)||E(r)&&E(o))return r<o?-1:r>o?1:0;throw new Error("Invalid rich text pointer")}function Aw(e){return{type:"string",value:e.readString()}}function Bw(e,t){e.writeString(t.value)}function Ow(e,t,r){let o=e.value,n=t.value;return r.type===0&&(o=e.value.toLowerCase(),n=t.value.toLowerCase()),o<n?-1:o>n?1:0}function zw(e){return{type:"vectorsetitem",value:e.readUint32()}}function $w(e,t){e.writeUint32(t.value)}function Ww(e,t){let r=e.value,o=t.value;return r<o?-1:r>o?1:0}var Er=class e{constructor(t,r){this.fieldNames=t;this.options=r;T(this,"entries",[])}sortEntries(){this.entries.sort((t,r)=>{for(let o=0;o<this.fieldNames.length;o++){let n=t.values[o],i=r.values[o],a=Ut.compare(n,i,this.options.collation);if(a!==0)return a}return t.pointer.compare(r.pointer)})}static deserialize(t){let r=new js(t),o=r.readJson(),n=r.readUint8(),i=[];for(let l=0;l<n;l++){let c=r.readString();i.push(c)}let a=new e(i,{collation:o}),s=r.readUint32();for(let l=0;l<s;l++){let c=[];for(let m=0;m<n;m++){let d=Ut.read(r);c.push(d)}let p=Kn.read(r);a.entries.push({values:c,pointer:p})}return a}serialize(){let t=new Yo;t.writeJson(this.options.collation),t.writeUint8(this.fieldNames.length);for(let r of this.fieldNames)t.writeString(r);this.sortEntries(),t.writeUint32(this.entries.length);for(let r of this.entries){let{values:o,pointer:n}=r;for(let i of o)Ut.write(t,i);n.write(t)}return t.subarray()}addItem(t,r){let o=this.fieldNames.map(n=>t.getField(n)??null);this.entries.push({values:o,pointer:r})}};var Js=class e{constructor(){T(this,"fields",new Map)}static read(t){let r=new e,o=t.readUint16();for(let n=0;n<o;n++){let i=t.readString(),a=Ut.read(t);r.setField(i,a)}return r}write(t){t.writeUint16(this.fields.size);for(let[r,o]of this.fields)t.writeString(r),Ut.write(t,o)}getData(){let t={};for(let[r,o]of this.fields)t[r]=o;return t}setField(t,r){this.fields.set(t,r)}getField(t){return this.fields.get(t)}};function nd(e){return u`${e}.replace("/modules/", "/cms/")`}var Gw=ge("serializeDatabase"),id=4*1024*1024,Uw=5e3;async function mC(e,t,r,o,n,i,a,s,l,c,p,m){let d=_e.isOn("cmsRichTextJson")?new Us(e,t,i,o,l,c,a,s):void 0,f=e.getPropertyControls(t.tree),h=Object.entries(f),g=Zm(t.tree,{includeDrafts:!0}),S={[Qr]:{type:Ri("string",i),isNullable:!1},[Wo]:{type:Ri("string",i),isNullable:!0},[Ho]:{type:Ri("string",i),isNullable:!0}};function C(Z){return Ri(Z,i)}for(let[Z,ie]of h){let Ie=Dy(ie,C);Ie&&(S[Z]=Ie)}let N=c.dedupe("schema",new A(S,0)),b=ky(e.variables),w=_e.isOff("cmsRichTextJson")?e.variables.filter(im).map(Z=>Z.id).slice(0,25):[],M=e.variables.find(am),L=o.create(uC),F,H,z=m?!0:void 0,J=e.getSortedChildren().filter(Z=>Z.isDraft===z);if(m){let Z=Ae("collection",e.id);if(F=u`${i.addImport(`../${Z}`,{exportSpecifier:"default",importBinding:"originalCollection"})}.collectionByLocaleId`,J.length===0){let Ie={displayName:e.name??"Unknown",collectionByLocaleId:F};return u`${Ie}`}let ie=o.create(pC);H=i.addImport(ie.submoduleImport,{exportSpecifier:"DraftDatabaseCollection"})}let me=i.addImport(L.submoduleImport,{exportSpecifier:"DatabaseCollection"}),fe={};for(let Z of g){let ne=function(){let ae=new Yo;return ae.writeUint32(0),ae},ve=function(ae){let ue=He.subarray(0,ae);qn(ue).setUint32(0,Ee),Ke.push(ue)};var le=ne,R=ve;let ie=[new Er([Qr,...w],{collation:{type:1}}),new Er([Wo,...w],{collation:{type:1}}),new Er([Ho,...w],{collation:{type:1}})];M&&ie.push(new Er([Qr,M.id],{collation:{type:1}}),new Er([M.id,Qr],{collation:{type:1}}));for(let[ae]of h)ie.push(new Er([ae,...w],{collation:{type:0}}));let Ie=new Gs,ct=new _s,K=J.filter(ae=>{let ue=uy(t.tree,ae);return ue?ue.includes(Z.id):!0}),O=[];for(let ae=0;ae<K.length;ae++){let ue=K[ae];y(ue,"Node must exist");let dt=new Js;dt.setField(Qr,{type:"string",value:ue.id});let Gr=K[ae-1];Gr&&dt.setField(Wo,{type:"string",value:Gr.id});let Cr=K[ae+1];Cr&&dt.setField(Ho,{type:"string",value:Cr.id});let di={resolveColor(lt){return p.addColor(lt)},resolveFile(lt){return a.resolve(lt)?.src},resolveImage(lt,ut){return a.resolveResponsiveImage(lt,void 0,ut)},resolveLink(lt){let ut=s.create(lt);if(!k(ut)&&!xt(ut))return ut},resolveRichTextPointer(lt){return d?d.add(lt):Ie.add(lt)},resolveVectorSetItemPointer(lt){return ct.add(lt)}};for(let[lt,ut]of h){let vr=Vy(lt,ut,b,f,ue);if(k(vr))continue;let br=My({control:ut,controlProp:vr,resolvers:di,locale:Z});k(br)||dt.setField(lt,br)}O.push(dt)}let Ke=[],Ee=0,He=ne();for(let ae of O){let ue=He.getOffset();ae.write(He),He.getOffset()>id&&(ve(ue),He=ne(),ue=He.getOffset(),Ee=0,ae.write(He)),Ee++;let dt=He.getOffset()-ue,Gr=new Kn(Ke.length,ue,dt);for(let Cr of ie)Cr.addItem(ae,Gr)}He.getOffset()>0&&ve();let Jt=i.addImport(L.submoduleImport,{exportSpecifier:"DatabaseDictionaryIndex"}),tr=Ke.map((ae,ue)=>nd(n.create(`chunk-${Z.id}-${ue}`,Zc,ae)));Ke.reduce((ae,ue)=>ae+ue.length,0)<Uw&&(ie.length=0);let cr=[],gt=1/0;for(let ae of ie){let ue=ae.serialize();if(ue.length>=id){Gw.warn("Skipping index:",ue.length);continue}gt+ue.length>id&&(cr.push([]),gt=0);let dt=cr.at(-1);y(dt,"Chunk must exist"),dt.push({model:ae,bytes:ue}),gt+=ue.length}let st=[];for(let ae=0;ae<cr.length;ae++){let ue=cr[ae];y(ue,"Chunk must exist");let dt=new Yo,Gr=[];for(let{bytes:ut}of ue){let vr=dt.getOffset();dt.writeBytes(ut);let br=dt.getOffset();Gr.push({from:vr,to:br})}let Cr=dt.subarray(),di=nd(n.create(`indexes-${Z.id}-${ae}`,Zc,Cr)),lt=ue.map(({model:ut},vr)=>{if(ut instanceof Er){let br=Gr[vr];y(br,"Can't find range for index");let ec={url:di,range:br,fieldNames:c.dedupe("fieldNames",ut.fieldNames),collation:c.dedupe("collation",ut.options.collation),collectionSchema:N};return u`new ${Jt}(${ec})`}throw new Error("Unsupported index type")});st.push(...lt)}let co=d?d.resolveRichTextBinding:Ie.serialize(e,t,r,o,i,a,Z),fa=ct.serialize(r,c),Hr={schema:N,chunks:tr,indexes:st,resolveRichText:co,resolveVectorSetItem:fa};if(F&&H){let ae=u`new ${me}(${Hr})`,ue=u`${F}[${Z.id}]`;fe[Z.id]=u`new ${H}(${ae}, ${ue}, ${Wo}, ${Ho})`}else fe[Z.id]=u`new ${me}(${Hr})`}d?.serialize();let de={displayName:e.name??"Unknown",collectionByLocaleId:fe};return u`${de}`}var hC=kt(async(e,t,r)=>Promise.all([fC(e.id,t,!1),fC(e.id,t,!0)]));async function fC(e,t,r){let{modulesStore:o,treeStore:n,assetMap:i}=t,{tree:a}=n,s=r?"draftCollection":"collection",l=new ko(i),c=new Hs(e),p=new Yg(s,o,e),m=a.getNodeWithTrait(e,nt);y(m,"Must have a source node to serialize");let d=m.moduleSourceRevision,f=Xg(m);await Ls(f,o);let{module:h}=_g(o,m);Gt("collection_update",{moduleId:h?.id,recordCount:m.getItemCount(),source:"unknown"});let g=Jg(m)?.id,S=new Kr,C=new To(s,o,S),N=new ss(S),b=new No(m,C,S,void 0,n,o),w=new En,M=await mC(m,n,o,p,c,C,l,b,S,N,w,r),L=xo("",{framerRecordIdKey:Qr,framerSlug:g,framerEnumToDisplayNameUtils:"2",framerCollectionUtils:"1",framerCollectionId:m.id,framerColorSyntax:w.hasColorsOfType("wideGamut"),framerAutoSizeImages:!0,framerData:""}),F=S.create("data"),H=qw(m,F,t,{imports:C},s),z=jw(C,N,F,Qr,g),J=u.joinLines(...C.statements,...N.list(),L,u`const ${F} = ${M}`,u`export default ${F}`,H,..._w(m.variables,a.root.locales),z);return{type:s,revision:d,source:J,artifacts:{assets:new Set(l.keys),binaryAssets:c.assets,submodules:p.serialize(),metrics:{nodes:m.getItemCount()}}}}function _w(e,t){let r=[],o=new A;for(let n of e){if(n.type!=="enum")continue;let i=new v(Qg(n.id));r.push(u`export const ${i} = ${sC(n,t,i)};`),o[n.id]=i}return r.push(u`export const ${new v(Zg)} = ${o};`),r}function jw(e,t,r,o,n){return u.joinLines(u`export const utils = {`,u`async getSlugByRecordId(id, locale) {`,n?Jw(e,t,r,o,n):void 0,u`},`,u`async getRecordIdBySlug(slug, locale) {`,n?Xw(e,t,r,o,n):void 0,u`},`,u`}`)}function gC(e,t){let r=e.addImport("framer",{exportSpecifier:"QueryEngine"}),o=t.dedupe("queryEngine",u`new ${r}()`),n=e.addImport("framer",{exportSpecifier:"QueryCache"});return t.dedupe("queryCache",u`new ${n}(${o})`)}function Jw(e,t,r,o,n){let i=gC(e,t),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:n}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:o},right:{type:"LiteralValue",value:u`id`}},limit:{type:"LiteralValue",value:1}};return u.joinLines(u`const [item] = await ${i}.get(${a}, locale).readAsync()`,u`return item?.[${n}]`)}function Xw(e,t,r,o,n){let i=gC(e,t),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:o}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:n},right:{type:"LiteralValue",value:u`slug`}},limit:{type:"LiteralValue",value:1}};return u.joinLines(u`const [item] = await ${i}.get(${a}, locale).readAsync()`,u`return item?.[${o}]`)}function qw(e,t,r,o,n){let i=Ry(e,r,o,n);if(k(i))return;let a=o.imports.addImport("framer",{exportSpecifier:"addPropertyControls"});return v.fn(a,t,i)}var Vo=class{constructor(t){this.declarationCollector=t;T(this,"fontObjects",new Set);T(this,"fontReferences",new Map);T(this,"referencedComponentIdentifiers",new Set);T(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(t){return t.variationAxes?this.declarationCollector.dedupe("variationAxes",[...t.variationAxes]):void 0}addFontObjectBySelector(t,r){let o=this.fontObjectsBySelector.get(t);if(o){if(!r)return;let i=o[0];if(!i)return;if(Da(i.source,r)&&!i.openType)for(let a of o)a.openType=!0;return}let n=Ao.getFontBySelector(t);if(!(!n||!n.file))if(n.subsets){let i=[];this.fontObjectsBySelector.set(t,i);for(let a of n.subsets){let s={url:a.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Da(n.family.source,r)};this.fontObjects.add(s),i.push(s)}}else{let i={url:n.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Da(n.family.source,r)};this.fontObjects.add(i),this.fontObjectsBySelector.set(t,[i])}}addFontReference({componentIdentifier:t,fontReference:r}){this.fontReferences.set(Y(r),r),this.referencedComponentIdentifiers.add(t)}};function Yn(e,t,r,{pixelSize:o,repeaterInfo:n,context:i}){return rs(t,r,{resolveAsset:(a,s,l,c)=>{let p,m=hn(s)?s.__defaultAssetReference:void 0;return a!==m&&(p=(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src),!Wa(l)||!i.localizedValues?p:i.localizedValues.add(p,l.valueLocalized,d=>{let f=l.valueLocalized?.[d]?.value;return Ca(f)?void 0:f===m?u`undefined`:(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src})},resolveResponsiveImage:(a,s,l)=>{let c,p,m,d;if(ba(s)&&va(s.__vekterDefault)?(p=s.__vekterDefault.assetReference,m=s.__vekterDefault.positionX,d=s.__vekterDefault.positionY):hn(s)&&(p=s.__defaultAssetReference),(a!==p||l.positionX!==m||l.positionY!==d)&&(c=v.fromValue(i.assets.resolveResponsiveImage(a,o,l))),i.localizedValues&&(c=i.localizedValues.add(c,l.valueLocalized,h=>{let g=l.valueLocalized?.[h];if(!$a(g))return;if(g.value===p&&g.imageFocalPoint?.positionX===m&&g.imageFocalPoint?.positionY===d)return u`undefined`;let S=i.assets.resolveResponsiveImage(g.value,o,g.imageFocalPoint);return v.fromValue(S)})),!c)return;if(!i.valueTransforms)return c;let f=l.alt??ts;return i.localizedValues&&(f=i.localizedValues.add(f,l.altLocalized,h=>l.altLocalized?.[h]?.value)),i.valueTransforms.wrapInAddImageAlt(c,v.fromValue(f))},resolveDynamicValue:(a,s)=>{let l;if(pe(a))y(i.variables,"Variables are not supported"),l=i.variables.create(a);else if(Pt(a)){if(!i.valueTransforms)return;y(e.cache,"Node cache must be passed in when computed values can be created"),l=i.valueTransforms.createComputedValue(a,e,s)}else{return}if(!i.valueTransforms)return l;switch(s.type){case"image":return i.valueTransforms.wrapInToImageSrc(l);case"responsiveimage":return i.valueTransforms.wrapInToResponsiveImage(l);case"gap":case"padding":case"borderradius":return i.valueTransforms.wrapInNumberToPixelString(l);default:return l}},resolveLink:(a,s,l)=>{let c=$o(s.value);if(Jr(c)&&i.localizedValues){let p=s.valueLocalized;return i.localizedValues.add(c.url,p,m=>p?.[m]?.value)}if(Pt(c)){if(!i.valueTransforms)return;y(e.cache,"Node cache must be passed in when computed values can be created");let p=i.valueTransforms.createComputedValue(c,e,l);return i.links.createResolvedBinding(e,p)}return i.links.resolve(e,c,n)},resolvePageScope:a=>i.links.resolvePageScope($o(a)),resolveLocalizedValue:(a,s)=>i.localizedValues?i.localizedValues.add(a,s,l=>s?.[l]?.value):a,compileRichText:(a,s)=>{let l=yr(a,{collectors:i,nodeId:e.originalid??e.id});return i.localizedValues?i.localizedValues.add(l,s,(c,p)=>{if(!s)return;let m=s[c];if(!m)return;let d=m.value;if(E(d))return yr(d,{collectors:{...i,...p},nodeId:e.originalid??e.id})}):l},resolveFont:a=>{if(!Ga(a))return{};let s=Sn(e);return i.fonts.addFontObjectBySelector(a.fontSelector,s),Ua(a)},resolveScrollSectionRef:(a,s)=>{if(!k(s)){if(pe(s))return i.variables?.create(s);if(E(s.target)){let l=i.elementIds?.scrollTargetInfo(s);if(l?.ref)return l.ref}}},resolveCustomCursor:(a,s)=>{if(!k(s))return pe(s)?i.variables?.create(s):i.customCursors?.addControl(a,e,s)},resolveVectorSetItem:(a,s)=>{if(!k(a))return i.vectorSets?.resolveControl(a,s,e)},resolveColor:a=>E(a)?i.cssVariableDefinitions?.resolveColor(a)??a:a})}function qs({componentName:e,fontObjects:t,fontReferences:r,imports:o,declarations:n,sharedFontArrays:i=[]}){return u.joinLines(...n.list(),v.fn(o.addImport("framer",{exportSpecifier:"addFonts"}),e,Di({fontObjects:t,fontReferences:r,sharedFontArrays:i}),{supportsExplicitInterCodegen:!0}))}function Di({fontObjects:e,fontReferences:t,sharedFontArrays:r=[]}){let o=[],n={explicitInter:!0,fonts:[]};for(let i of e){try{new URL(i.url)}catch{throw new Error(`Expected URL for font "${i.family}" to be a valid, absolute URL, but got: ${i.url}`)}n.fonts.push(i)}o.push(n);for(let i of t.values())o.push(u`...${i}`);for(let i of r)o.push(u`...${i}`);return o}var SC=kt(async(e,{assetMap:t,treeStore:r,modulesStore:o})=>{let n=new Kr,i=new ko(t),a=new To("componentPresets",o,n),s=new No(e,a,n,void 0,r,o),l=new ss(n),c=new as(e),p=new Ps(e,r,c,l,n,a,i),m=new Ds(n,c,p,i,s),d=e.moduleSourceRevision,f={},h={},g=e.getComponentPresets();await Ls(g.map(N=>N.componentIdentifier),o);let S=new Kr,C=new ls(S);for(let N of g){let b=P.reactComponentForIdentifier(N.componentIdentifier);y(b,"Can't find react component for preset");let w=N.getFontsForCodeGeneration(P);await Ao.loadFonts(w);let M=new Vo(C),L=hm(Ih(b,"onlyPresets"),N.getRawControlProps()),F=Yn(N,b.properties,L,{pixelSize:void 0,repeaterInfo:void 0,context:{assets:i,imports:a,links:s,fonts:M,fetches:m}});f[N.id]=new A(F),(M.fontObjects.size>0||M.fontReferences.size>0)&&(h[N.id]=Di({fontObjects:M.fontObjects,fontReferences:M.fontReferences}))}return[{revision:d,type:"componentPresets",source:u.joinLines(...a.statements,u`export const props = ${f}`,...C.list(),u`export const fonts = ${h}`),artifacts:{assets:i.keys,metrics:{nodes:Object.keys(f).length}}}]});var Kw=ge("CodeGenerationStore");function CC(e,t,r){return r.add(e),t[e]?.forEach(o=>{r.has(o)||CC(o,t,r)}),r}function Yw(e,t){let r={};for(let{fromNode:o,toNode:n}of t){let i=r[o]??new Set;i.add(n),r[o]=i}return CC(e,r,new Set([e]))}var vC=kt(async(e,{treeStore:t,modulesStore:r})=>{let o=Y(`Prototype/${e.name||"Generated Prototype"}`),n=t.tree.get(e.homeNodeId);y(n,"Can't serialize",o,": home node must exist.");let i=t.tree.getRect(n),a=new To("prototype",r);a.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),a.addImport("framer",{exportSpecifier:"PageRoot"}),a.addImport("framer",{exportSpecifier:"useInitialRouteComponent"});let s={};for(let d of Yw(n.id,t.treeIndex.getPrototypeScreenLinks(t.tree,e.id))){let h=`../${Ae("screen",d)}`;try{await Hn(P,[pt("screen",d,"default").value],r);let g=a.addImport(h,{exportSpecifier:"default",importBinding:"Screen",lazy:d!==e.homeNodeId});s[d]={page:g,path:d}}catch{Kw.error("Missing module for prototype screen",{screenId:d})}}let l=Y(e.homeNodeId),c=Y(s),p=u`${a.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,m=new v(te.sections(te.linesFrom(a.statements),`const routes = ${c}`,te.lines("function Prototype({ layoutId }: { layoutId?: string }): JSX.Element {",`  const InitialRouteComponent = useInitialRouteComponent(routes, "${e.homeNodeId}")`,`  const defaultLayoutId = ${v.fn(p)};`,"  if (!InitialRouteComponent) return null","  return (","    <LayoutGroup id={layoutId ?? defaultLayoutId} inherit={false}>",`      <PageRoot RootComponent={InitialRouteComponent} isWebsite={false} routeId={${l}} routes={routes} />`,"    </LayoutGroup>","  )","}"),te.lines(xo("This is a generated Framer component.",{framerIntrinsicHeight:i?.height,framerIntrinsicWidth:i?.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerPrototype:""}),"const Component: React.ComponentType<{}> = React.memo(Prototype)","export default Component;"),`Component.displayName = ${o};`));return[{type:"prototype",source:m,revision:void 0}]});var SO={url:"url"};function bC(e){return Wp(e)&&e.actionIdentifier==="framer/useOpenURL"}function CO(e,t){let r={...e.controls,...t};return{...e,controls:r}}var Qw=ge("EventCollector"),sd=Symbol("previous"),xC=u`pathVariables`,IC=u`navigate`,TC=u`setVariant`,Ks=u`overlay`,ad=u`loadMore`,NC={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},Zs={visible:"visible",show:"show",hide:"hide",toggle:"toggle"};function Ys(e,t){return new v(`${e}.${t}`)}var Qs=class{constructor(t,r,o,n,i,a={type:"canvasComponent"}){this.sourceNode=t;this.variables=r;this.treeStore=o;this.bindings=n;this.imports=i;this.options=a;T(this,"handlers",new Map);T(this,"variantOnAppearId",new Map);T(this,"keyBindHooks",new Set);T(this,"navigationTargets",new Set);T(this,"needsPathVariables",!1);T(this,"routeHandlers",new Map);T(this,"overlayState",new Map);T(this,"overlayTriggerOverlayBindings",new Map);T(this,"relativeOverlayPrimaryTriggers",new Set)}addHandler({trigger:t,node:r,actionInfo:o}){o?.forEach(c=>{!xc(c)||!c.controls.id?.value||this.variables.create(Hu(c.controls.id.value,void 0))});let n=t===Bp&&qr(r),i=t===Ap&&qr(r),a=mp(this.treeStore.tree,r.id)??this.sourceNode,s=!o||o.length===0;if(n&&s){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,u`undefined`);return}if(s)return;let l=i?this.createKeydownEvents(r,o,this.imports):this.createCombinedEvents(r,o,t);if(n){l&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,l);return}if(!(i||!l))return l}eventHandlersForNode(t){if(!os(t)||So(t))return;let r=t.getActions(P),o={};for(let n in r)o[n]=this.addHandler({node:t,trigger:n,actionInfo:r[n]});return this.options.type!=="canvasComponent"||!Lt(t),o}getOverlayIdForNode(t){return fi(t)?this.treeStore.tree.get(t.cache.overlayAncestorId)?.originalid:t.cache.overlayAncestorId}transformAction(t,r,o){return n=>{if(!yc(t)||k(r.meta?.inputValue))return n;let i=u`inputValue`;switch(o.bindings.add(u`const ${i} = args[0]?.target?.value?.trim()`),r.meta.inputValue){case"empty":return u`if (!${i}) { ${n} }`;case"set":return u`if (${i}?.length > 0 ) { ${n} }`;default:$(r.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(t){let r=ff(t);return r?fi(t)?r.originalid:r.id:null}createCombinedEvents(t,r,o){let n=wC(),i=this.getOverlayIdForNode(t);o in NC&&this.options.type==="canvasComponent"&&Lt(t)&&n.gestureHandlers.add(v.fn(x.setGestureState,NC[o]));for(let l of r){if(this.extractActionsToGroups(t,l,n,o,this.transformAction(o,l,n)),n.navigationActions.size>0)break;Sc(l)&&!Nn(t)&&(i||(i=l.controls.overlay.value))}if(RC.every(l=>n[l].size===0))return u`undefined`;let a=this.createEventFromGroups(o,n),s=this.getRepeaterIdForNode(t);if(n.overlayActions.size>0&&i||n.repeaterActions.size>0&&s){let l=i?this.overlayState.get(i):void 0,c=this.treeStore.tree.get(s),m=jr(c)&&hr(c)?this.bindings.createWithNode("loadMore",c):void 0;if(l||m)return v.fn(a,{[Ks.toString()]:l,[ad.toString()]:m})}return a}createEventFromGroups(t,r){let o=Zw(r),n=`${t}${Te(Y(o))}`,i=new v(n),a=u`const ${i} = ${o}`;return this.handlers.set(n,a),i}createKeydownEvents(t,r,o){y(this.options.type==="screen","Smart Components do not support keydown events");for(let n of r){let i=n.meta?.key;if(k(i))continue;let a=wC();if(this.extractActionsToGroups(t,n,a,"onKeyDown",this.transformAction("onKeyDown",n,a)),Object.keys(a).every(l=>a[l].size===0))continue;let s=this.createEventFromGroups("onKeyDown",a);if(y(o,"An Import collector must be provided to add gamepad or hotkey bindings."),Hp(i))this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useGamepad"}),i.key,s,{mapping:i.mapping}));else{let l=i.key,c=ex(i),p=c.length?c.concat(l).join("+"):l;this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useHotkey"}),p,s))}}}extractActionsToGroups(t,r,o,n,i){if(Ag(r)){if(this.options.type!=="canvasComponent"||!yc(n)&&o.setVariantActions.size>0)return;let a=rx(this.imports,r,n);a&&o.setVariantActions.add(i(a))}else if(xc(r)){if(this.options.type!=="canvasComponent")return;let a=ox(r);a&&o.eventActions.add(i(a))}else if(lf(r)){if(this.options.type!=="screen"||o.navigationActions.size>0)return;let a=this.createNavigateAction(r.controls.type.value,r.controls.target.value,r.meta?.delay,r.controls);a&&o.navigationActions.add(i(a))}else if(r.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let a=ix(r);a&&o.otherActions.add(i(a))}else if(r.actionIdentifier==="framer/useSetLocale"){let a=r.controls.localeId?.value;if(!E(a))return;o.otherActions.add(i(v.fn(x.setLocale,a)))}else if(bC(r)){let a=$o(r.controls.url.value);if(k(a)||D(a))return;if(La(a)){let s=this.createOpenPageAction(a.webPageId,a.hash,r.meta?.delay);s&&o.navigationActions.add(i(s))}else{let s=nx(r,a);s&&o.otherActions.add(i(s))}}else if(!Nn(t)&&Sc(r)){if(r.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let a=r.controls.overlay.value,s=this.createOverlayTriggers(a,t.id);s&&o.overlayActions.add(i(s))}else if(Gp(r)){if(!Nn(t))return;let a=this.getOverlayIdForNode(t);if(y(a,"overlayAncestorId must not be null when nodeIsInOverlay is true"),!this.overlayState.has(a))return;o.overlayActions.add(i(this.createDismissOverlayAction(r.meta?.delay)))}else if(hf(r)){let a=this.getRepeaterIdForNode(t),s=this.treeStore.tree.get(a);if(!jr(s))return;o.repeaterActions.add(v.fn(ad))}}createDismissOverlayAction(t){return Zr(v.fn(Ys(Ks,"hide")),t)}createOpenPageAction(t,r,o){if(!this.getNavigationTarget(t))return;let i=`${Te(t)}${r?Te(r):""}`,a=new v(`openRoute${i}`),s=[t,u`true`];r&&s.push(r),this.routeHandlers.set(i,u`const ${a} = ${v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...s)}`);let l=v.fn(a);return u`return ${Zr(l,o)}`}createNavigateAction(t,r,o,n){if(t==="previous")return this.navigationTargets.add(sd),u`return ${Zr(v.fn(IC,"previous"),o)}`;if(!r||!this.isValidNavigationTarget(r))return;let i={};for(let a in n){if(a==="target")continue;let s=n[a];i[a]=s.value}return this.navigationTargets.add(r),u`return ${Zr(v.fn(IC,r,i),o)}`}getNavigationTarget(t){if(!t)return null;let r=this.treeStore.tree.getNode(t);return!r||!(this.treeStore.tree.isGroundNode(r)||W(r))?null:r}isValidNavigationTarget(t){return!!this.getNavigationTarget(t)}createOverlayTriggers(t,r){let o=this.treeStore.tree.get(t);if(!o)return;let n=this.treeStore.tree.get(r);if(!n)return;let i=this.treeStore.tree.get(n.originalid??n.id);if(!i)return;if(!n?.children?.find(c=>(c.originalid??c.id)===t&&wt(c))){Qw.reportError("EventCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:r,overlayId:t});return}let s=this.overlayState.get(t)??this.bindings.create("overlay");this.overlayState.set(t,s);let l=this.overlayTriggerOverlayBindings.get(i.id)??new Map;return l.set(o.originalid??o.id,s),this.overlayTriggerOverlayBindings.set(i.id,l),Et(o)&&this.relativeOverlayPrimaryTriggers.add(i.id),v.fn(Ys(Ks,Et(o)?"show":"toggle"))}};function wC(){return{bindings:new v.Set,gestureHandlers:new v.Set,eventActions:new v.Set,setVariantActions:new v.Set,navigationActions:new v.Set,otherActions:new v.Set,overlayActions:new v.Set,repeaterActions:new v.Set}}var RC=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function Zw(e){let t=[];for(let o of RC)for(let n of e[o])t.push(n);let r=u.joinLines(u`activeVariantCallback(async (...args) => {`,...t,u`})`);return e.overlayActions.size>0||e.repeaterActions.size>0?u`({${Ks}, ${ad}}) => ${r}`:r}function ex(e){let t=[];for(let r in e)if(e[r])switch(r){case"altKey":t.push("alt");break;case"ctrlKey":t.push("ctrl");break;case"metaKey":t.push("meta");break;case"shiftKey":t.push("shift");break;default:break}return t}function tx(e,t,r,o){if(t==="cycle")return v.fn(TC,e.addImport("framer",{exportSpecifier:"CycleVariantState"}),o);if(r)return v.fn(TC,r,o)}function rx(e,t,r){let o=t.controls.type?.value,n=t.controls.variantId?.value,i=t.controls.pauseOffscreen?.value;if(!Eg(o))return;let a=tx(e,o,n,r==="onAppear"?i:void 0);if(a)return Zr(a,t.meta?.delay)}function ox(e){let t=e.controls.id?.value;if(!E(t))return;let r=new v(t);return u.joinLines(u`if (${r}) {${u.joinLines(e.meta?.delay&&u`await delay(() => {}, ${e.meta?.delay*1e3});`,u`const res = await ${r}(...args);`,u`if (res === false) return false;`)}}`)}function nx(e,t){if(!Jr(t))return;let{href:r,target:o=u`undefined`,rel:n}=Qu(t.url);if(!r)return;let i=[r,o??u`undefined`,n??"noopener"];return Zr(v.fn(u`window.open`,...i),e.meta?.delay)}function ix(e){let t=e.controls?.type?.value,r=e.controls?.message?.value;if(E(t))switch(t){case"event":return new v(te.lines('if (args[0] && "persist" in args[0]) args[0].persist()',Zr(u`console.log(...args)`,e.meta?.delay)));case"message":return E(r)?Zr(u`console.log(${r})`,e.meta?.delay):void 0;case"count":return E(r)?Zr(u`console.count(${r})`,e.meta?.delay):void 0}}function Zr(e,t){return!k(t)&&t>0?u`await delay(() => ${e}, ${t*1e3})`:e}function el(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function Sr(e){return U(e)&&!el(e)&&!e.isVectorInstance}function kC(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function VC(e){switch(e.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var sx=e=>[`.${e}[data-border="true"]::after, .${e} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; pointer-events: none; }`],lx=e=>[`.${e}[data-selection="true"] * ::selection, .${e} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],cx=e=>[`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${e}[data-hide-scrollbars="true"], .${e} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],Fi="data-layout-template",dx={0:sx,1:cx,2:lx},Qn,tl=class{constructor(t,r,o,n){this.entryNode=t;this.sourceNode=r;this.serializationId=o;this.cssVariableDefinitions=n;T(this,"sharedStyleIds",new Set);T(this,"rules",{});_(this,Qn,new Set);T(this,"selectorsByNodeId",new Map)}get(t=this.sourceNode.id){return t===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[t]??new Map}}createScopingSelector(t,r){if(t){let o=`.${this.serializationId}.${gp}v-${Te(t)}`;return r?`${o}.${r}`:o}return`.${this.serializationId}`}createSelector(t,r,o,n,i=t===this.sourceNode.id){let a=this.createScopingSelector(o,n);return t===this.entryNode.id?`${a}.${r}, ${a} .${r}`:i?`${a}.${r}`:`${a} .${r}`}addRule(t,r,o={}){let{scope:n,gesture:i,container:a,ruleType:s=0,hasScopingSelector:l}=o,c=r.originalid??r.id,p=yp(s,c);a&&(p+="-container");let m=this.createSelector(c,p,n,i,l);this.selectorsByNodeId.set(c,m);let d=o.variant?.id??this.sourceNode.id;if(this.createRule(m,Vn(t),d),px(t)){let f=fx(r,this.serializationId);for(let h in f)this.createRule(h,Vn(f[h]),d)}return p}addConditionalRule(t){I(this,Qn).add(t)}hasConditionalRule(t){return I(this,Qn).has(t)}conditionalRules(t){let r=[];return I(this,Qn).forEach(o=>{let n=dx[o],i=n(t);r.push(...i)}),r}addSharedStyle(t){this.sharedStyleIds.add(t)}createRule(t,r,o=this.sourceNode.id){let n=this.rules[o];if(n){n.set(t,r);return}this.rules[o]=new Map([[t,r]])}getWideGamutColorRule(){let t=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);t.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",t.join(" "))}};Qn=new WeakMap;var ux="viewTransitionName";function px(e){return ux in e&&mx(e)}var MC="-exclude";function mx(e){return Tu(e.viewTransitionName)&&e.viewTransitionName.endsWith(MC)}function ld(e,t,r){let o=Te(e.originalid??e.id);return r?`${t}-${o}${MC}`:o}function fx(e,t){let r=ld(e,t,!0);return{[`::view-transition-group(${r})`]:{animation:"none !important"},[`::view-transition-new(${r})`]:{animation:"none !important"},[`::view-transition-old(${r})`]:{animation:"none !important"}}}function DC(e,t,r){return!!(Fe(e)||Fe(t)||e.id===r.rootId)}var rl=class{constructor(t,r){this.repeaterNode=t;this.parent=r;T(this,"subqueries",new Map);T(this,"variableDependencies",new Map);T(this,"childRepeaterIds",new Set)}addSubquery(t,r,o){let n=this.getSubqueries(t);n.set(r,o),this.subqueries.set(t,n),this.childRepeaterIds.add(r)}getSubqueries(t){return this.subqueries.get(t)??new Map}addVariableDependencies(t,r){let o=this.getVariableDependencies(t);o.push(...r),this.variableDependencies.set(t,o)}getVariableDependencies(t){return this.variableDependencies.get(t)??[]}};function cd(e,t){return!Ni(e)||k(e.visible)?!0:D(e.visible)?t.createDeduplicatedDynamicValueBinding(e.visible,e,"visible"):e.isVisible()}function dd(e,t,r,o){if(r.inComponentSlot||o||xe(e)||fr(e)||Et(e)||qr(e)&&Op.some(i=>(e[i]?.length??0)>0)||Be(e)&&!it(e))return!0;switch(t.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(Lt(e)||is(e))return!0;if(Xa(e)){let i=e.rotation;if(D(i)||G(i)&&i!==0)return!0}return fs(e);case"VectorSet":return!1;default:Dt(t.scopeType)}}function Nt(e,t){if(Number.isNaN(e)&&Number.isNaN(t)||e===t)return!0;if(ot(e)||ot(t)||E(e)||E(t)||k(e)||k(t)||G(e)||G(t)||ur(e)||ur(t)||sc(e)||sc(t))return!1;if(xt(e)||xt(t))return xt(e)&&xt(t)?Y(e)===Y(t):!1;if(rr(e)||rr(t)){if(rr(e)&&rr(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Nt(e[r],t[r]))return!1;return!0}return!1}if(rt(e)||rt(t)){if(rt(e)&&rt(t)){for(let a in e)if(!Nt(e[a],t[a]))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;let r,o,n,i;return vi(e)&&(r=A.spreadsAtStart(e),o=A.spreadsAtEnd(e)),vi(t)&&(n=A.spreadsAtStart(t),i=A.spreadsAtEnd(t)),!Nt(r,n)||!Nt(o,i)?!1:vi(e)&&vi(t)?A.isSorted(e)===A.isSorted(t):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof e} / ${typeof t}`)}var PC={js:u`undefined`,css:"unset"};function hx(e,t){switch(t){case"js":return PC[t];case"css":return e==="display"?"block":PC[t];default:$(t,`target is not a defined enum: ${t}`)}}function eo(e,t,r){if(!e)return;if(!t)return e;let o={},n=!1;for(let i in e){let a=e[i],s=t[i];Nt(a,s)||(k(a)?i in t&&(o[i]=r?hx(i,r):void 0,n=!0):(o[i]=a,n=!0))}if(n)return o}var ol=(e,t)=>{if(!kp(e)||!e.codeOverrideEnabled||!e.codeOverrideIdentifier)return;let r=P.componentForIdentifier(e.codeOverrideIdentifier);if(!(r&&ic(r)))return;let o=Q(e.codeOverrideIdentifier);if(!be(o))return;let{importSpecifier:n,exportSpecifier:i}=Yr(o,t.moduleType,t.modulesStore);if(!(!n||!i))return{importSpecifier:n,exportSpecifier:i}};function nl(e,t){let r=[];if(_e.isOn("overridesWithPropertyControls")&&xh(e)&&e.codeOverrides)for(let o of e.codeOverrides){let n=P.componentForIdentifier(o.identifier);if(!(n&&ic(n)))continue;let i=Q(o.identifier);if(!be(i))continue;let a=t.imports.addModuleImport(i);if(!a)continue;let s=Rh(o),l=Object.keys(s).length>0&&Dr(s);r.push(l?[a,s]:a)}return r}function gx(e){return!xt(e)&&(E(e)||G(e)||ot(e)||k(e))}function ud(e,t){return t.scopeType!=="SmartComponent"?gx(e):Dr(e)}var FC=Je((e,t,r)=>{if(!U(e)||!e.isVectorInstance||!X(r))return;let o=P.reactComponentForIdentifier(e.codeComponentIdentifier);if(!o)return;let n=Yn(e,o.properties,e.getControlProps(o.properties),{context:r,pixelSize:void 0,repeaterInfo:void 0});for(let i in n){let a=n[i],s=`--${Te(i)}`;ud(a,r)&&(t[s]=a??void 0)}});function LC(e,t,r,o,n){let i={...t};lp.has(e.codeComponentIdentifier)&&(i.__fromCodeComponentNode=!0);let a=o.reactComponentForIdentifier(e.codeComponentIdentifier);if(a?.properties){let f=gh(e.intrinsicWidth,e.intrinsicHeight),h=Yn(e,a.properties,e.getControlProps(a.properties),{pixelSize:f,context:r,repeaterInfo:n?r.repeaterInfo.get(n):void 0});if(e.isVectorInstance)for(let g in h){let S=h[g],C=r.scopeType!=="SmartComponent"?!0:void 0;i[g]=ud(S,r)?C:S}else Object.assign(i,h)}let s=bh(o,e.codeComponentIdentifier,i),l=e.getActions(o);for(let f in l)s[f]=r.events?.addHandler({node:e,trigger:f,actionInfo:l[f]});if(e.isVectorInstance)return Lc(s);let c=Ch(e,o);cp(e)&&Object.assign(s,e.getStylingProps(c,!1));let p=e.id===r.rootId&&r.scopeType!=="SmartComponent",m=c?Object.keys(c):[],d=rt(c)&&m.length>0&&m.some(f=>!k(c[f]));return rt(c)&&(d||p)&&p&&(c.width=u`style?.width`,c.height=u`style?.heigh`,d=!0),d&&(s.style?Object.assign(s.style,c):s.style=c),Lc(s)}var yx=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function Sx(e,t){if(typeof DOMParser>"u"||e.indexOf("image")<0)return;let r=ep(e),o=r.querySelector("svg");if(!o)return;let n=new Map;if(r.querySelectorAll("image").forEach(i=>{let a=i.getAttribute("xlink:href");if(!a)return;let s=yx.exec(a);if(!s)return;let l=Number.parseInt(s[1],10),c=s[2],p="::ASSET::"+n.size+"::",d=t?.resolveResponsiveImage(c,l)?.src??wu(c,l);n.set(p,d),i.setAttribute("xlink:href",p)}),n.size!==0)return o.outerHTML.replace(/::ASSET::\d+::/gu,i=>n.get(i)??`missing:${i}`)}function il(e,t){let r=e.svg;E(r)&&(e.svg=Sx(r,t)??r)}var EC=B((e,t,r)=>{if(!wh(e)||!Wn(r?.scopeType))return;if(Pn(e)||fr(e)&&D(e.fillImage)){t["aria-label"]=void 0;return}if(X(r)&&D(e.ariaLabel)){t["aria-label"]=r.createDeduplicatedDynamicValueBinding(e.ariaLabel,e,"ariaLabel");return}let o=e.resolveValue("ariaLabel",r?.variableOverrides);if(E(o)&&o!==""){t["aria-label"]=o;return}t["aria-label"]=void 0});var AC=B((e,t,r)=>{let o=Be(e),n=!!(e.parentid&&r?.renderAsListNodes?.has(e.parentid));if(!nr(e)){if(!it(e)&&o&&(t.as="a"),n){t.as="li";return}return}if(!fr(e))return;let i=e;if(o){t.as="a";return}if(n){t.as="li";return}let a=i.htmlTag??ns;a!=="div"&&(t.as=a)});var BC=B((e,t,r)=>{if(!Xh(e)||!X(r))return;let o=e.originalid??e.id,n=r.events.overlayState.get(o);n&&(D(e.backdropDismissible)?t.onTap=u`() => ${r.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")} && ${v.fn(u`${n}.hide`)}`:t.onTap=e.resolveValue("backdropDismissible")?u`() => ${v.fn(u`${n}.hide`)}`:void 0,t.initial={opacity:0},t.key=o,e.backdropTransitionLocked?(t.transition=Co(e.backdropEnterTransition??vs),t.animate={opacity:1},t.exit={opacity:0}):(t.animate={opacity:1,transition:Co(e.backdropEnterTransition??vs)},t.exit={opacity:0,transition:Co(e.backdropExitTransition??vs)}))});var OC=B((e,t,r)=>{if(!qa(e)&&Rn(e)){if(kn(e)&&!e.fillEnabled){t.background=void 0;return}t.background=Sh(e,!0,r)}});var $C=B((e,t,r)=>{!xm(e)||!e.borderEnabled||Lm(e)||(t["data-border"]=!0,X(r)&&r.css.addConditionalRule(0))});var WC="data-reset",HC=B((e,t,r)=>{if(X(r)&&!(r.scopeType==="CanvasPage"||r.scopeType==="DesignPage")&&wo(e)){if(!bf(e.htmlTag)){t[WC]=void 0;return}e.htmlTag==="button"&&(t[WC]="button")}});function GC(e,t){if(Mt(e))return Q(e).type;if(Ir(e)){let o=t.getExternalModuleNodes().find(n=>n.codeComponentIdentifier===e);return o?o.type:void 0}}var UC=B((e,t,r)=>{if(!U(e)||!X(r)||!Sr(e))return;t.scopeId=r.scopeId,t.nodeId=e.originalid??e.id,t.isAuthoredByUser=GC(e.codeComponentIdentifier,r.treeStore.tree)==="codeFile"?!0:void 0;let o=Ir(e.codeComponentIdentifier);o&&(t.isModuleExternal=o);let n=r.nodeRendersWithMotion.get(e);n&&(t.rendersWithMotion=n);let i=Q(e.codeComponentIdentifier);t["data-code-component-plugin-id"]=Cy(r.treeStore.tree,r.modulesStore,i)});var _C=B((e,t,r)=>{Mh(e)&&Wn(r?.scopeType)&&(t["data-nosnippet"]=Dh(e)?e.dataNosnippet:void 0)});var jC=B((e,t,r)=>{if(!vf(e))return;let o=X(r)&&D(e.draggable)?r.createDeduplicatedDynamicValueBinding(e.draggable,e,"draggable"):e.resolveValue("draggable");t.draggable=!k(o)&&!D(e.draggable)?o.toString():o});var JC=B((e,t,r)=>{if(!X(r)||So(e)||!os(e)&&!zp(e))return;let o=r.treeStore.tree.get(r.scopeId);bt(o)&&uf(o)&&Object.assign(t,r?.events?.eventHandlersForNode(e))});var XC=B((e,t,r)=>{if(!it(e))return;let o=e.getFontsForLoading();if(X(r)){let n=Sn(e);for(let i of o)r.fonts?.addFontObjectBySelector(i,n)}t.fonts=o.length>0?o:void 0});var qC=B((e,t,r)=>{Cg(e)&&(t.step=X(r)&&D(e.formInputStep)?r.createDeduplicatedDynamicValueBinding(e.formInputStep,e,"step"):e.resolveValue("formInputStep"))});var KC=B((e,t,r)=>{if(Ph(e)){if(X(r)){t["data-hide-scrollbars"]=D(e.hideScrollbars)?r.createDeduplicatedDynamicValueBinding(e.hideScrollbars,e,"hideScrollbars"):e.hideScrollbars||void 0,k(e.hideScrollbars)||r.css.addConditionalRule(1);return}t["data-hide-scrollbars"]=e.resolveValue("hideScrollbars",r?.variableOverrides)?!0:void 0}});var YC=B((e,t,r)=>{!qr(e)||r?.scopeType==="WebPage"||(t["data-highlight"]=$p(e,P)||void 0)});var QC=B((e,t,r)=>{if(!Ct(e)||!Ye(e)||!X(r)||r.scopeType!=="LayoutTemplate")return;let o=e.tree()?.getParent(e.id);if(!$e(o))return;let{center:n}=Gf(e);Fu(t,_f(e)?n:void 0)});var ZC=B((e,t,r)=>{if(!Be(e)||it(e))return;if(r?.variables&&pe(e.linkOpenInNewTab)){t.openInNewTab=r.variables.create(e.linkOpenInNewTab);return}let o=e.resolveValue("linkOpenInNewTab",r?.variableOverrides);ur(o)&&(t.openInNewTab=o)}),ev=B((e,t,r)=>{if(!Be(e)||it(e))return;if(r?.variables&&pe(e.linkSmoothScroll)){t.smoothScroll=r.variables.create(e.linkSmoothScroll);return}let o=e.resolveValue("linkSmoothScroll",r?.variableOverrides);ur(o)&&(t.smoothScroll=o)}),tv=B((e,t,r)=>{if(!Be(e)||it(e))return;if(r?.variables&&pe(e.linkClickTrackingId)){t.clickTrackingId=r.variables.create(e.linkClickTrackingId);return}let o=e.resolveValue("linkClickTrackingId",r?.variableOverrides);E(o)&&(t.clickTrackingId=o)}),rv=B((e,t,r)=>{if(!Be(e)||it(e))return;let o=e.resolveValue("linkRelValues",r?.variableOverrides);if(r?.variables&&pe(e.linkRelValues)){t.relValues=r.variables.create(e.linkRelValues);return}Cp(o)&&(t.relValues=o)}),ov=B((e,t,r)=>{if(!Be(e)||it(e))return;if(r?.variables&&pe(e.linkPreserveParams)){t.preserveParams=r.variables.create(e.linkPreserveParams);return}let o=e.resolveValue("linkPreserveParams",r?.variableOverrides);ur(o)&&(t.preserveParams=o)}),nv=B((e,t,r)=>{if(!Ro(e)||it(e))return;if(!Be(e)){t.href=void 0;return}let o=e.getLink();Pt(o)?t.href=r?.valueTransforms?.createComputedValue(o,e,void 0):Jr(o)&&e.linkLocalized&&r?.localizedValues?t.href=r.localizedValues.add(o.url,e.linkLocalized,n=>e.linkLocalized?.[n]?.value):t.href=r?.links?.create(o)}),iv=B((e,t)=>{if(wa(e)){let r=new Set,o=e.getInlineLinks(!1);E(e.link)&&o.push(e.link),o.forEach(n=>{if(!n||!Ku(n))return;let i=Yu(n)?.target;i&&r.add(i)}),t.__link=e.link,r.size&&(t.preload=Array.from(r))}}),av=B((e,t)=>{t.nodeId=e.originalid??e.id}),sv=B((e,t,r)=>{t.scopeId=r?.scopeId});var lv=B((e,t,r)=>{if(!Sf(e)||!X(r)||!hs(r.scopeType)||wt(e))return;if(!Cf(e)){t.drag=void 0;return}let o,n;!e.dragEffectFreeform&&r.scopeType!=="SmartComponent"?o=r.elementIds.scrollTargetInfo({target:e.dragEffectConstraintElement,collectionItem:e.dragEffectConstraintItem})?.ref:e.dragEffectSnapBack&&(n=!0);let i=e.dragEffectTransition?Co(e.dragEffectTransition):void 0,a=i?r.declarations.file.dedupe("inertia",i):void 0,s=o||n,l=u`e`,c={drag:!0,dragConstraints:o,dragMomentum:!!e.dragEffectMomentum,dragTransition:s?a:void 0,dragSnapToOrigin:n,onMouseDown:r.declarations.file.dedupe("preventDefault",u`(${l}) => ${l}.preventDefault()`)};Object.assign(t,c)});var Cx="--extracted-",vx=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function Li(e,t){let r=On(e);return cv(r,(o,n)=>{for(let i of vx){let a=o.style.getPropertyValue(i);if(!a)continue;let s=bx(n,i),l=Ix(s,a);t&&(t[s]=a),o.style.setProperty(i,l)}}),r.innerHTML}function bx(e,t){return Cx+Te(e+t)}function Ix(e,t){return`var(${e}, ${t})`}function cv(e,t,r=""){for(let o=0;o<e.children.length;o++){let n=e.children[o];if(n instanceof HTMLElement){let i=r+n.tagName+o;t(n,i),cv(n,t,i)}}}var dv=B((e,t,r)=>{if(!Oa(e)||!X(r))return;let o=r.scopeType==="SmartComponent",n=o?Li(e.html):e.html,{assets:i,imports:a,variables:s,links:l,cssVariableDefinitions:c}=r||{};if(y(i&&a&&l,"assets, imports, links must exist at this point"),pe(e.htmlContent))y(s,"context.variables should exist if we are dealing with variables references"),t.children=s.create(e.htmlContent);else{let p=yr(n,{collectors:{assets:i,imports:a,links:l,variables:s,cssVariableDefinitions:c},useFramerMotion:o,nodeId:e.originalid??e.id,scopeId:r.scopeId}),m=dy(n);t.children=r.localizedValues.add(p,e.htmlLocalized,(d,f)=>{let h=Fy(m,e.htmlLocalized?.[d],n);if(!h)return;let g;return h.type==="rich-text"?(g=Py(e.html,h.value),o&&(g=Li(g))):g=Jh(n,h.value),yr(g,{collectors:{assets:i,...f},useFramerMotion:o,nodeId:e.originalid??e.id,scopeId:r.scopeId})})}xe(e)&&Sa(e.anchorLinkOffsetY)&&(t.anchorLinkOffsetY=e.anchorLinkOffsetY),r.metrics?.measureLength("textBytes",t.__htmlStructure),r.metrics?.measureLength("textBytes",t.htmlFromDesign),r.metrics?.measureLength("textBytes",t.children)});var uv=B((e,t,r)=>{if(!(!xa(e)||!e.colorable)){if(kn(e)&&!e.fillEnabled){t.fill=null;return}if(Rn(e)&&!(e.fillType==="linear-gradient"&&e.fillLinearGradient||e.fillType==="radial-gradient"&&e.fillRadialGradient||e.fillType==="conic-gradient"&&e.fillConicGradient)){if(e.fillType==="image"&&e.fillImage){t.fill=yh(e,r,r?.variableOverrides);return}if(e.fillColor){if(D(e.fillColor)&&X(r)){t.fill=r.createDeduplicatedDynamicValueBinding(e.fillColor,e,"fillColor");return}t.fill=e.resolveValue("fillColor",r?.variableOverrides)}}}});var pv=B((e,t,r)=>{if(!Dp(e)||!op(e))return;let o=Ro(e)&&E(e.link)?e.link:void 0,n=ju(e)?e.htmlTextTag:void 0,{alignment:i,rawHTML:a}=e.getStyledText().getProps(e,o,n,()=>{});t.alignment=i,t.rawHTML=a?u`${a}`:void 0,r?.metrics?.measureLength("textBytes",t.rawHTML)});var mv=B((e,t,r)=>{if(Um(e)){if(!e.textContent){t.text=void 0;return}X(r)&&(D(e.textContent)?t.text=r.createDeduplicatedDynamicValueBinding(e.textContent,e,"textContent"):$(e.textContent,"text content must be a variable or a computed value"),r?.metrics?.measureLength("textBytes",t.text))}});var fv=B((e,t,r)=>{!Cs(e)||!e.resolveValue("textSelection")||(t["data-selection"]=!0,X(r)&&r.css.addConditionalRule(2))});var hv=B((e,t)=>{eg(e)&&(t.verticalAlignment=e.textVerticalAlignment)});var gv=B((e,t)=>{lg(e)&&(t.description=E(e.description)&&e.description!==""?e.description:void 0,t.title=E(e.title)&&e.title!==""?e.title:void 0)});function Tx(e){if(Lt(e))return e.variantTransition;if(Mf(e))return e.transition}var yv=B((e,t,r)=>{if(r.scopeType!=="SmartComponent")return;let o=Tx(e);if(D(o)){t.value=r.createDeduplicatedDynamicValueBinding(o,e,"transition");return}if(!o){t.value=void 0;return}let n=Co(o);t.value=r.declarations.file.dedupe("transition",n)});var Nx="-container",fd=u`formState`,wx=B((e,t,r)=>{xa(e)&&(t.withExternalLayout=!0,t.intrinsicHeight=e.intrinsicHeight||void 0,t.intrinsicWidth=e.intrinsicWidth||void 0,t.svg=u`${e.svg}`,il(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg))}),xx=B((e,t,r)=>{if(!gn(e))return;y(t instanceof A,"");let o=Hc.shared().getSVGStringForNode(e),n=e.contentHash;A.assign(t,{layout:r?.scopeType==="SmartComponent"?"position":void 0,intrinsicWidth:void 0,intrinsicHeight:void 0,...Fc(e),withExternalLayout:!0,svgContentId:n,svg:o});let i=t.style?.opacity;(i||Number.isFinite(Number(i)))&&(t.opacity=i),il(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg)}),Rx=B((e,t,r)=>{if(!sp(e))return;let o=Hc.shared().getSVGStringForNode(e);Object.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...Fc(e),svg:o,withExternalLayout:!0,requiresOverflowVisible:Ly(e)});let n=t.style?.opacity;(n||Number.isFinite(Number(n)))&&(t.opacity=n),il(t,r?.assets),r?.metrics?.measureLength("svgBytes",t.svg)});function kx(e){return e.codeComponentIdentifier==="framer/Prototype"}function pd(e,t,r,o,n){if(!U(e))return;let{lastRepeaterId:i,layoutId:a}=n;if(A.assign(t,LC(e,void 0,r,P,i)),kx(e))t.scaleTo="dynamic";else if(el(e))t.__fromCanvasComponent=!0;else if(!e.isVectorInstance)t.width="100%",t.height="100%",t.id=e.originalid??e.id,e.name!==null&&!t.name&&(t.name=e.name);else{let c=Xa(e)&&(D(e.rotation)||G(e.rotation)&&e.rotation!==0);t[Af]=r.scopeType==="SmartComponent"?!0:is(e)||c||fs(e)}qf(e,t,r);let s=r.events.overlayTriggerOverlayBindings.get(e.originalid??e.id);if(Ff(e)&&s?.size){let c=new v(Array.from(s.values())?.map(p=>u`${p}.visible`)?.join(" || "));t.variant=u`(${c}) ? ${e.whileOpenEffectVariant} : ${t.variant??u`undefined`}`}Nf(r.treeStore.tree,e)&&(t.type="submit",Tf(e)&&(t.variant=v.fn(r.declarations.file.dedupe("formVariants",u`(form, variants, currentVariant) => { ${u.joinLines(u`switch(form.state) {${u.joinLines(u`case "success": return variants.success ?? currentVariant`,u`case "pending": return variants.pending ?? currentVariant`,u`case "error": return variants.error ?? currentVariant`,u`case "incomplete": return variants.incomplete ?? currentVariant`)}}`)} }`),fd,{success:e.formButtonSuccessVariantEnabled?e.formButtonSuccessVariant:void 0,error:e.formButtonErrorVariantEnabled?e.formButtonErrorVariant:void 0,pending:e.formButtonPendingVariantEnabled?e.formButtonPendingVariant:void 0,incomplete:e.formButtonIncompleteVariantEnabled?e.formButtonIncompleteVariant:void 0},t.variant??u`undefined`)));let l=r.treeStore.tree.get(n.lastRepeaterId);if(jr(l)&&hr(l)&&(jo(e,l)||gf(e))&&(t.variant=l&&yf(e)?v.fn(r.declarations.file.dedupe("loaderVariants",u`(repeaterState, variants, currentVariant) => { ${u.joinLines(u`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,u`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,u`return currentVariant`)} }`),r.bindings.createWithNode("paginationInfo",l),{disabled:e.dataLoaderDisabledVariantEnabled?e.dataLoaderDisabledVariant:void 0,loading:e.dataLoaderLoadingVariantEnabled?e.dataLoaderLoadingVariant:void 0},t.variant??u`undefined`):void 0),yn(e)||o.identifiers&&o.identifiers.size>1){let c=Q(e.codeComponentIdentifier);y(be(c),`Expected a module export identifier, got ${c}`);let{importSpecifier:p,exportSpecifier:m,importBinding:d}=Yr(c,r.moduleType,r.modulesStore);y(p,"A module must have an import specifier."),t.Component=pe(e.dynamicVectorSetIdentifier)?r.vectorSets.resolveVariableInstance(e):r.imports.addImport(p,{exportSpecifier:m,importBinding:d})}t.layoutId=a??e.originalid??e.id}var Vx=(e,t,r,o)=>{let n=new A;return pd(e,n,t,r,o),n},Mx=Uo(EC,AC,BC,OC,$C,UC,HC,_C,jC,JC,XC,mg,Lh,gg,bg,qC,Vg,Ig,Tg,Eh,Kf,KC,YC,QC,iv,Yf,lv,Jf,Qf,Zf,jf,dv,xx,pv,rg,uv,wx,dg,mv,og,ng,fv,hv,gv,Rx);function Dx(e){if(k(e)||e instanceof A&&A.hasSpreads(e))return e;for(let t of Object.values(e))if(!k(t))return e}function md(e){return e.declarations.component.dedupe("scopingClassNames",v.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),x.serializationHash,u`...${x.sharedStyleClassNames}`))}var Px=(e,t,r,o,{style:n,className:i})=>{let a=new A;Mx(e,a,t);let s=(e.originalid??e.id)===t.rootId;if(a.style||n||s){let f={};if(rt(a.style)&&Object.assign(f,a.style),n&&Object.assign(f,n),a.style=Dx(f),s){let h=new A(a.style);A.addSpreadAtEnd(h,u`style`),a.style=h}}let l=[];a.className&&l.push(a.className),i&&l.push(i),s&&(l.unshift(md(t)),l.push(x.className),a.ref=x.refBinding,A.addSpreadAtStart(a,x.restProps),t.scopeType==="SmartComponent"&&(l.push(x.classNames),A.addSpreadAtStart(a,x.gestureHandlers))),(Fe(e)||Fe(t.treeStore.tree.getParent(e.id)))&&l.unshift(md(t)),l.length===1?a.className=l[0]:l.length>1&&(a.className=v.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),...l)),t.scopeType==="LayoutTemplate"&&$e(e)&&(a[Fi]=!0);let{withKey:c,layoutId:p}=r,m=p??e.originalid??e.id;c&&(a.key=m),t.scopeType==="SmartComponent"?(a.layoutId=Sr(e)?m+Nx:m,a.layoutDependency=u`layoutDependency`):t.scopeType==="CanvasPage"&&(a.layoutIdKey=m,e.duplicatedFrom&&e.duplicatedFrom.length>0&&(a.duplicatedFrom=e.duplicatedFrom)),U(e)&&(Sr(e)?r.inComponentSlot&&(a.inComponentSlot=r.inComponentSlot):(el(e)&&(a.__fromCanvasComponent=!0),pd(e,a,t,o,r)),Mr(e)&&(a.layoutScroll=!0)),it(e)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),Qa(e)&&t?.scopeType==="WebPage"&&!Lt(e)&&(a.id=e.scrollTargetEnabled?t.elementIds.id(e):void 0),a["data-framer-cursor"]=t.customCursors.add(e),Et(e)?Object.assign(a,{role:"dialog"}):a[cc]=t.elementIds.portalId(e);let d=t.treeStore.tree.get(r.lastRepeaterId);return d&&U(e)&&jo(e,d)&&Object.assign(a,{__paginationInfo:t.bindings.createWithNode("paginationInfo",d),__loadMore:t.bindings.createWithNode("loadMore",d)}),a},Fx=Uo(nv,ZC,ev,tv,rv,ov,av,sv);function Lx(e,t){let r=new A({motionChild:!0});return Fx(e,r,t),r}function Ex(e,t){let r=new A;return yv(e,r,t),r}var Ax=new A({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function Bx(e,t){if(!_p(e))return;if(!Et(e))return Ax;let r=t.events.overlayState.get(e.originalid??e.id);if(!r)return;let o=t.treeStore.tree.getParent(e.originalid??e.id);if(o)return new A({placement:e.floatingPlacement,alignment:e.floatingAlignment,offsetX:e.floatingOffsetX,offsetY:e.floatingOffsetY,anchorRef:t.rootId===o.id?u`${x.refBinding}`:t.elementIds.ref(o),onDismiss:u`${Ys(r,"hide")}`,safeArea:e.floatingSafeArea??!0,zIndex:cm(e)?e.zIndex:void 0,collisionDetection:e.floatingCollisionDetection??!1,collisionDetectionPadding:e.floatingCollisionDetection?e.floatingCollisionPadding??Up:void 0,[cc]:t.elementIds.portalId(e),className:v.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),md(t),t.scopeType==="SmartComponent"?x.classNames:void 0)})}function Sv(e,t){let r=t.fetches.getFetchesForNode(e);return new A({requests:r??[],disabled:t.scopeType==="SmartComponent"?x.isLoading:void 0})}function Ox(e,t){if(!U(e))return;let r=new A;if(P.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let i=t.simulatedDOM.getComponentViewportContext(e);Object.assign(r,i)}return r}function hd(e,t,r,o,{className:n,style:i}={}){let a=Px(e,t,o,r,{style:i,className:n}),s=Ex(e,t),l=Bx(e,t);if(So(e)&&Sr(e)){let c=Vx(e,t,r,o),p=Sv(e,t);return{container:a,transition:s,floating:l,fetcher:p,element:c,componentViewport:Ox(e,t)}}return{element:a,transition:s,floating:l,link:Lx(e,t),fetcher:Sv(e,t)}}var zx=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],$x=(e,t)=>{if(!qr(t)||!pf(e,t))return!1;let r=t.getActions(P);return zx.some(o=>{if(o in r){let n=r[o];return n?n.length>0:!1}return!1})},Cv=Je((e,t,r)=>{if(!pm(e)||wr(e))return;if(D(e.cursor)&&X(r)){t.cursor=r.cssVariableDefinitions.create(e,"cursor");return}if(e.cursor&&dm(e.cursor)){t.cursor=e.resolveValue("cursor",r?.variableOverrides),xe(e)&&e.hasLinks()&&(t.cursor=void 0,t[um]=e.cursor);return}if(!X(r))return;let o=Lt(e)&&r.topLevelVariantsWithGestures[e.id];t.cursor=o||$x(r.treeStore.tree,e)?"pointer":void 0});var vv=Je((e,t)=>{Be(e)&&(t.textDecoration="none")});var bv=Je((e,t,r)=>{Ct(e)&&wo(e)&&r?.renderAsListNodes?.has(e.id)&&(t.listStyle="none",t.margin=0)});var Iv=Je((e,t,r)=>{if(!(!tm(e)||!Ha(e))&&em(e)){if(D(e.overscrollBehavior)&&X(r)){t.overscrollBehavior=r.cssVariableDefinitions.create(e,"overscrollBehavior");return}t.overscrollBehavior=e.resolveValue("overscrollBehavior",r?.variableOverrides)}});var Tv=Je((e,t)=>{Qa(e)&&(t.scrollMarginTop=G(e.scrollMarginTop)&&e.scrollTargetEnabled&&e.scrollMarginTop>0?e.scrollMarginTop:void 0)});var Nv=Je((e,t,r)=>{if(!Fh(e))return;if(D(e.tapHighlightColor)&&X(r)){t.WebkitTapHighlightColor=r.cssVariableDefinitions.create(e,"tapHighlightColor");return}let o=e.resolveValue("tapHighlightColor",r?.variableOverrides);if(Fa(o)){t.WebkitTapHighlightColor=dp(o);return}t.WebkitTapHighlightColor=o?Mu.toRgbString(o):void 0});var wv=Je((e,t,r)=>{if(!Cs(e))return;let o=e.resolveValue("textSelection");t["--selection-color"]=o?.color,t["--selection-background-color"]=o?.backgroundColor});var xv=Je((e,t,r)=>{if(rm(e)){if(D(e.userSelect)&&X(r)){t.userSelect=t.WebkitUserSelect=r.cssVariableDefinitions.create(e,"userSelect");return}t.userSelect=t.WebkitUserSelect=om(e)?e.resolveValue("userSelect",r?.variableOverrides):void 0}});var Rv=Je((e,t,r)=>{if(!Df(e)||!X(r)||r.scopeType!=="LayoutTemplate")return;let o=r.treeStore?.tree.getParent(e.id);$e(o)&&(t.viewTransitionName=e.viewTransitionNone===!0?ld(e,r.serializationId,!0):void 0)});var Vv=Je((e,t,r)=>{let o=Wx(e,r);t.willChange=o}),kv=`var(${Pu}, transform)`;function Wx(e,t){if(hs(t?.scopeType)&&(Hf(e)&&(Pf(e)||Lf(e))||t?.scopeType!=="SmartComponent"&&Vf(e)&&kf(e.styleAppearEffectTrigger)==="onMount"))return kv;if(!wn(e)||!Ha(e)||e.overflow!=="hidden")return;let r=Vm(e)&&e.radius,o=Mm(e)&&e.radiusPerCorner&&(e.radiusBottomLeft||e.radiusBottomRight||e.radiusTopLeft||e.radiusTopRight);if(r||o)return`var(${Du}, transform)`}var Hx=Uo(Qh,Wf,hg,Cv,Ah,yg,Bh,th,Oh,zh,wg,Uf,vv,bv,lh,Iv,zm,oh,Tv,wv,ih,Nv,Ng,mh,uh,xv,Rv,Vv,hh),gd=Uo(Yh,Am,ah,fg,Bm,sh,eh,Om,Sg,xg,kg,Rg,Gm,zf,rh,$m,Wm,ch,dh,Hm,FC),yd=Uo(ph,nh);function Gx(e,t){return ot(e)||po(e)||U(e)?"relative":Fe(e)?"fixed":Ra(e)||Et(t)?"relative":"absolute"}function Sd(e,t,r,o){let n={position:Gx(t,e),zIndex:Fe(t)?fh(t,r):void 0,...o},i={};Hx(e,n,r);let a=r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate"||r.nodeRendersWithMotion?.get(e)===!1;return gd(e,a?n:i,r),Oa(e)&&r.scopeType==="SmartComponent"&&Li(e.html,i),yd(e,i,r),{css:n,style:Me(i)?void 0:i}}var Zn={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function Ux(){let e={},t={},r={},o={},n={},i={};return[[new $h({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),e],[new pg,t],[new ig,r],[new vh({codeComponentIdentifier:"framer/Page"}),o],[new cg,n],[new ug,i]].forEach(([s,l])=>{gd(s,l,{}),yd(s,l,{})}),{FrameNode:Object.assign(e,Zn),TextNode:Object.assign(t,Zn),RichTextNode:Object.assign(r,Zn),CodeComponentNode:Object.assign(o,Zn),SVGNode:Object.assign(n,Zn),ShapeContainerNode:Object.assign(i,Zn)}}var Dv=Ux();function Pv(e,t,r){if(!(!r||k(e.__class)||xt(t.style))&&!(!k(t.style)&&!rt(t.style)))for(let o in r){if(k(t.style?.[o])&&k(r[o])||t.style&&o in t.style&&!k(t.style[o])&&!k(r[o]))continue;let n=Dv?.[e.__class];if(!n||!(o in n)){k(r[o])&&(r[o]=u`undefined`);continue}let i=n[o];if(k(t.style?.[o])){let a=t.style??{};a[o]=i,t.style=a}k(r[o])&&(r[o]=i)}}function Qo(e,t,r){let o=e.originalid===t?e.id:Lp(e.id,t);return r.get(o)}function _x(e){let t=e.children?.find(n=>ho(n));if(!t)return;let r=e.itemsOrder?e.itemsOrder.indexOf(t.originalid??t.id):e.children?.indexOf(t);if(!G(r)||r<0)return;let o=new Map;return e.itemsOrder?e.itemsOrder.forEach((n,i)=>{if(n===t.originalid)return;let a=i<r?-1e3:1e3;o.set(n,i+a)}):e.children?.forEach((n,i)=>{i<=r||o.set(n.originalid??n.id,i+1e3)}),o}function Fv(e,t){if(t==="LayoutTemplate"&&$e(e))return _x(e);let r=e.itemsOrder;if(!r||r.length<1)return;let o=new Map;return r.forEach((n,i)=>{o.set(n,i)}),o}var jx=e=>(t,r)=>!r||!e?t:{...t,...r[e]};function Av(e,t,r,o){let{combinedVariableControlMap:n}=e.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);t&&(Wc(t,e),Xx(t,e));let i=hr(e),a=o.subqueries;ze(e)&&mt(e)?a=new rl(e,i?void 0:o.subqueries):qo(e)&&(a=void 0);let s=r.scopeType==="WebPage",l=r.scopeType==="SmartComponent",c=o.inCodeOverride||!k(ol(e,r))||nl(e,r).length>0,p=r.treeStore.tree.get(o.lastRepeaterId),m=r.kitSectionsStructure.addSection(e),d={isAnyVariantAnImage:fr(e),isAnyVariantALink:Be(e)&&!it(e),isAnyVariantAnEffect:Dc(e,r.scopeType),isAnyVariantAVariantAppearEffect:Vc(e),isAnyVariantARef:s&&_o(e)||Et(e)||U(e)&&ze(p)&&jo(e,p),isAnyVariantATransitionOverride:l&&(kc(e)||mc(e)),isAnyVariantOptimizedAppearEffect:Mc(e,r),itemsOrderOverrides:{},hiddenInVariants:new Set(o.hiddenInVariants),inCodeOverride:c,inheritedControlMap:n,isAnyVariantFloating:Et(e),isAnyVariantPaginated:i,identifiers:U(e)?new Set([Ev(e)]):void 0,subqueries:a,kitSectionId:m};r.trackingIds.add(e),r.kitSectionsStructure.addCustomizations(e,o.kitSectionId),Vr(e)&&r.formIds.add(e.id),r.scopeType==="LayoutTemplate"&&za(e)&&$e(e)&&(d.itemsOrderOverrides[e.id]=Fv(e,r.scopeType));let f=cd(e,r),h=new Map,g=dd(e,r,o,c),S=[],C=Tc(e);for(let K of r.variants){let O=Qo(K,e.id,r.treeStore.tree);if(!O)continue;O.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);let ne=r.treeStore.tree.getParent(O.id);if(d.hiddenInVariants.has(K.id))continue;ne&&Wc(ne,O);let Ke=Lv(K),Ee=cd(O,r);if(!Nt(Ee,h.get(K.replicaInfo?.inheritsFrom??"")??f)){let Jt=wr(K);h.set(Ke,{value:Ee,isGesture:Jt})}else(r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate")&&f!==!0&&h.set(Ke,{value:f});if(Ee===!1){d.hiddenInVariants.add(K.id);continue}Be(O)&&!it(O)&&(d.isAnyVariantALink=!0),fr(O)&&(d.isAnyVariantAnImage=!0),Dc(O,r.scopeType)&&(d.isAnyVariantAnEffect=!0),Vc(O)&&(d.isAnyVariantAVariantAppearEffect=!0),Mc(O,r)&&(d.isAnyVariantOptimizedAppearEffect=!0),hr(O)&&(d.isAnyVariantPaginated=!0),U(O)&&d.identifiers?.add(Ev(O)),r.trackingIds.add(O);let ve=Tc(O);if(ve){C||=ve;let{stops:Jt,info:tr}=ve;C.stops=Math.max(C?.stops,Jt??0),C.info||=tr}r.scopeType==="WebPage"?_o(O)&&(d.isAnyVariantARef=!0):r.scopeType==="SmartComponent"&&(Xf(O)&&(d.isAnyVariantAnEffect=!0),(kc(O)||mc(O))&&(d.isAnyVariantATransitionOverride=!0)),Yp(O)&&(d.itemsOrderOverrides[K.id]=Fv(O,r.scopeType)),g=g||dd(O,r,o,c),S.push({nodeInVariant:O,variant:K})}k(C)||r.nodesWithAnyGradientFill.set(e.id,C);let{condition:N,classNames:b,classNameExpressions:w}=r.renderFunctions.create(f,h);if(N===!1)return;r.nodeRendersWithMotion.set(e,g);let M=e.parentid?r.renderAsListNodes.get(e.parentid):!1;wo(e)&&If(e.htmlTag)&&!M&&r.renderAsListNodes.set(e.id,!0);let F=o?.itemsOrderOverrides?.[r.rootId],{css:H,style:z}=Sd(e,t,r,F?{order:F.get(e.id)}:void 0),J=Sr(e),me=DC(e,t,r),fe=r.css.addRule(H,e,{container:J,hasScopingSelector:me}),de=hd(e,r,d,o,{className:fe,style:z});r.hitTargets.recordClassName(e,r.rootId,fe);let le={link:void 0,container:void 0,element:void 0,floating:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0},R={variants:void 0,css:void 0};if(xe(e))for(let K of e.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(K.id);let Z=J?de.container:de.element;y(!k(Z),"Target will always be defined if the node needs a container");for(let{nodeInVariant:K,variant:O}of S){let ne=Lv(O);if(r.hitTargets.recordClassName(K,O.id,fe),xe(K))for(let st of K.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(st.id);let Ke=r.treeStore.tree.getParent(K.id),{itemsOrderOverrides:Ee}=o,He=Ee?.[O.id],ve=Sd(K,Ke,r,He?{order:He.get(e.id)}:void 0),Jt=jx(O.replicaInfo?.inheritsFrom),tr=eo(ve.css,Jt(H,R.css),"css");if(tr){let st=wr(O);R.css||(R.css={}),R.css[O.id]=tr,r.css.addRule(tr,K,{variant:O,hasScopingSelector:me,container:J,gesture:st?O.gesture:void 0,scope:st?O.replicaInfo?.inheritsFrom:r.scopeType==="SmartComponent"?O.id:void 0})}r.scopeType==="SmartComponent"&&Pv(K,Z,ve.style);let Wr=hd(K,r,d,o,{className:fe,style:Z.style}),cr=eo(ve.style,Jt(z,R.variants));if(cr)if(r.scopeType==="SmartComponent")R.variants||(R.variants={}),R.variants[ne]=cr;else{let st=J?"container":"element";le[st]=qx(ve.style,le[st],ne)}let gt;for(gt in Wr){let st=eo(Wr[gt],Jt(de[gt],le[gt]),"js");if(!st)continue;le[gt]||(le[gt]={[ne]:{}});let co=le[gt][ne];le[gt][ne]=rt(co)?Object.assign(co,st):st}}let ie=new Set(b);d.isAnyVariantALink&&ie.add(r.linkClassName);let Ie=new v.Set(w),ct=d.isAnyVariantARef||r.events.relativeOverlayPrimaryTriggers.has(e.id);return A.assign(Z,{variants:R.variants,className:Jx(Z.className,ie,Ie,r.imports),ref:Z.ref??(ct?r.elementIds.ref(e):Z.ref),[Ju]:d.isAnyVariantOptimizedAppearEffect?r.appearIds.create(e.id):void 0}),r.renderConditions.set(e.id,N),{...d,propsForLink:{props:de.link,overrides:le.link},propsForElement:{props:de.element,overrides:le.element},propsForContainer:{props:de.container,overrides:le.container},propsForTransition:{props:de.transition,overrides:le.transition},propsForFetcher:{props:de.fetcher,overrides:le.fetcher},renderCondition:N,propsForFloating:{props:de.floating,overrides:le.floating},propsForComponentViewport:{props:de.componentViewport,overrides:le.componentViewport}}}function Jx(e,t,r,o){if(t.size===0&&r.size===0)return e;if(r.size===0){let n=Array.from(t).join(" ");return e?ye`${e} ${n}`:n}else{let n=o.addImport("framer",{exportSpecifier:"cx"});return e?v.fn(n,e,...t,...r):v.fn(n,...t,...r)}}function Xx(e,t){t.cache.ancestorRepeaterIds=Jc(e,e.cache.ancestorRepeaterIds??[])}function Lv(e){return wr(e)?`${e.replicaInfo.inheritsFrom}-${e.gesture}`:e.id}function qx(e,t,r){let o=t??{};return o[r]=o[r]??{},o[r].style=o[r].style??{},Object.assign(o[r].style,e),o}function Bv(e,t,r){let o={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:$n(t,r)};for(let n of r.variants){let i=Qo(n,e.id,r.treeStore.tree);if(!i)continue;let a=eo({...o,marginBottom:$n(n,r)},o);!a||Me(a)||r.css.addRule(a,i,{variant:n})}return r.css.addRule(o,e)}function Ev(e){return yn(e)?Fm:e.codeComponentIdentifier}var al=class{constructor(){T(this,"cssWidthCache",new Map);T(this,"heightCache",new Map);T(this,"yPositionCache",new Map);T(this,"verticalStackLayoutInfoCache",new Map);T(this,"gridLayoutInfoCache",new Map);T(this,"computationCache",new Map);T(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(t){return this.cssWidthCache.get(t)}setCSSWidth(t,r){this.cssWidthCache.set(t,r)}getHeight(t){return this.heightCache.get(t)}setHeight(t,r){this.heightCache.set(t,r)}getYPosition(t){return this.yPositionCache.get(t)}setYPosition(t,r){this.yPositionCache.set(t,r)}getVerticalStackLayoutInfo(t){return this.verticalStackLayoutInfoCache.get(t)}setVerticalStackLayoutInfo(t,r){this.verticalStackLayoutInfoCache.set(t,r)}getGridLayoutInfo(t){return this.gridLayoutInfoCache.get(t)}setGridLayoutInfo(t,r){this.gridLayoutInfoCache.set(t,r)}memo(t,r){if(this.computationCache.has(t))return this.computationCache.get(t);let o=r();return this.computationCache.set(t,o),o}};var Cd=class{constructor(){T(this,"heightNodes",new Set)}startComputingHeightFor(t){this.heightNodes.add(t)}isComputingHeightFor(t){return this.heightNodes.has(t)}finishComputingHeightFor(t){this.heightNodes.delete(t)}};function Kx(e,t){return(r,o,n=void 0)=>{if(Pt(r))return t.createComputedValue(r,o,n);if(pe(r))return e.create(r);Dt(r,"all dynamic values should be handled above")}}function Ov(e,t,r){return{tree:e,cache:new al,workInProgress:new Cd,getVariableBinding:Kx(t,r)}}var ee=class extends Error{};function re(e,t){let r=Math.round(e*1e4)/1e4;return{type:"css-const",expr:t?`${r}${t}`:`${r}`,value:e,unit:t}}var sl={"+":"-","-":"+","*":"/","/":"*"};function Ve(e,t,r){if(t.type==="css-const"&&r.type==="css-const"){if(t.unit===r.unit){if(e==="+")return re(t.value+r.value,t.unit);if(e==="-")return re(t.value-r.value,t.unit);if(e==="min")return re(Math.min(t.value,r.value),t.unit);if(e==="max")return re(Math.max(t.value,r.value),t.unit)}else if(ei(e)&&(t.value===0||r.value===0))return r.value!==0?r:t;if(e==="*"&&(!t.unit||!r.unit))return re(t.value*r.value,t.unit||r.unit);if(e==="/"&&!r.unit)return re(t.value/r.value,t.unit)}if(ei(e)){if(r.type==="css-const"&&r.value===0)return t;if(t.type==="css-const"&&t.value===0)return r}else if(ll(e)){if(r.type==="css-const"&&r.value===1)return t;if(t.type==="css-const"&&t.value===1)return r}else if(e==="min"||e==="max"){if(t.type==="css-op"&&t.op===e&&zv(t,r))return t;if(r.type==="css-op"&&r.op===e&&zv(r,t))return r;if(Nt(t.expr,r.expr))return t}t.type==="css-op"&&t.right.type==="css-const"&&(ei(e)&&ei(t.op)?(r=Ve(e==="+"?t.op:sl[t.op],r,t.right),t=t.left):ll(e)&&ll(t.op)&&(r=Ve(e==="*"?t.op:sl[t.op],r,t.right),t=t.left));let o;if(ei(e))r.type==="css-const"&&r.value<0&&(e=sl[e],r=re(-r.value,r.unit)),e==="+"?o=ye`${Zo(t)} + ${r.expr}`:e==="-"?r.type==="css-op"&&!cl(r.op)?o=ye`${Zo(t)} - (${r.expr})`:o=ye`${Zo(t)} - ${Zo(r)}`:Dt(e);else if(ll(e)){if(r.type==="css-const"&&r.value<1){let n=re(1/r.value,r.unit);n.expr.length<r.expr.length&&(e=sl[e],r=n)}e==="/"&&r.type==="css-op"&&!cl(r.op)?o=ye`${Zo(t)} / (${r.expr})`:o=ye`${Zo(t)} ${e} ${Zo(r)}`}else cl(e)?o=ye`${e}(${t.expr}, ${r.expr})`:Dt(e,`unhandled op ${e}`);return{type:"css-op",expr:o,op:e,left:t,right:r}}function $v(e){switch(e.type){case"number-const":return re(e.value,"px");case"number-template":return Mo(e.expr);default:Dt(e)}}function Mo(e){return{type:"css-template",expr:e}}function ei(e){return e==="+"||e==="-"}function ll(e){return e==="*"||e==="/"}function cl(e){return e==="min"||e==="max"}function zv(e,t){return Nt(e.left.expr,t.expr)||Nt(e.right.expr,t.expr)}function Zo(e){return e.type==="css-op"&&ei(e.op)?ye`(${e.expr})`:e.expr}function dl(e){return e.type==="css-template"||e.type==="css-const"||e.type==="css-op"&&cl(e.op)?e.expr:ye`calc(${e.expr})`}function Yx(e,t,r,o,n,i){let a=t??kh;if(!i)return!0;let s=e.filters.filter(l=>{if(!l.itemKey)return!1;let c=i.properties[l.itemKey];return!(!c||c.type!=="boolean"&&l.transforms.length===0)});return s.length===0?!0:s[a==="all"?"every":"some"](l=>{let c=l.itemKey;y(c!==null,"itemKey should not be null");let p=i.properties[c];y(p,"control should exist");let m=r(c),d=o.getVariableControlByKey(c);return l.transforms.reduce((f,h)=>gm(f,h,o,n,d,void 0,void 0),m)})}function Wv(e,t,r,o,n,i){return e?r.filter(a=>Yx(e,t,s=>a[s],o,n,i)):r}function Qx(e,t){return t?Array.from(e).reverse():e}function Zx(e,t){if(t===void 0||t===0)return e;let r=Array.from(e);return r.splice(0,t),r}function eR(e,t){return e.length<=t?e:e.slice(0,t)}function Hv(e,t,r,o,n=15){if(n&1&&(t=Wv(e.collectionFilters,e.collectionFiltersOperator,t,e.cache,r,o)),n&2&&(t=Qx(t,e.collectionReverse)),n&4&&(t=Zx(t,e.collectionStartOffset)),n&8){let i=e.collectionLimit??1/0,a=e.collectionPaginationPageSize??1/0,s=Math.min(i,a);t=eR(t,s)}return t}var Yt=1e3,Gv=Symbol("Affects Layout: Indeterminate");function ul(e){return e===Gv}function to(e,t,r,o){return wt(e)||Ja(e,t)&&Go(e)||ja(r,e)&&Mr(e)||Ni(e)&&e.visible===!1?!1:Ni(e)&&D(e.visible)?o?e.isVisible():Gv:!0}function Ze(e){if(!bi(e))return 0;if(D(e.padding))throw new ee;return e.paddingPerSide?e.paddingTop??0:e.padding??0}function Ot(e){if(!bi(e))return 0;if(D(e.padding))throw new ee;return e.paddingPerSide?e.paddingBottom??0:e.padding??0}function _t(e){return D(e)?0:e??0}var tR=[];function Do(e){let t=(za(e)?e.getChildrenInVisualOrder():e.children)??tR;if(ze(e)){let r=e.collectionRepeatedItemId?t.findIndex(i=>i.id===e.collectionRepeatedItemId):0,o=t[r];if(!o)return t;let n=rR(e);return t.slice(0,r).concat(Array(n).fill(o)).concat(t.slice(r+1))}return t}function rR(e){if((e.collectionFilters?.filters?.length??0)>0)return 1;let t=P.dataForIdentifier(e.dataIdentifier),r=ef(void 0,t),o=Object.keys(r).length,n=Array(o).fill({});return Hv(e,n,void 0,t,14).length}var _v=";";function bd(e,t){return`${e}${_v}${t}`}function oR(e){let[t,r]=e.split(_v);return y(r!==void 0,"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+e),[Number(t),Number(r)]}function Uv(e,t,r,o){let n=0;for(let i=0;i<r;i++){let a=bd(t,i);if(e.has(a)){n=0;continue}if(n++,n!==o)continue;let l=i-(o-1);return y(l>=0,"getColumnIndexForItem(), column index should be at least 0"),l}return-1}function nR(e,t,r,o,n,i,a){let s=o+(i-1);y(a>s,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let l=r+(n-1);for(let c=o;c<=s;c++)for(let p=r;p<=l;p++){let m=bd(p,c);t.set(m,e)}}function iR(e,t){return!Bo(e)||D(e.gridItemColumnSpan)?1:e.gridItemColumnSpan==="all"?t:Math.min(e.gridItemColumnSpan??1,t)}function pl(e,t){return!Bo(e)||t.gridRowHeightType==="fit"||D(e.gridItemRowSpan)?1:e.gridItemRowSpan??1}var vd=class{constructor(t,r,o,n){this.gridLayout=t;this.rowCount=r;this.columnCount=o;this.filledRowCount=n;T(this,"coordinateCache")}getGridItem(t,r){let o=bd(t,r);return this.gridLayout.get(o)??null}findCoordinates(t){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[r,o]of this.gridLayout){let[n,i]=oR(r),a=this.coordinateCache.get(o);(!a||n<a.rowIndex||i<a.columnIndex)&&this.coordinateCache.set(o,{rowIndex:n,columnIndex:i})}}return this.coordinateCache.get(t)??null}isEmpty(){return this.gridLayout.size===0}};function jv(e,t){let r=e.gridColumnCount;if(!G(r))return null;let o=new Map,n=0,i=-1;for(let l of Do(e)){if(!to(l,e,t,!0))continue;let c=iR(l,r),p=pl(l,e),m=Uv(o,n,r,c);for(;m===-1;)n++,m=Uv(o,n,r,c);nR(l.id,o,n,m,p,c,r);let d=n+(p-1);i=Math.max(i,d)}let a=i+1,s=Math.max(e.gridRowCount??0,a);return new vd(o,s,r,a)}function en(e,t){let r=t.cache.getGridLayoutInfo(e.id);if(r)return r;let o=jv(e,t.tree);if(o===null)throw new ee;return t.cache.setGridLayoutInfo(e.id,o),o}function lj(e,t){return jv(e,t)?.filledRowCount}var aR={type:"number-const",value:0},sR={type:"number-const",value:1/0},lR={type:"number-const",value:Yt};function q(e){return e===0?aR:e===1/0?sR:e===Yt?lR:{type:"number-const",value:pR(e)}}function V(e,...t){return ml(e,0,t.length,t)}function ml(e,t,r,o){pi(0<=t&&t<=r&&r<=o.length,"start and end must be within the bounds of operands");let n=r-t;if(n===0)return null;if(n===1){let c=o[t];return ga(c)?q(c):c}let{hasTemplateOperands:i,operationResult:a}=cR(t,r,o,e);if(!i)return q(a);let s=dR(t,r,o),l=e==="min"||e==="max"?v.fn(u`Math.${new v(e)}`,...s):new v(`(${te(s,` ${e} `)})`);return Ei(l,a,!0)}function cR(e,t,r,o){let n=!1,i;for(let a=e;a<t;a++){let s=r[a],l;ga(s)?l=s:s.type==="number-const"?l=s.value:s.type==="number-template"?(n=!0,l=zt(s)):Dt(s),k(i)?i=l:i=uR(o,i,l)}return pi(i!==void 0,"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:n,operationResult:i}}function dR(e,t,r){let o=[];for(let n=e;n<t;n++){let i=r[n];ga(i)?o.push(u`${i}`):i.type==="number-const"?o.push(u`${i.value}`):o.push(i.expr)}return o}function Ei(e,t,r=!1){return{type:"number-template",expr:r?e:u`(${e})`,impreciseEstimate:t}}function uR(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"min":return Math.min(t,r);case"max":return Math.max(t,r);default:Dt(e)}}function pR(e){return Math.round(e*1e4)/1e4}function zt(e){return e.type==="number-const"?e.value:e.impreciseEstimate}var Id=class{constructor(t,r,o,n,i){this.columns=t;this.nodeToAccurateCoordinateMap=r;this.nodeToRoughCoordinateMap=o;this.gap=n;this.contentHeight=i;T(this,"frToPxCache",new Map)}walkColumn(t,r){if(this.columns[t])for(let o of this.columns[t])r(o.nodeId)}getStackItem(t,r){return this.columns[t]?.[r]?.nodeId??null}findCoordinates(t){return this.findAccurateCoordinates(t)??this.findRoughCoordinatesOfConditionallyVisibleNode(t)}findAccurateCoordinates(t){return this.nodeToAccurateCoordinateMap.get(t)??null}findRoughCoordinatesOfConditionallyVisibleNode(t){return this.nodeToRoughCoordinateMap.get(t)??null}getFrToPxForColumn(t){let r=this.columns[t];if(!r)return null;if(!this.frToPxCache.has(t)){let o=[],n=[];for(let p of r)p.type==="regular"?o.push(p):p.type==="fr"?n.push(p):Dt(p);let i=o.reduce((p,m)=>V("+",p,m.getHeight()),q(0)),a=this.gap*(r.length-1),s=V("-",this.contentHeight,V("+",i,a)),l=n.reduce((p,m)=>p+m.frUnits,0),c=V("/",s,Math.max(l,1));for(n=n.sort((p,m)=>zt(m.getMinHeightPerFr())-zt(p.getMinHeightPerFr()));n[0]&&zt(n[0].getMinHeightPerFr())>zt(c);)s=V("-",s,n[0].getMinHeight()),l-=n[0].frUnits,c=V("/",s,Math.max(l,1)),n.shift();for(n=n.sort((p,m)=>zt(p.getMaxHeightPerFr())-zt(m.getMaxHeightPerFr()));n[0]&&zt(n[0].getMaxHeightPerFr())<zt(c);)s=V("-",s,n[0].getMaxHeight()),l-=n[0].frUnits,c=V("/",s,Math.max(l,1)),n.shift();this.frToPxCache.set(t,V("max",q(0),c))}return this.frToPxCache.get(t)??null}};function fl(e,t,r,o,n){let i=t.cache.getVerticalStackLayoutInfo(e.id);if(i)return i;let a=mR(e,t,r,o,n);return t.cache.setVerticalStackLayoutInfo(e.id,a),a}function mR(e,t,r,o,n){let i=Td(e),a=It(i),s=V("-",r(e),Ze(e)+Ot(e)),l=zt(s),c=new Map,p=new Map,m=[],d=0;for(let f of Do(e)){if(!(Ye(f)&&vt(f)))continue;let h=to(f,e,t.tree,!1);if(h===!1)continue;if(ul(h)){p.set(f.id,{columnIndex:Math.max(m.length-1,0),columnItemIndex:Math.max(m[m.length-1]?.length??0,0)});continue}let g=fR(f,t,r,o,n);if(e.stackWrapEnabled){let C=zt(g.type==="fr"?g.getMinHeight():g.getHeight());Math.ceil(d+a+C)>Math.ceil(l)||m.length===0?(m.push([g]),d=C):(m[m.length-1].push(g),d+=a+C)}else m[0]=m[0]??[],m[0].push(g);c.set(f.id,{columnIndex:m.length-1,columnItemIndex:m[m.length-1].length-1})}return new Id(m,c,p,a,s)}function fR(e,t,r,o,n){if(e.heightType===3){let i={nodeId:e.id,type:"fr",frUnits:e.height,getMinHeight:()=>t.cache.memo(`stack-getMinHeight-${e.id}`,()=>o(e)),getMaxHeight:()=>t.cache.memo(`stack-getMaxHeight-${e.id}`,()=>n(e)),getMinHeightPerFr:()=>t.cache.memo(`stack-getMinHeightPerFr-${e.id}`,()=>V("/",i.getMinHeight(),i.frUnits)),getMaxHeightPerFr:()=>t.cache.memo(`stack-getMaxHeightPerFr-${e.id}`,()=>V("/",i.getMaxHeight(),i.frUnits))};return i}else return{nodeId:e.id,getHeight:()=>t.cache.memo(`stack-getHeight-${e.id}`,()=>r(e)),type:"regular"}}function Td(e){return Ta(e)?_t(e.gap):0}function Jv(e,t){if(e.textFitViewBoxSize)throw new ee;let r=e.widthType!==2,o=0;for(let[n,i]of e.getProsemirrorTextBlocks(!1).entries()){let a,[s,l]=yR(i,t);if(l==="px")a=s;else{let m=l==="%"?s/100:s;a=hR(i,t)*m}let c=0;n>0&&(c=SR(i,e,t)??0);let p=1;if(r){let m=i.attrs.tag;m==="h1"||m==="h2"||m==="h3"||m==="h4"||m==="h5"||m==="h6"?p=1:m==="p"||m==="div"?p=5:Dt(m)}o+=c+a*p}return o}function hR(e,t){let r=gR(e,t);return e.descendants(o=>{if(o.type!==j.nodes.text)return;let i=o.marks.find(bo)?.attrs.inlineStyles.fontSize;if(D(i))throw new ee;if(k(i))return;let[a,s="px"]=dc(i)?i:[i],l=uc(a,s,"px");l>r&&(r=l)}),r}function gR(e,t){if(Xr(e)){let r=e.attrs.textStylePreset,o=t.getNodeWithTrait(r,fo);if(o){let[n,i]=gi(o.fontSize)?go(o.fontSize):[o.fontSize,"px"];return i==="rem"?Vu(n*Ma,0):n}}if(!k(e.attrs.inlineStyles.fontSize)){let r=e.attrs.inlineStyles.fontSize;if(D(r))throw new ee;let[o,n="px"]=dc(r)?r:[r];return uc(o,n,"px")}return go(pc.fontSize)[0]}function yR(e,t){if(Xr(e)){let r=e.attrs.textStylePreset,o=t.getNodeWithTrait(r,fo);if(o)return o.lineHeight}return k(e.attrs.blockStyles.lineHeight)?pc.lineHeight:e.attrs.blockStyles.lineHeight}function SR(e,t,r){if(Xr(e)){let o=e.attrs.textStylePreset,n=r.getNodeWithTrait(o,fo);if(n)return n.paragraphSpacing}return t.paragraphSpacing}var CR=ge("simulateHeight"),vR=200;function Xv(e,t){try{let r=Re(e,t);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof ee)return;CR.reportError(r,{nodeId:e.id});return}}function Re(e,t){let r=t.cache.getHeight(e.id);if(r!==void 0)return r;if(t.workInProgress.isComputingHeightFor(e.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let o;try{t.workInProgress.startComputingHeightFor(e.id),o=bR(e,t)}finally{t.workInProgress.finishComputingHeightFor(e.id)}return t.cache.setHeight(e.id,o),o}function bR(e,t){if(!Ln(e))throw new ee;let r=t.tree.getNodeParent(e);if(Fe(e))return q(Yt);if(y(Ye(e)&&vt(e),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),vn(e)){let n=t.tree.getRect(e).height;return Ei(u`${x.componentViewport}?.height || ${n}`,n)}if(gc(e))return Xe.startFromRowHeightMultipliedBySpan(e,t).getWithConstraints();if(!xn(e,r)&&Ct(e)&&e.top!==null&&e.bottom!==null)return(Mr(e)?Xe.startFromFixedValue(q(Yt),e,t):Xe.startFromParentOuterHeight(e,t)).op((i,a)=>{let s=a.top,l=a.bottom;return y(s!==null&&l!==null,"Satisfying TypeScript"),V("-",i,q(s+l))}).getWithConstraints();if(e.heightType===0)return Xe.startFromFixedValue(q(e.height),e,t).getWithConstraints();if(e.heightType===1){y(r,"A node can\u2019t have a % height without a parent");let n;return Mr(e)?n=Xe.startFromFixedValue(q(Yt),e,t):Go(e)?n=Xe.startFromParentOuterHeight(e,t):Ft(r)&&Bo(e)?n=Xe.startFromRowHeightMultipliedBySpan(e,t):n=Xe.startFromParentInnerHeight(e,t),n.op((i,a)=>V("*",i,q(a.height))).getWithConstraints()}if(e.heightType===4)return Xe.startFromFixedValue(q(e.height*Yt),e,t).getWithConstraints();if(e.heightType===3){if(y(!Go(e)&&!Mr(e),"FractionOfFreeSpace height is not supported for fixed or absolute node"),y(r,"A node can\u2019t have a fractional height without a parent"),!_r(r)&&Ft(r)){let n=hl(e,t);if(!n)throw new ee;return n}if(y(_r(r),"A node can have a fractional height only if it\u2019s inside a stack"),y(r.stackDirection,"A stack must have a direction defined"),D(r.stackDirection))throw new ee;if(r.stackDirection==="horizontal")return Xe.startFromParentInnerHeight(e,t).op((n,i)=>V("*",n,q(i.height))).getWithConstraints();if(r.stackDirection==="vertical"){y(Ye(r)&&vt(r),"A stack must have a size and size-dimension type");let n=fl(r,t,l=>Re(l,t),l=>gl(l,t),l=>yl(l,t)),i=n.findCoordinates(e.id);y(i,"Node must be found in stack");let a=n.getFrToPxForColumn(i.columnIndex);y(a,"frHeight must be available for column");let s=V("*",a,q(e.height));return Xe.startFromFixedValue(s,e,t).getWithConstraints()}$(r.stackDirection)}if(e.heightType===2){let n=hl(e,t);if(!n)throw new ee;return n}$(e.heightType)}var ro,Bi,ti,Oi,Qt,Nd,wd,qv,xd,jt=class jt{constructor(t,r,o,n){_(this,ro);_(this,Bi);_(this,ti);_(this,Oi);se(this,ro,t),se(this,Bi,r),se(this,ti,o),se(this,Oi,n)}static startFromFixedValue(t,r,o){return new jt(t,()=>{var i,a;let n=o.tree.getNodeParent(r);if(y(n,"Can\u2019t calculate the parent height on a node without a parent"),y(Ye(n)&&vt(n),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),Ft(n)){let s=et(i=jt,Qt,Nd).call(i,r,n,o);return et(a=jt,Qt,wd).call(a,s,r,n)}else return Re(n,o)},r,o)}static startFromParentOuterHeight(t,r){let o=r.tree.getNodeParent(t);y(o,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let n=Re(o,r);return new jt(n,()=>n,t,r)}static startFromParentInnerHeight(t,r){let o=r.tree.getNodeParent(t);y(o,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let n=V("-",Re(o,r),Ze(o)+Ot(o));return new jt(n,()=>n,t,r)}static startFromRowHeightMultipliedBySpan(t,r){var a,s;let o=r.tree.getNodeParent(t);y(o&&Ft(o),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let n=et(a=jt,Qt,Nd).call(a,t,o,r),i=et(s=jt,Qt,wd).call(s,n,t,o);return new jt(i,()=>i,t,r)}op(t){return se(this,ro,t(I(this,ro),I(this,ti))),this}getWithConstraints(){var t;return se(this,ro,et(t=jt,Qt,qv).call(t,I(this,ro),I(this,ti),I(this,Oi),I(this,Bi))),I(this,ro)}};ro=new WeakMap,Bi=new WeakMap,ti=new WeakMap,Oi=new WeakMap,Qt=new WeakSet,Nd=function(t,r,o){if(y(r.gridRowHeightType!==void 0,"A grid node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed")return y(r.gridRowHeight!==void 0,"A fixed-height grid node must have gridRowHeight defined"),q(r.gridRowHeight);if(r.gridRowHeightType==="fit"){let n=en(r,o);if(n.isEmpty())return q(0);let i=n.findCoordinates(t.id);y(i,"Node must be found in the grid layout");let a=i.rowIndex;return Kv(o,n,a)}else if(r.gridRowHeightType==="auto"){let n=Re(r,o),i=V("-",n,Ze(r)+Ot(r)),a=en(r,o).rowCount,s=_t(r.gap),l=It(s),c=(a-1)*l;return V("/",V("-",i,c),a)}else $(r.gridRowHeightType)},wd=function(t,r,o){let n=pl(r,o),i=_t(o.gap),a=It(i);return V("+",V("*",t,n),a*(n-1))},qv=function(t,r,o,n){var a,s;let i=t;return Io(r)&&(r.maxHeight&&(i=et(a=jt,Qt,xd).call(a,"maxHeight",i,r,o,n)),r.minHeight&&(i=et(s=jt,Qt,xd).call(s,"minHeight",i,r,o,n))),i},xd=function(t,r,o,n,i){let a=t==="minHeight"?"max":"min",[s,l]=Ci(o[t]);if(l==="%"){let c=n.tree.getNodeParent(o);if(y(c,"parentNode must exist for a node with percentage min-max heights"),vt(c)&&c.heightType===2)return r;let p=i();return V(a,r,V("*",p,s/100))}else{if(l==="px")return V(a,r,s);if(l==="vh")return V(a,r,Yt*s/100);$(l)}},_(jt,Qt);var Xe=jt;function hl(e,t){return t.cache.memo(`autoHeight-${e.id}`,()=>IR(e,t))}function IR(e,t){if(xe(e)){let r=Jv(e,t.tree);return Xe.startFromFixedValue(q(r),e,t).getWithConstraints()}if(U(e)){let r=e.getIntrinsicSize(P).height??vR;return Xe.startFromFixedValue(q(r),e,t).getWithConstraints()}if(_r(e)){if(y(e.stackDirection,"A stack must have a direction defined"),D(e.stackDirection))throw new ee;if(e.stackDirection==="horizontal"){if(e.stackWrapEnabled)throw new ee;{let r=TR(e,t);return Xe.startFromFixedValue(r,e,t).op((o,n)=>V("+",o,Ze(n)+Ot(n))).getWithConstraints()}}else if(e.stackDirection==="vertical"){let r=NR(e,t),o=wR(e,t,r);return Xe.startFromFixedValue(o,e,t).op((n,i)=>V("+",n,Ze(i)+Ot(i))).getWithConstraints()}else $(e.stackDirection)}if(Ft(e)){if(y(e.gridColumnCount!==void 0,"A grid node must have gridColumnCount"),e.gridColumnCount==="auto-fill")throw new ee;if(G(e.gridColumnCount)){y(e.gridRowHeightType!==void 0,"A grid must have gridRowHeightType defined");let r=en(e,t);if(e.gridRowHeightType==="fixed"){y(e.gridRowHeight!==void 0,"A node with gridRowHeightType: fixed must have gridRowHeight defined");let o=r.rowCount,n=_t(e.gap),i=It(n),a=(r.rowCount-1)*i,l=e.gridRowHeight*o+a;return Xe.startFromFixedValue(q(l),e,t).op((c,p)=>V("+",c,Ze(p)+Ot(p))).getWithConstraints()}else if(e.gridRowHeightType==="fit"){let o=q(0);for(let l=0;l<r.rowCount;l++){let c=Kv(t,r,l);o=V("+",o,c)}let n=_t(e.gap),i=It(n),a=(r.rowCount-1)*i,s=V("+",o,a);return Xe.startFromFixedValue(s,e,t).op((l,c)=>V("+",l,Ze(c)+Ot(c))).getWithConstraints()}else if(e.gridRowHeightType==="auto"){let o=q(0);for(let c=0;c<r.rowCount;c++)for(let p=0;p<r.columnCount;p++){let m=r.getGridItem(c,p);if(!m)continue;let d=t.tree.getNode(m);if(y(d,"Can\u2019t find grid item in the tree"),!Ye(d)||!vt(d))continue;let f;d.heightType===1||gc(d)?f=hl(d,t)??q(0):f=Re(d,t);let h=pl(d,e);if(h>1){let g=_t(e.gap),C=It(g)*(h-1);f=V("/",V("-",f,C),h)}o=V("max",o,f)}let n=V("*",o,r.rowCount),i=_t(e.gap),a=It(i),s=(r.rowCount-1)*a,l=V("+",n,s);return Xe.startFromFixedValue(l,e,t).op((c,p)=>V("+",c,Ze(p)+Ot(p))).getWithConstraints()}else $(e.gridRowHeightType)}$(e.gridColumnCount)}return null}function TR(e,t){let r=q(0);for(let o of e.children??[])!Ye(o)||!vt(o)||to(o,e,t.tree,!0)&&(o.heightType===1||o.heightType===3||(r=V("max",r,Re(o,t))));return r}function NR(e,t){if(Ye(e)&&Io(e)&&e.maxHeight!==void 0&&e.stackWrapEnabled){let r=yl(e,t),o=V("-",r,Ze(e)+Ot(e));return zt(o)}return 1/0}function wR(e,t,r){let o=Td(e),n=It(o),i=[];for(let s of Do(e)){if(!Ye(s)||!vt(s)||!to(s,e,t.tree,!0))continue;let l;switch(s.heightType){case 3:l=gl(s,t);break;case 1:l=q(0);break;case 0:case 2:case 4:l=Re(s,t);break;default:$(s.heightType)}let c=i[i.length-1]??q(0),p=V("+",c,n,l);Math.ceil(zt(p))>Math.ceil(r)||i.length===0?i.push(l):i[i.length-1]=p}return V("max",...i)??q(0)}function Kv(e,t,r){let o=q(0);for(let n=0;n<t.columnCount;n++){let i=t.getGridItem(r,n);if(!i)continue;let a=e.tree.getNode(i);if(y(a,"Can\u2019t find grid item in the tree"),!Ye(a)||!vt(a))continue;let s=a.heightType===1?hl(a,e)??q(0):Re(a,e);o=V("max",o,s)}return o}function gl(e,t){let r=q(0);return Ye(e)?Xe.startFromFixedValue(r,e,t).getWithConstraints():r}function yl(e,t){let r=q(1/0);return Ye(e)?Xe.startFromFixedValue(r,e,t).getWithConstraints():r}var xR=ge("simulateCSSWidth");function Zv(e,t){try{let r=zi(e,t);return dl(r)}catch(r){if(r instanceof ee)return;xR.reportError(r,{nodeId:e.id});return}}function zi(e,t){let r=t.cache.getCSSWidth(e.id);if(r)return r;let o=RR(e,t);return t.cache.setCSSWidth(e.id,o),o}function RR(e,t){if(!Ln(e))throw new ee;let r=t.tree.getNodeParent(e);if(Fe(e))return re(100,"vw");if(y(Ye(e)&&vt(e),`Can\u2019t calculate the width on a node ${e.id} when it doesn\u2019t have size information`),t.tree.isGroundNode(e)){if($e(e)&&he(t.tree.getScopeNodeFor(e)))return re(100,"vw");if(vn(e)||$e(e)){let n=re(100,"vw");return Mo(u`${x.componentViewport}?.width || ${n.expr}`)}else{let n=e.widthType===0,i=vo(e)&&e.usesDOMRectCached()&&e.cache.getRawDOMRect(e.id)!==null;if(!(n||i))throw new ee;return re(t.tree.getRect(e).width,"px")}}if(Mp(e))return $t.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(!xn(e,r)&&Ct(e)&&e.left!==null&&e.right!==null)return $t.startFromParentOuterWidth(e,t).op((n,i)=>{let a=i.left,s=i.right;return y(a!==null&&s!==null,"Satisfying TypeScript"),Ve("-",n,re(a+s,"px"))}).getWithConstraints();if(jp(e)&&Ct(e)&&G(e.aspectRatio)&&$f(e)==="width"){let n=Re(e,t),i=Ve("*",$v(n),re(e.aspectRatio));return $t.startFromRawValue(i,e,t).getWithConstraints()}if(e.widthType===0)return $t.startFromRawValue(re(e.width,"px"),e,t).getWithConstraints();if(e.widthType===1){y(r,"A node can\u2019t have a % width without a parent");let n;return Mr(e)?n=$t.startFromRawValue(re(100,"vw"),e,t):Go(e)?n=$t.startFromParentOuterWidth(e,t):Ft(r)?n=$t.startFromColumnWidthMultipliedBySpan(e,t):n=$t.startFromParentInnerWidth(e,t),n.op((i,a)=>Ve("*",i,re(a.width))).getWithConstraints()}if(e.widthType===3){let n=t.tree.getNodeParent(e);if(y(n,"A node can\u2019t have a fractional width without a parent"),Ft(n))return $t.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(y(_r(n),"A node can have a fractional width only if it\u2019s inside a stack"),y(n.stackDirection,"A stack must have a direction defined"),n.stackDirection==="horizontal")return Yv(e,n.stackWrapEnabled??!1,t);if(n.stackDirection==="vertical")return Qv(e,t);if(D(n.stackDirection)){let i=Yv(e,n.stackWrapEnabled??!1,t),a=Qv(e,t);if(Nt(i,a))return i;let s=t.getVariableBinding(n.stackDirection,n);if(!s)throw new ee;let l=u`${s} === "row"`,c=u`${l} ? ${dl(i)} : ${dl(a)}`;return Mo(c)}$(n.stackDirection)}if(e.widthType===2){if(Io(e)&&e.maxWidth){let[n,i]=Ci(e.maxWidth);return re(n,i)}throw new ee}if(e.widthType===4){let n=re(e.width*100,"vw");return $t.startFromRawValue(n,e,t).getWithConstraints()}$(e.widthType)}function Yv(e,t,r){return t?$t.startFromParentInnerWidth(e,r).getWithConstraints():$t.startFromParentInnerWidth(e,r).subtractSiblingWidths().getWithConstraints()}function Qv(e,t){return $t.startFromParentInnerWidth(e,t).op((r,o)=>Ve("*",r,re(o.width))).getWithConstraints()}var Ne,ri,ar,tn,sr,eb,tb,Rd,kd,Zt=class Zt{constructor(t,r,o,n){_(this,Ne);_(this,ri);_(this,ar);_(this,tn);se(this,Ne,t),se(this,ri,r),se(this,ar,o),se(this,tn,n)}static startFromRawValue(t,r,o){return new Zt(t,()=>{let n=o.tree.getNodeParent(r);return y(n,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),zi(n,o)},r,o)}static startFromParentOuterWidth(t,r){let o=r.tree.getNodeParent(t);y(o,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let n=zi(o,r);return new Zt(n,()=>n,t,r)}static startFromParentInnerWidth(t,r){var i;let o=r.tree.getNodeParent(t);y(o,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let n=zi(o,r);return n=et(i=Zt,sr,Rd).call(i,n,o,r),new Zt(n,()=>n,t,r)}static startFromColumnWidthMultipliedBySpan(t,r){var a,s;let o=r.tree.getNodeParent(t);y(o&&Ft(o),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),y(Bo(t),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let n=et(a=Zt,sr,eb).call(a,o,r),i=et(s=Zt,sr,tb).call(s,n,o,t.gridItemColumnSpan??1,r);return new Zt(i,()=>i,t,r)}subtractSiblingWidths(){let t=I(this,tn).tree.getNodeParent(I(this,ar));y(t&&_r(t),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let r=[],o=[],n=[],i=[],a=0;for(let d of Do(t)){let f=to(d,t,I(this,tn).tree,!1);if(f!==!1&&!ul(f))switch(y(Ye(d)&&vt(d),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),a++,d.widthType){case 0:{r.push(d);break}case 1:{o.push(d);break}case 3:{n.push(d);break}case 4:{i.push(d);break}case 2:throw new ee;default:$(d.widthType)}}let l=1-o.reduce((d,f)=>d+f.width,0);l!==1&&se(this,Ne,Ve("*",I(this,Ne),re(l)));let c=r.reduce((d,f)=>d+f.width,0);c>0&&se(this,Ne,Ve("-",I(this,Ne),re(c,"px")));let p=i.reduce((d,f)=>d+f.width*100,0);if(p>0&&se(this,Ne,Ve("-",I(this,Ne),re(p,"vw"))),D(t.gap)){let d=I(this,tn).getVariableBinding(t.gap,t);if(d){let f=Mo(ye`${u`${d} * ${a-1}`}px`);se(this,Ne,Ve("-",I(this,Ne),f))}}else{let f=zn(t.gap)*(a-1);f!==0&&se(this,Ne,Ve("-",I(this,Ne),re(f,"px")))}let m=n.reduce((d,f)=>d+f.width,0);return se(this,Ne,Ve("/",I(this,Ne),re(m))),se(this,Ne,Ve("*",I(this,Ne),re(I(this,ar).width))),se(this,Ne,Ve("max",I(this,Ne),re(1,"px"))),this}op(t){return se(this,Ne,t(I(this,Ne),I(this,ar))),this}getWithConstraints(){var t,r;return Io(I(this,ar))?(I(this,ar).maxWidth&&se(this,Ne,et(t=Zt,sr,kd).call(t,"maxWidth",I(this,Ne),I(this,ri),I(this,ar))),I(this,ar).minWidth&&se(this,Ne,et(r=Zt,sr,kd).call(r,"minWidth",I(this,Ne),I(this,ri),I(this,ar))),I(this,Ne)):I(this,Ne)}};Ne=new WeakMap,ri=new WeakMap,ar=new WeakMap,tn=new WeakMap,sr=new WeakSet,eb=function(t,r){var o;if(y(t.gridColumnWidthType!==void 0,"A grid node must have a gridColumnWidthType defined"),t.gridColumnWidthType==="fixed")return y(t.gridColumnWidth!==void 0,"A grid node with fixed width columns must have a gridColumnWidth defined"),re(t.gridColumnWidth,"px");if(t.gridColumnWidthType==="minmax"){if(t.gridColumnCount==="auto-fill")throw new ee;let n=zi(t,r);if(n=et(o=Zt,sr,Rd).call(o,n,t,r),y(t.gridColumnCount!==void 0,"A grid node must have a gridColumnCount defined"),D(t.gap)){let i=r.getVariableBinding(t.gap,t);if(i){let a=Mo(ye`${u`${i} * ${t.gridColumnCount-1}`}px`);n=Ve("-",n,a)}}else{let a=zn(t.gap)*(t.gridColumnCount-1);a!==0&&(n=Ve("-",n,re(a,"px")))}return t.gridColumnCount>1&&(n=Ve("/",n,re(t.gridColumnCount))),t.gridColumnMinWidth&&(n=Ve("max",n,re(t.gridColumnMinWidth,"px"))),n}else $(t.gridColumnWidthType)},tb=function(t,r,o,n){if(o===1)return t;let i;if(G(o)){if(r.gridColumnCount==="auto-fill")throw new ee;y(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=Math.min(o,r.gridColumnCount)}else if(o==="all"){if(r.gridColumnCount==="auto-fill")throw new ee;y(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=r.gridColumnCount}else{if(D(o))throw new ee;$(o)}if(i>1&&(t=Ve("*",t,re(i))),D(r.gap)){let a=n.getVariableBinding(r.gap,r);if(a){let s=Mo(ye`${u`${a} * ${i-1}`}px`);t=Ve("+",t,s)}}else{let s=zn(r.gap)*(i-1);s!==0&&(t=Ve("+",t,re(s,"px")))}return t},Rd=function(t,r,o){if(!bi(r))return t;let n;if(D(r.padding)){let i=o.getVariableBinding(r.padding,r);i&&(n=Mo(ye`${u`${i} * 2`}px`))}else r.paddingPerSide?n=re((r.paddingLeft??0)+(r.paddingRight??0),"px"):n=re((r.padding??0)*2,"px");return n?Ve("-",t,n):t},kd=function(t,r,o,n){let i=t==="minWidth"?"max":"min",[a,s]=Ci(n[t]);if(s==="%"){let l=o();return Ve(i,r,Ve("*",l,re(a/100)))}else return Ve(i,r,re(a,s))},_(Zt,sr);var $t=Zt;var kR=ge("simulateYPosition");function ob(e,t){try{let r=Po(e,t);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof ee)return;kR.reportError(r,{nodeId:e.id});return}}function Po(e,t){let r=t.cache.getYPosition(e.id);if(r)return r;let o=VR(e,t);return t.cache.setYPosition(e.id,o),o}function VR(e,t){if(!Ln(e))throw new ee;let r=t.tree.getNodeParent(e);if(!(Ct(e)&&_a(e))){if(Fe(e))return q(0);y(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(t.tree.isGroundNode(e)){if($e(e)&&he(t.tree.getScopeNodeFor(e)))return q(0);if(vn(e)||$e(e))return Ei(u`${x.componentViewport}?.y || 0`,0);throw new ee}let o=FR(e,r,t);if(o==="fixed"){if(e.top!==null)return q(e.top);if(e.bottom!==null){let n=Re(e,t);return V("-",Yt-e.bottom,n)}else{let n=Re(e,t);return V("-",V("*",Yt,e.centerAnchorY),V("/",n,2))}}if(o==="absolute"){y(r&&Ct(r)&&_a(r),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let n=Po(r,t);if(e.top!==null)return V("+",n,q(e.top));if(e.bottom!==null){let i=Re(r,t),a=Re(e,t);return V("-",V("+",n,i),V("+",e.bottom,a))}else{let i=Re(r,t),a=Re(e,t);return V("+",n,V("-",V("*",i,e.centerAnchorY),V("/",a,2)))}}if(o==="sticky"||o===void 0){if(y(r&&Ct(r)&&_a(r),"relative position: parentNode for the node must exist, be pinnable, and have position type"),_r(r)){if(y(r.stackDirection,"parentNode for the node must have stackDirection"),r.stackDirection==="horizontal"){if(r.stackWrapEnabled)throw new ee;if(D(r.stackAlignment))throw new ee;let n=Re(r,t),i=V("-",n,Ze(r)+Ot(r));if(y(r.stackAlignment,"parentNode for node must have stackAlignment"),r.stackAlignment==="start")return V("+",Po(r,t),q(Ze(r)));if(r.stackAlignment==="center"){let a=Re(e,t),s=V("-",i,a);return V("+",Po(r,t),V("+",Ze(r),V("/",s,2)))}else if(r.stackAlignment==="end"){let a=Re(e,t),s=V("-",i,a);return V("+",Po(r,t),Ze(r),s)}else $(r.stackAlignment)}if(r.stackDirection==="vertical"){let n=fl(r,t,c=>Re(c,t),c=>gl(c,t),c=>yl(c,t)),i=n.findCoordinates(e.id);y(i,"Node must be found in stack layout info");let a=MR(i.columnIndex,n,t),s=DR(i.columnItemIndex,a,r,t),l=[Po(r,t),Ze(r),s];return LR(r,e,t)&&l.unshift(Yt),V("+",...l)}if(D(r.stackDirection))throw new ee;$(r.stackDirection)}if(Ft(r)){if(y(r.gridColumnCount!==void 0,"parentNode for node must have gridColumnCount"),r.gridColumnCount==="auto-fill")throw new ee;if(G(r.gridColumnCount)){let n=en(r,t);if(n.isEmpty())return V("+",Po(r,t),Ze(r));let i=n.findCoordinates(e.id);y(i,"Node must be found in the grid layout info");let a=PR(i.rowIndex,n,r,t);return V("+",Po(r,t),Ze(r),a)}$(r.gridColumnCount)}y(!1,"Relative and sticky nodes can only exist in stacks or grids")}$(o)}function MR(e,t,r){let o=[];return t.walkColumn(e,n=>{let i=r.tree.get(n);y(i&&Ye(i)&&vt(i),"column item must exist, have size, and have size dimension type");let a;if(i.heightType===3){let s=t.getFrToPxForColumn(e);y(s,"frToPx must be available for the column"),a=V("*",s,i.height)}else a=Re(i,r);o.push(a)}),o}function rb(e,t,r){return r.cache.memo(`sumAllStackChildrenHeights-${e.id}`,()=>V("+",...t)??q(0))}function DR(e,t,r,o){let n=r.stackDistribution;if(y(n,"parentNode for node must have stackDistribution"),D(n))throw new ee;let i=Re(r,o),a=V("-",i,Ze(r)+Ot(r));if(n==="start"||n==="center"||n==="end"){let s=_t(r.gap),l=It(s),c;if(n==="start")c=q(0);else{let d=rb(r,t,o),f=l*(t.length-1),h=V("-",a,V("+",d,f));c=n==="center"?V("/",h,2):h}let p=ml("+",0,e,t)??q(0),m=l*e;return V("+",c,p,m)}if(n==="space-between"||n==="space-around"||n==="space-evenly"){y(!Ta(r),"gap is not expected with stackDistribution:",r.stackDistribution);let s=rb(r,t,o),l=V("-",a,s),c=t.length,p;switch(n){case"space-between":p=V("/",l,Math.max(1,c-1));break;case"space-around":p=V("/",l,c);break;case"space-evenly":p=V("/",l,c+1);break;default:$(n)}let m;switch(n){case"space-between":m=q(0);break;case"space-around":m=V("/",p,2);break;case"space-evenly":m=p;break;default:$(n)}let d=ml("+",0,e,t)??q(0),f=V("*",p,e);return V("+",m,d,f)}$(n)}function PR(e,t,r,o){if(y(r.gridRowHeightType!==void 0,"parentNode for node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed"){y(r.gridRowHeight!==void 0,"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let n=e*r.gridRowHeight,i=_t(r.gap),a=It(i),s=e*a;return q(n+s)}if(r.gridRowHeightType==="fit"){let n=[];for(let c=0;c<e;c++)for(let p=0;p<t.columnCount;p++){let m=o.tree.get(t.getGridItem(c,p));if(!m)continue;y(Ye(m)&&vt(m),"grid child must have size and size-dimension type");let d=Re(m,o);n[c]=V("max",n[c]??q(0),d)}let i=V("+",...n)??q(0),a=_t(r.gap),s=It(a),l=e*s;return V("+",i,l)}if(r.gridRowHeightType==="auto"){let n=Re(r,o),i=V("-",n,Ze(r)+Ot(r)),a=en(r,o),s=a.rowCount,l=_t(r.gap),c=It(l),p=(a.rowCount-1)*c,m=V("/",V("-",i,p),s),d=V("*",e,m),f=e*c;return V("+",d,f)}$(r.gridRowHeightType)}function FR(e,t,r){if(ja(r.tree,e)&&e.position==="fixed")return"fixed";if(Ja(e,t)&&e.position==="absolute")return"absolute";if(Im(e,t)&&e.position==="sticky")return"sticky";if(t&&Fe(t))return"fixed";if(!(t&&po(t)))return"absolute"}function LR(e,t,r){if($e(e)&&he(r.tree.getScopeNodeFor(e))){let o=e.children?.findIndex(ho);if(k(o))return!1;let n=r.tree.getIndex(t);return o<n}return!1}var Sl=class{constructor(t,r,o){this.treeStore=t;this.variables=r;this.valueTransforms=o;T(this,"simulationContext");this.simulationContext=Ov(this.treeStore.tree,this.variables,this.valueTransforms)}getCSSWidth(t){return Zv(t,this.simulationContext)}getHeight(t){return Xv(t,this.simulationContext)}getYPosition(t){return ob(t,this.simulationContext)}getComponentViewportContext(t){let r=this.getCSSWidth(t),o,n;return Nn(t)||(o=this.getHeight(t),n=this.getYPosition(t)),{width:r,height:o,y:n}}};var Cl=class{constructor(){T(this,"ids",new Map)}create(t){let r=Te(t),o=this.ids.get(r);if(o===void 0)return this.ids.set(r,0),r;let n=o+1;return this.ids.set(r,n),`${r}-${n}`}};var vl=class{constructor(t,r,o){this.declarations=t;this.scope=r;this.primaryVariantId=o}create(t,r){if(t===!0&&k(r))return{condition:!0};if(!k(t)&&k(r))return{condition:t};if(r){if(Array.from(r.values()).every(({value:f})=>f===t))return{condition:t};let o=new Set,n=new v.Set;xr(this.scope)&&this.primaryVariantId&&ib(this.primaryVariantId,t,o,n);let i=new Map,a=new Map,s=new Map,l=AR(s),c=l(t);for(let[f,h]of r){if(xr(this.scope)&&ib(f,h.value,o,n),!h.isGesture&&h.value===t)continue;let g=h.isGesture?i:a;ER(f,l(h.value),g)}let p=[],m=[];for(let f of s.keys()){let h=s.get(f);h&&(m.push(new v(f)),p.push(Y(h)))}let d=this.declarations.dedupe("isDisplayed",new v(te.lines(u`(${new v(p.join(", "))}) => {`,xr(this.scope)&&u`if (!${v.fn(x.isBrowser)}) return true`,...this.createConditionStatementsForGroup(i,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),u`return ${c}`,u`}`)));return{condition:v.fn(d,...m),classNames:o,classNameExpressions:n}}return{condition:!0}}createConditionStatementsForGroup(t,r){if(t.size===0)return[];let o=[],n=new v(r);for(let[i,a]of t){let s=new v(i);if(a.size===1){let l=Array.from(a)[0];if(k(l))continue;o.push(u`if (${n} === ${l}) return ${s}`)}else o.push(u`if (${Array.from(a)}.includes(${n})) return ${s};`)}return o}};function ER(e,t,r){let o=Y(t),n=r.get(o)??new Set;r.set(o,n.add(e))}function AR(e){let t=new Set;return r=>{if(!xt(r))return r;let o=Y(r),n=e.get(o)??new v(qm("value",t));return e.set(o,n),n}}function nb(e){return`hidden-${Te(e)}`}function ib(e,t,r,o){if(t===!1){let n=nb(e);r.add(n)}else if(xt(t)){let n=nb(e);o.add(u`!(${t}) && ${n}`)}}var $i,rn,Wi,bl=class{constructor(t,r,o,n,i,a){this.scope=t;this.bindings=r;this.declarations=o;this.imports=n;this.variables=i;this.treeStore=a;_(this,$i,new Map);_(this,rn,null);_(this,Wi,new Map)}isLayoutTemplateRef(t){if(ot(I(this,rn))){if(se(this,rn,new Set),!zo(this.scope)||!Pp(this.scope))return!1;let r=P.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!r)return!1;let o=this.scope.getControlProps(r);for(let n in o){let i=o[n];if(k(i?.value)||D(i.value)||i.type!=="scrollsectionref")continue;let a=i.value.target;k(a)||D(a)||I(this,rn).add(a)}}return I(this,rn).has(t)}getNodeInPrimary(t){if(!t)return;let r=t.originalid?this.treeStore.tree.get(t.originalid):t;if(r)return r}scrollTargetInfo({target:t,collectionItem:r}){if(!t)return;if(pe(t))return{ref:this.variables.create(t)};let o=this.treeStore.tree.get(t);if(!o||!_o(o)||this.treeStore.treeIndex.getScopeIdFor(o.id)!==this.scope.id)return;let n=this.getNodeInPrimary(o);if(!n)return;let i=this.ref(n,r);if(i)return{ref:i,offset:o.scrollMarginTop}}ref(t,r){let o=this.getNodeInPrimary(t);if(!o)return;let n=I(this,$i).get(o.id);if(n)return n;let i=of(o,this.treeStore.tree),a=this.isLayoutTemplateRef(o.id);if(a||r||i&&i.length>0){let p=this.id(o,r);if(!p)return;let m=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return v.fn(this.declarations.component.dedupe("dynamicRef",v.fn(u`${m}<HTMLElement>`)),p)}let s=this.bindings.create("ref"),l=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=u`const ${s} = ${v.fn(u`${l}.useRef<HTMLElement>`,u`null`)}`;return this.declarations.component.create(c),I(this,$i).set(o.id,s),s}getBaseId(t,r){if(W(r)){if(_o(t)){let o=[t.id];return r&&r.id!==this.scope.id&&o.push(r.id),this.declarations.component.dedupe("elementId",v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...o))}return Te(t.id)}if(Ue(r))return ye`${x.layoutId}-${Te(t.id)}`}getPortalAncestor(t){let r=this.treeStore.tree.getParent(t.id);if(r){if(wt(t))return this.treeStore.tree.get(r.originalid??r.id);if(Fe(r)){let o=this.treeStore.tree.getParent(r.id);return this.treeStore.tree.get(o?.originalid??o?.id)}}}portalId(t){let r=this.getPortalAncestor(t);return r?this.id(r):void 0}id(t,r){let o=this.getNodeInPrimary(t);if(!o)return;let n=this.treeStore.treeIndex.getScopeIdFor(o.id),i=this.treeStore.tree.get(n);if(!W(i)&&!Ue(i))return;if(W(i)&&_o(o)){let s=rf(o,this.treeStore.tree);s&&I(this,Wi).set(o.id,s)}let a=this.getBaseId(o,i);if(a)return nf(o,this.treeStore.tree,s=>{if(s.id===o.id)return a;if(pe(r)&&r.id===s.id)return this.variables.create(r);if(Za(r)&&r.key===s.id)return r.value;if(s.type==="slug")return this.variables.create(Ia(s.id,s.providerId))})}annotation(){let t=Object.fromEntries(I(this,Wi));return Me(t)?"":JSON.stringify(t)}};$i=new WeakMap,rn=new WeakMap,Wi=new WeakMap;function OR(e){return e instanceof Error?!!Oc(e):!1}function zR(e){return E(e)?e:e instanceof Error?e.message:rt(e)?JSON.stringify(e):"Unknown error"}var Hi,Il=class{constructor(t,r,o){this.scopeId=t;this.sourceNodeId=r;this.type=o;_(this,Hi,[])}record(t,r,o){if(OR(r)){this.recordKnownError(t,r);return}I(this,Hi).push({nodeId:t.id,reason:zR(r),moduleIdentifier:be(o)?o:void 0})}get errors(){return I(this,Hi).map(t=>new gs({...t,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(t,r){if(Oc(r)){let o=new Set;r.error.forEach(n=>{o.add(n),this.record(t,"CodeError",n)}),r.missing.forEach(n=>{o.has(n)||this.record(t,"MissingModule",n)})}}};Hi=new WeakMap;function $R(e){return e==="string"||e==="vectorsetitem"}var on,Tl=class{constructor(t,r){this.modulesStore=t;this.tree=r;_(this,on,new Map)}get structure(){return Array.from(I(this,on).values())}addSection(t){if(!wc(t)||!t.customizationsSectionId)return;let r={_id:t.customizationsSectionId,_layerId:t.id,content:[]};return I(this,on).set(r._id,r),r._id}addCustomizations(t,r){if(!wc(t)||!r)return;let o=I(this,on).get(r);if(o&&(U(t)&&WR(t,o,this.tree,this.modulesStore),!!sf(t))){for(let n of t.customizations)if(xe(t))o.content.push({field:n.fieldPath,text:t.getTextContent()});else if(U(t)&&t.isVectorInstance){if(!be(t.codeComponentIdentifier))return;let i=Ti(Q(t.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!E(i))return;o.content.push({field:n.fieldPath,text:i})}I(this,on).set(r,o)}}};on=new WeakMap;function WR(e,t,r,o){let n=P.componentForIdentifier(e.codeComponentIdentifier)?.properties;if(!n)return;let i=e.getControlProps(n);for(let a in i){let s=i[a];if(!s)continue;let{type:l,value:c}=s;if(!E(l)||!$R(l))continue;let p=n[a]?.title??a;if(E(c))switch(l){case"string":t.content.push({field:p,text:c});break;case"vectorsetitem":{if(!be(c))continue;let m=Ti(Q(c),r,o)?.name;if(!E(m))continue;t.content.push({field:p,text:c});break}default:$(l,"Unknown control type")}}}var nn,Nl=class{constructor(t){this.scopeNode=t;_(this,nn,new Map)}recordClassName(t,r,o){if(!he(this.scopeNode)||t.parentid!==r||t.visible===!1||wf(t)&&t.locked)return;let n=r,i=I(this,nn).get(n)??new Set;i.add("."+o),I(this,nn).set(n,i)}annotation(){if(!he(this.scopeNode)||I(this,nn).size===0)return"{}";let t={};for(let[r,o]of I(this,nn))t[r]=Array.from(o);return JSON.stringify(t)}};nn=new WeakMap;var an,sn,oi,wl=class{constructor(t){_(this,an);_(this,sn,new Set);_(this,oi,new Map);se(this,an,{...t})}count(t,r=1){I(this,an)[t]+=r}measureLength(t,r){return(typeof r=="string"||r instanceof v)&&(I(this,an)[t]+=r.length),r}get(){if(I(this,sn).size>0){let r=Array.from(I(this,sn),o=>o.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${r}`)}let t={...I(this,an)};for(let[r,o]of I(this,oi)){let n=gy(o);t[r]+=Math.round(n.reduce((i,[a,s])=>i+(s-a),0))}return t}time(t){let r=performance.now(),o=!1,n={get metric(){return t},cancel:()=>{o||(I(this,sn).delete(n),o=!0)},done:()=>{y(!o,"Attempted to complete a cancelled timer");let i=I(this,oi).get(t);i||(i=[],I(this,oi).set(t,i)),i.push([r,performance.now()]),n.cancel()}};return I(this,sn).add(n),n}async timed(t,r){let o=this.time(t);try{return await r()}finally{o.done()}}};an=new WeakMap,sn=new WeakMap,oi=new WeakMap;var ni,xl=class{constructor(){_(this,ni,[])}add(t){let r=GR(t);r.length!==0&&I(this,ni).push(...r)}annotation(){if(I(this,ni).length===0)return;let t=new Set;for(let r of I(this,ni))t.add(JSON.stringify(r));return`[${Array.from(t).join(",")}]`}};ni=new WeakMap;function Gi(e){return E(e)&&e.length>0}function HR(e){return rt(e)?"id"in e&&Gi(e.id)&&(e.type===void 0||e.type==="click"||e.type==="form_submit"):!1}function w4(e){return rr(e)?e.every(HR):!1}function GR(e){let t=[],r=e.originalid??e.id;if(Ro(e)&&Gi(e.linkClickTrackingId)&&t.push({id:e.linkClickTrackingId,nodeId:r,type:"click"}),xe(e))for(let o of e.getLinkClickTrackingId(!1))Gi(o)&&t.push({id:o,nodeId:r,type:"click"});if(U(e)){let o=P.reactComponentForIdentifier(e.codeComponentIdentifier);if(o?.properties){let n=e.getControlProps(o.properties);for(let i in n){if(!n[i])continue;let a=n[i];a.type==="trackingid"&&Gi(a.value)&&t.push({id:a.value,nodeId:void 0,type:void 0})}}}return Vr(e)&&Gi(e.formSubmitTrackingId)&&t.push({id:e.formSubmitTrackingId,nodeId:r,type:"form_submit"}),t}var Rl=class{constructor(t,r,o,n){this.imports=t;this.treeStore=r;this.modulesStore=o;this.createBinding=n;T(this,"sets",new Set)}resolveVariableInstance(t){y(pe(t.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),y(be(t.codeComponentIdentifier),"Code component identifier must be a module");let r=Q(t.codeComponentIdentifier),o=Ti(r,this.treeStore.tree,this.modulesStore)?.set.moduleId;return o&&this.sets.add(o),this.createBinding(t.dynamicVectorSetIdentifier,t,"Icon")}resolveControl(t,r,o){return pe(t)?(this.sets.add(r.setModuleId),this.createBinding(t,o,"Icon")):(y(be(t),"Vector set item must be a module export identifier"),this.imports.addModuleImport(t))}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var Ui,_i,Vd,kl=class{constructor(){_(this,_i);_(this,Ui,new Map)}set(t,r){I(this,Ui).set(et(this,_i,Vd).call(this,t),r)}get(t){return I(this,Ui).get(et(this,_i,Vd).call(this,t))}};Ui=new WeakMap,_i=new WeakSet,Vd=function(t){return t.originalid??t.id};var Md=class{constructor(t,r){this.imports=t;this.declarations=r;T(this,"links",new Map);T(this,"scrollSectionRefs",new Map)}collect(t,r,o,n){if(!Zu(n))return;let i=t==="link"?this.links:this.scrollSectionRefs,a=i.get(r)??new Set;a.add(o),i.set(r,a)}collectLink(t,r,o){return this.collect("link",t,r,o),o}collectScrollSectionRef(t,r,o){return this.collect("scrollSectionRef",t,r,o),o}values(t){let r=[],o={},n=u`resolvedLinks`,i=this.links.get(t);if(i?.size)for(let s of i)o[s]=u`${n}[${r.length}]`,r.push(u`props[${s}]`);let a=this.scrollSectionRefs.get(t);if(a?.size){let s=this.declarations.component.dedupe("siteRef",v.fn(this.imports.addImport("framer",{exportSpecifier:"useSiteRefs"})));for(let l of a)o[l]=v.fn(s,u`${n}[${r.length}]`),r.push(u`props[${l}]`)}if(!Me(o))return{ResolveLinks:this.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),binding:n,links:r,props:o}}};function sb(e,t,r){let o=new cs(r);return{bindings:r,imports:t,declarations:o,tree:e.tree,modulesStore:e.stores.modulesStore,assets:new ko(e.stores.assetStore.assetMap),unresolvedLinks:new Md(t,o),wideGamutColors:new En}}function _R(e,t){let r={};for(let o in e)r[o]=t(o);return r}function jR(e){return(t,r,o)=>{if(k(r))return t;let n=_R(r,o);if(!n||!rt(n)||Me(n))return t;let i=e.declarations.file.dedupe("getLocalizedValue",u`(values, locale) => {${u.joinLines(u`while (locale) {${u.joinLines(u`const value = values[locale.id]`,u`if (value) return value`,u`locale = locale.fallback`)}}`)}}`),a=e.imports.addImport("framer",{exportSpecifier:"useLocaleInfo"}),{activeLocale:s}=e.declarations.component.dedupe({activeLocale:void 0},v.fn(a)),l=e.declarations.file.dedupe("localizedValues",n);return u`${v.fn(i,l,s)} ?? ${t}`}}function lb(e,t,r,o,{declarations:n,tree:i,modulesStore:a,assets:s,imports:l,unresolvedLinks:c,wideGamutColors:p}){let m=jR({declarations:n,imports:l});return rs(t,r,{resolveAsset:(d,f,h,g)=>{let S,C=hn(f)?f.__defaultAssetReference:void 0;return d!==C&&(S=(g?s.resolveResponsiveImage(d,void 0):s.resolve(d))?.src),!Wa(h)||k(S)?S:m(S,h.valueLocalized,N=>{let b=h.valueLocalized?.[N]?.value;return Ca(b)?void 0:b===C?u`undefined`:(g?s.resolveResponsiveImage(d,void 0):s.resolve(d))?.src})},resolveResponsiveImage:(d,f,h)=>{let g,S,C;if(ba(f)&&va(f.__vekterDefault)?(g=f.__vekterDefault.assetReference,S=f.__vekterDefault.positionX,C=f.__vekterDefault.positionY):hn(f)&&(g=f.__defaultAssetReference),d===g&&h.positionX===S&&h.positionY===C)return;let N=v.fromValue(s.resolveResponsiveImage(d,void 0,h)),b=m(N,h.valueLocalized,w=>{let M=h.valueLocalized?.[w];if(!$a(M))return;if(M.value===g&&M.imageFocalPoint?.positionX===S&&M.imageFocalPoint?.positionY===C)return u`undefined`;let L=s.resolveResponsiveImage(M.value,void 0,M.imageFocalPoint);return v.fromValue(L)});return v.fn(n.file.dedupe("wrapInAddImageAlt",ey),b,m(h.alt??ts,h.altLocalized,w=>h.altLocalized?.[w]?.value))},resolveDynamicValue:(d,f)=>{},resolveLink:(d,f)=>{if(Pt(f.value))return;let h=$o(f.value);if(!k(h)){if(Jr(h)){let g=f.valueLocalized;return g?m(h.url,g,S=>g[S]?.value):h.url}return c.collectLink(o,d,{href:Nc(h,i,a)})}},resolvePageScope:d=>{},resolveLocalizedValue:(d,f)=>m(d,f,h=>f?.[h]?.value),compileRichText:(d,f)=>{let g={collectors:{imports:l,assets:s,links:{create:C=>{if(!(k(C)||pe(C)))return Jr(C)?C.url||void 0:Nc(C,i,a)}}},nodeId:e.originalid??e.id,useCreateElement:!0},S=n.file.dedupe("text",yr(d,g));return m(S,f,C=>{if(!f)return;let N=f[C];if(!N)return;let b=N.value;if(E(b))return yr(b,g)})},resolveFont:d=>Ga(d)?Ua(d):{},resolveScrollSectionRef:(d,f)=>{if(k(f)||pe(f)||!E(f.target))return;let{target:h,collectionItem:g}=f;if(!h||pe(h))return;let S={type:"webPage",webPageId:e.id,hash:h,hashVariables:Za(g)?{[g.key]:g}:void 0};return c.collectScrollSectionRef(o,d,{href:{...af(S,i,a),webPageId:e.id},refKey:!0})},resolveCustomCursor:(d,f)=>{if(!(k(f)||pe(f)))return Ym(f,i)},resolveVectorSetItem:d=>{if(!(k(d)||pe(d)))return l.addModuleImport(d,{absolute:!0})},resolveColor:d=>p.resolveColor(d)})}function cb(e,t,r,o=void 0){if(!r&&!o)return;let n=o??Wg(r??[]);n.length&&qg.resetPropertiesToMasterValues(e,t,n)}function JR(e){let t=[];for(let r in e){let o=e[r];o&&t.push({hash:Te(r),mediaQuery:Uh(o)})}return t}function XR(e,t,r,o){let n=new A({routeId:u`routeId`,style:u`style`,key:Y(e)});A.addSpreadAtStart(n,u`props`);let i=u`${o.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.createElement`;if(!r)return Pd(t,u`return ${v.fn(i,e,n,u`children(true)`)};`);A.assign(n,r.props);let{ResolveLinks:a,binding:s,links:l}=r;return Pd(t,u`return ${v.fn(i,a,new A({links:l},1),u`(${s}) => ${v.fn(i,e,n,u`children(true)`)}`)};`)}function P8(e,t){let r=[];for(let o of t){if(!W(o)||!zo(o))continue;let n=Q(o.layoutTemplateIdentifier);if(!Mt(n)||n.type!=="layoutTemplate")continue;let i=e.getNodeWithTrait(n.localIdName,he);i&&r.push(i)}return r}function F8(e,t,r,o){let n={},i={},a={},s=new Map,l={},c=sb(e,r,o),p=c.bindings.create("props"),m={},d=new Set,f=c.bindings.create("Template"),h=e.tree.getNodeWithTrait(e.tree.root.homePageNodeId,W);if(!W(h))return;for(let b of[h,...t]){if(!W(b,!0)||!zo(b)||d.has(b.id))continue;let w=Q(b.layoutTemplateIdentifier);if(!Mt(w)||w.type!=="layoutTemplate")continue;let M=e.tree.getNodeWithTrait(w.localIdName,he);if(!M)continue;d.add(b.id);let F=e.stores.modulesStore.getPersistedModuleByLocalId(w.localId)?.moduleURL;y(F,"An applied Layout Template must have a module URL.");let H=e.stores.modulesStore.forType("layoutTemplate").getByLocalId(w.localId).annotations(P.componentForIdentifier(b.layoutTemplateIdentifier),w.exportSpecifier)?.framerBreakpoints;fp(H)&&s.set(w.localIdName,H);let z=P.componentForIdentifier(b.layoutTemplateIdentifier)?.properties;y(z,"An applied Layout Template must have controls.");let J=lb(b,z,b.getControlProps(z),M.id,c),me=m[M.id],fe=eo(J,me?.value,"js");if(me?.value&&!Me(J)&&(!fe||Me(fe)))l[b.id]=me.binding;else if(Dr(fe)&&!Me(fe)){let le=c.declarations.component.dedupe("props",qR(fe,me));l[b.id]=le,m[M.id]??={binding:le,value:fe}}n[b.id]=w.localIdName;let de=i[w.localIdName]??[];de.push(b.id),i[w.localIdName]=de,!(w.localIdName in a)&&(a[w.localIdName]=c.imports.addImport(F,{exportSpecifier:"default",importBinding:Zp(M.name??"Template")}))}if(Me(i))return;let g=[],S=[];for(let b in i){let w=i[b],M=a[b];if(!M||!w)continue;g.push(XR(M,w,c.unresolvedLinks.values(b),c.imports));let L=s.get(b);L&&S.push(Pd(w,u`return ${JR(L)}`))}let C=c.declarations.component.dedupe("templateProps",l),N=c.wideGamutColors.getWideGamutColorRules("body");return{binding:f,css:N.length?`@supports (color: color(display-p3 1 1 1)) { ${N.join(" ")} }`:"",declarations:u.joinLines(...c.declarations.file.list(),u`function ${f}({routeId, children, style, ...rest}) {${u.joinLines(...c.declarations.component.list(),u`const ${p} = ${C}[routeId] ?? {}`,u`switch (routeId) {${u.joinLines(...g,u`default: { return children(false) }`)}}`)}}`,u`export function getLayoutTemplateBreakpoints(routeId) {${u.joinLines(u`switch (routeId) {${u.joinLines(...S,u`default: { return undefined }`)}}}`)}`)}}function qR(e,t){if(!t)return e;let r=new A(e);return A.addSpreadAtStart(r,t.binding),r}function KR(e){let t=e.getPrimaryVariant();if(!(!t||!wn(t)))return t.children.findIndex(r=>ho(r))}function Pd(e,t){return u.joinLines(...e.map(r=>u`case ${r}:`),t)}function db(e){return hi(e)&&e.layout==="stack"&&e.stackDirection==="vertical"}function YR(e,t){if(!xr(t))return;t.getPrimaryVariant().set(vm),cb(e,t.getReplicaVariants(),["layout","padding"])}function Vl(e){return db(e.getPrimaryVariant())&&e.getReplicaVariants().every(db)}function QR(e){let t=new Set,r=new Set;for(let o of e.tree.root.children){if(o.id===e.tree.root.homePageNodeId||!W(o)||!k(o.layoutTemplateIdentifierOverride))continue;let n=e.stores.modulesStore.forType("screen").getByStableName(o.id)?.annotations(P.componentForIdentifier(o.instanceIdentifier),"default")?.framerAcceptsLayoutTemplate;if(np(n)){n===!1&&t.add(o.id);continue}if(o.isLoaded()){Vl(o)===!1&&t.add(o.id);continue}r.add(o.id)}return{incompatible:t,shallow:r}}async function ZR(e,t){let r=new Set,o=Array.from(t).map(i=>e.tree.getNodeWithTrait(i,W)),n=await e.tree.loadScopes(o);for(let i of n)ot(i)||Vl(i)||r.add(i.id);return r}function Dd(e,t,r,o=void 0,n=new Set){let i=Au(r),a=i?r():r,s=t.id===e.tree.root.homePageNodeId?e.tree.root:e.tree.current(t);if(!s)return;for(let d of n)e.tree.getNodeWithTrait(d,W)?.set({layoutTemplateIdentifierOverride:null});if(s.set({layoutTemplateIdentifier:a.instanceIdentifier}),YR(e.tree,t),i&&e.stores.scopeStore.select(a.id,{keepHistory:!1}),!o)return;y(a.isLoaded(),"Layout Templates: template must be loaded to add a child.");let l=KR(a),c=P.activeBundleHash;if(!c)return;let p=Kh(e.tree,e.stores.treeStore.sandboxCollectionData,c,P,o.id),m=e.tree.current(o);if(m){for(let d of m.walk()){let f=qh(e.tree,t.id,d,p);f&&d.set(f)}e.tree.moveNode(o,a.baseVariantId,l),e.selection.set(o.id)}}async function L8(e,t,r,o){if(t.id===e.tree.root.homePageNodeId){let{incompatible:n,shallow:i}=QR(e);if(i.size===0)Dd(e,t,r,o,n);else{let a=await ZR(e,i),s=new Set([...n,...a]);e.process(()=>{Dd(e,t,r,o,s)})}Gt("layout_template_apply",{onHomePage:!0})}else Dd(e,t,r,o),Gt("layout_template_apply",{onHomePage:!1})}function ek(e,t,r){if(!Array.from(t).some(a=>{let s=r.get(a);return ze(s)}))return;let n=r.get(e.parentid),i=e;for(;n;){if(t.has(n.originalid??n.id)){let a=r.get(n.originalid??n.id),s=mf(r,a),l=i.originalid??i.id;if(ze(a)&&l===s?.id)return a}i=n,n=r.get(n.parentid)}}function tk(e){return e}function rk(e){let t=new Set;return jh(e,r=>{r.providerId&&t.add(r.providerId)}),t}var Ml=(e,t,r,o)=>(n,i,a,s=tk,l=void 0)=>{if(pe(n))return s(r.create(n));if(Pt(n)){let c=s(o.createComputedValue(n,i,l));return Gu(n)?c:t.component.dedupe(a,c,ek(i,rk(n),e.tree))}$(n)};function Fd(e){if(we(e))return"screen";if(De(e))return"vector";if(Pe(e))return"design";let{type:t}=Q(e.instanceIdentifier);return t}function ub(e,t,{treeStore:r,modulesStore:o,engineChanges:n,assetMap:i},a=new Set,s=`framer-${Gn(5)}`){let l=Fd(t),c=new Kr(...a),p=new To(l,o,c);p.addImport("react",{exportSpecifier:"*",importBinding:"React"});let m=new Il(t.id,we(t)?e.id:t.id,l),d=Ms(t);pi(d!=="ContentManagement"&&d!=="Analytics"&&d!=="LocalizationGlossary","Content management, Analytics & Localization glossary nodes cannot be code-generated");let f=new cs(c),h=new as(t),g=new ko(i),S=new No(t,p,c,h,r,o,()=>{let ve=p.addImport("framer",{exportSpecifier:"useRouter"});return f.component.dedupe("router",v.fn(ve))}),C=new Ps(t,r,h,f.file,c,p,g),N=new Ds(c,h,C,g,S),b=new oy(t,h,r,p,f,N,o,l),w=new ry(f.file,f.component,p,h,b,S,N,o,l),M=new bl(t,c,f,p,h,r),L=new xl,F=new vl(f.component,t,e.id),H=Ml(r,f,h,w),z=new Ef(t,h,r,w,H),J=new tl(t,e,s,z),me=new Set,fe=new Qs(e,h,r,c,p,{type:l}),de=new Vo(f.font),le=new wl(Pm()),R=new Set,Z={dependencies:R,addDependency:ve=>R.add(ve)},ie=Ht(t)?t.getReplicaVariants():[],Ie={};if(Ue(t))for(let ve of ie)!wr(ve)||Ug(ve.gesture)||(Ie[ve.replicaInfo.inheritsFrom??ve.replicaInfo.master]=!0);let ct=new Cl,K=new Km(t,de,p,f.file,h,o,r),O=new Tl(o,r.tree),ne=new Nl(t),Ke=new Rl(p,r,o,H),Ee=new Sl(r,h,w),He=he(t)?h.create({id:"children",providerId:t.id}):void 0;return{type:"jsxContext",treeStore:r,modulesStore:o,engineChanges:n,assetMap:i,simulatedDOM:Ee,variants:ie,topLevelVariantsWithGestures:Ie,imports:p,errors:m,variables:h,fetches:N,assets:g,valueTransforms:w,elementIds:M,css:J,renderFunctions:F,events:fe,links:S,fonts:de,metrics:le,packages:Z,appearIds:ct,bindings:c,declarations:f,preload:C,localizedValues:b,componentPresetIds:me,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:K,cssVariableDefinitions:z,formIds:new Set,hitTargets:ne,createDeduplicatedDynamicValueBinding:H,trackingIds:L,vectorSets:Ke,kitSectionsStructure:O,scopeId:t.id,scopeType:d,moduleType:l,rootId:e.id,linkClassName:J.addRule({display:"block"},t),layoutTemplateSlotBinding:He,nodeRendersWithMotion:new kl,serializationId:s,acceptsLayoutTemplate:W(t)&&t.isLoaded()&&t.baseVariantId?Vl(t):void 0}}function pb({ctx:e,ancestorInfo:t,jsxAttributes:r,usedVariableIds:o,dataRepeater:n,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:s}){let l=[],c=r.subqueries,p=t.subqueries,m=By(n,i,o,g=>{if(a){let S=p;for(;S;){if(g.providerId===S.repeaterNode.id){let C=Os(S.repeaterNode),[N,b]=Oy(g.id,C);return{type:"Identifier",name:b,collection:N}}S=S.parent}}return y(e.variables,"VariableCollector is required"),l.push(g),{type:"LiteralValue",value:e.variables.create(g)}},g=>{let S=e.imports.addModuleImport(g);return y(S,"Can't import collection"),S});y(c,"Subqueries must exist");let d=c.getSubqueries(s);for(let[g,S]of d)m.select.push({type:"FunctionCall",functionName:"ARRAY",alias:g,arguments:[{type:"Select",...S}]});let f=c.getVariableDependencies(s);l.push(...f);let h=m;return a?(y(p,"Parent subqueries must exist"),p.addSubquery(s,n.originalid??n.id,m),p.addVariableDependencies(s,l)):e.preload.addQuery(n,h,l),new A({query:h,pageSize:n.collectionPaginationPageSize})}function ok(e,t){return k(e.subqueries)||t.isAnyVariantPaginated?!1:e.inRepeatedItem??!1}function mb(e,t,r,o,n){let i=o.inheritedControlMap?.get(e.id);y(i,"Primary variant control map must be defined.");let a=ok(r,o),s=pb({ctx:t,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:e,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:"primary"}),l={};for(let c of t.variants){let p=Qo(c,e.id,t.treeStore.tree)??e;y(ze(p),"Node must be a data repeater");let m=pb({ctx:t,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:p,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:c.id});dr(s,m)||(l[c.id]=m)}return a?null:{props:s,overrides:Me(l)?void 0:l}}function nk(e,t){let r=t.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(hr(e)){let o=t.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),n=u`paginatedQuery`;return u.joinLines(u`const { ${n}, paginationInfo, loadMore } = ${o}(query, pageSize, ${e.id})`,u`const data = ${v.fn(r,n)}`,u`return children(data, paginationInfo, loadMore)`)}return u.joinLines(u`const data = ${v.fn(r,u`query`)}`,u`return children(data)`)}function fb(e,t){return u`({ query, pageSize, children }) => {
        ${nk(e,t)}
    }`}function hb({renderAsListNodes:e},t){return t.parentid?e.has(t.parentid):!1}function gb(e,t,{isAnyVariantALink:r},o){let n=o?"motion.":"";return Ro(t)&&(Be(t)||r)?`${n}a`:hb(e,t)?`${n}li`:wo(t)&&t.htmlTag&&Wn(e.scopeType)?`${n}${t.htmlTag}`:`${n}${ns}`}function yb(e,t,{isAnyVariantAnEffect:r,isAnyVariantOptimizedAppearEffect:o},n){let i=[];r&&i.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),o&&i.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=t.treeStore.tree.get(n.lastRepeaterId);return jr(a)&&hr(a)&&jo(e,a)&&i.push(t.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),t.scopeType==="SmartComponent"?t.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:i}):t.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:i})}function ik(e,t){if(!bm(t.treeStore.tree,e)||!!!P.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let o=Q(e.codeComponentIdentifier);if(!be(o))return;let{importSpecifier:n,importBinding:i}=Yr(o,t.moduleType,t.modulesStore);if(!n)return;let a=t.imports.addImport(n,{exportSpecifier:"*",importBinding:`${i}Info`});return[t.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function ak(e,t,r,o){let n=[];nr(e)&&t.scopeType==="CanvasPage"&&n.push(t.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"}));let i=sk(e,t,r);i&&n.push(i);let a=nl(e,t);if(n.push(...a),i||a.length>0){let s=ik(e,t);s&&n.push(s)}return o.isAnyVariantAVariantAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),U(e)&&!e.isVectorInstance||(o.isAnyVariantAnEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),o.isAnyVariantOptimizedAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}))),n}function sk(e,t,r){let o=ol(e,t);if(!o)return;let{importSpecifier:n,exportSpecifier:i}=o,a={scopeId:t.scopeId,nodeId:e.originalid??e.id,override:t.imports.addImport(n,{exportSpecifier:i}),inComponentSlot:r.inComponentSlot?!0:void 0};return[t.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function lk(e,t){if(e.kind!=="localModuleExport")return;let{localId:r}=e,n=t.modulesStore.getPersistedModuleByLocalId(r)?.metadata.packageDependencies;Array.isArray(n)&&n.forEach(i=>{E(i)&&t.packages.addDependency(i)})}function Sb(e,t){let r=xs(e,P);if(!r)return;let o=Ae("prototype",r);return t.imports.addImport(`../${o}`,{exportSpecifier:"default",importBinding:"Prototype"})}function ck(e){switch(e){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let t=e;return!0}case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let t=e;return!1}default:$(e)}}function Cb(e,t,r,o){if(!ck(e.__class))throw Error(`jsxTagNameForNode: ${e.__class} does not support serialization to JSX.`);let n=ak(e,t,r,o);switch(e.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return t.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:n});case"TextNode":return t.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:n});case"RichTextNode":return t.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:n});case"FrameNode":{if(Vr(e))return t.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:n});if(fr(e)||o.isAnyVariantAnImage)return t.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:n});let i=t.nodeRendersWithMotion.get(e);y(!k(i),"Node must have had `rendersWithMotion` computed for it.");let a=gb(t,e,o,i);return i?t.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:n}):new v(a)}case"CodeComponentNode":{if(y(So(e),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),kC(e))return t.imports.addImport("framer",{exportSpecifier:VC(e)});if(yn(e)||o.identifiers&&o.identifiers.size>1)return t.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:n});let i=Q(e.codeComponentIdentifier);if(!be(i)){let c=bu(e.codeComponentIdentifier);return y(c,"A package must have module information to be included in code-generation."),t.packages.addDependency(c.packageName),t.imports.addImport(c.moduleURL,{exportSpecifier:c.exportIdentifier,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}y(be(i),"A code component that is not a package must be a module.");let{importSpecifier:a,exportSpecifier:s,importBinding:l}=Yr(i,t.moduleType,t.modulesStore);return y(a,"A module must have an import specifier."),lk(i,t),t.fonts.addFontReference({componentIdentifier:e.codeComponentIdentifier,fontReference:t.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),t.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:n})}case"OverlayNode":return u`${t.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.Fragment`;case"FormBooleanInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:n});case"FormPlainTextInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:n});case"FormSelectNode":return t.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:n});default:$(e.__class)}}function vb(e,t){if(mt(t)){let r=e.dataForIdentifier(t.dataIdentifier);return y(r,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:t.id,annotations:r.annotations}}if(qo(t))return{id:t.id,annotations:void 0};$(t,"A data repeater must have either an identifier or array variable")}function dk(e,t,r){let o=[];for(let n of t){if(Ic(n))continue;let i=r?.get(n);if(!i)continue;let a=Jo(n,e.id,!1),s=nm(i.type);Dr(s)&&o.push(u`${a} ??= ${s}`)}return o}function uk(e,t,r,o){if(mt(e)){let n=r?.framerRecordIdKey;return n?t.variables.create(Ia(n,e.id)):o}return t.bindings.create("id")}function pk(e,t){if(mt(e))return t.bindings.createWithNode("collection",e);if(qo(e))return t.variables.create(e.dataRepeaterArray);$(e,"parent should be a collection or array repeater")}function mk(e,t,r,o,n){let i=mt(e)?{}:{[ty]:t};for(let a of r)Ic(a)||(i[a]=Jo(a,e.id,!1));if(mt(e)){y(o,"Subqueries must exist");for(let a of o.childRepeaterIds){let s=n.treeStore.tree.get(a);y(s,"Repeater node must exist");let l=n.bindings.createWithNode("collection",s);i[a]=l}}return i}function bb(e,t,r,o,n){let i=uk(e,o,t,n),a=pk(e,o),s=o.variables.variableIdsByProviderId.get(e.id)??new Set,l=mk(e,i,s,r.subqueries,o),c=r.inheritedControlMap?.get(e.id),p=Na(e);return{args:u`${l}, ${n}`,variableFallbackList:dk(e,s,c),data:a,key:p?u`${i} ?? ${n}`:i}}var fk=ge("jsxForNode");async function hk(e,t,r,o){let n=ks(t.treeStore.tree,e,P);for(let i in n){if(i==="children")continue;let a=[],s=n[i];if(s){for(let l of s){let c=await Pl(l.node,e,t,{...o,inComponentSlot:!0});c&&c.length>0&&a.push(c)}r.props[i]=a}}}function gk(e,t,r){if(Fe(e))return Y(Br(t.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),t,r));if(U(e)&&e.codeComponentIdentifier==="framer/Prototype"){let o=Sb(e,t);if(o)return Y(ce.tag(o,void 0))}return""}function yk(e,t,r){if(ze(t)){let o=vb(P,t);return r.repeaterInfo.set(t.id,o),t.id}return e.lastRepeaterId}function Sk(e,t,r){return ze(t)?!1:!!(Fn(r.treeStore.tree,t)||e.inRepeatedItem)}function Ck(e,t,r,{itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,subqueries:s,kitSectionId:l}){return{...e,lastRepeaterId:yk(e,t,r),inRepeatedItem:Sk(e,t,r),subqueries:s,itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,kitSectionId:e.kitSectionId??l,inComponentSlot:e.inComponentSlot||U(t)&&t.codeComponentIdentifier!=="framer/Prototype"}}function vk(e,t,r,o,n){let i=[],s=o.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(xe(e)&&pe(e.htmlContent)&&s&&s.length>0){let d=o.imports.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"}),f={},h=e.getComponentPresets();for(let[g,S]of h)o.componentPresetIds.add(S),f[g]=u`${d}.props[${S}]`;i.push(g=>ce.tag(o.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new A({presets:f}),g))}U(e)&&Sr(e)&&i.push(d=>Br(yb(e,o,r,n),o,r.propsForContainer,d)),U(e)&&!e.isVectorInstance&&i.push(d=>Br(o.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),o,r.propsForComponentViewport,d));let l=o.links.getUnresolvedLinksForNode(e);if(l){let{unresolvedLinks:d,binding:f}=l;if(Dr(d)||Lu(d)){let h=o.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),g=new A({links:d});i.push(S=>Br(h,o,{props:g},u`(${f}) => (${S})`))}}if(r.isAnyVariantALink&&i.push(d=>Br(o.imports.addImport("framer",{exportSpecifier:"Link"}),o,r.propsForLink,d)),r.isAnyVariantATransitionOverride){let d=o.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),f=o.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),h=o.declarations.file.dedupe("Transition",new v(te.lines(u`({value, children}) => {`,u`const config = ${f}.useContext(${d})`,u`const transition = value ?? config.transition`,u`const contextValue = ${f}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,u`return <${d}.Provider value={contextValue}>{children}</${d}.Provider>`,u`}`)));i.push(g=>Br(h,o,r.propsForTransition,g))}let c=o.events.overlayTriggerOverlayBindings.get(e.id);if(c&&c.size>0){i.push(S=>ce`<>${S}</>`);let d=u`visible`,f=u`setVisible`,h={visible:u`enabled && ${d}`,[Zs.show]:u`() => ${v.fn(f,u`true`)}`,[Zs.hide]:u`() => ${v.fn(f,u`false`)}`,[Zs.toggle]:u`() => ${v.fn(f,u`!${d}`)}`},g=o.declarations.file.dedupe("Overlay",new v(te.lines(u`({ children, blockDocumentScrolling, enabled = true, }) => {`,u`const ${[d,f]} = ${v.fn(o.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),u`{ blockDocumentScrolling }`)}`,u`return children(${h})`,u`}`)));for(let[S,C]of c){let N=o.treeStore.tree.get(S);if(!N)continue;let b=new A({blockDocumentScrolling:Fe(N)?N.blockDocumentScrolling:!1}),w=o.renderConditions.get(S);xt(w)&&(b.enabled=w),i.push(M=>ce.tag(g,b,u`${C} => (${M})`))}}let p=o.events.overlayState.get(e.id);if(p&&Fe(e)){let d=o.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),f=`#${Va}`,h=`#${ka}`,g=o.declarations.file.dedupe("getContainer",u`() => {${u.joinLines(u`return document.querySelector(${f}) ?? document.querySelector(${h}) ?? document.body`)}}`);i.push(S=>ce`<>{${d}.createPortal(${S}, ${v.fn(g)})}</>`)}t&&p&&Et(e)&&r.isAnyVariantFloating&&i.push(d=>Br(o.imports.addImport("framer",{exportSpecifier:"Floating"}),o,r.propsForFloating,d)),p&&wt(e)&&i.push(d=>ce.tag(o.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,u`${p}.visible && (${d})`)),r.renderCondition!==!0&&i.push(d=>u`${r.renderCondition} && (${d})`);let m=o.fetches.getResultBinding(e);if(r.propsForFetcher&&m&&i.push(d=>Br(o.imports.addImport("framer",{exportSpecifier:"Fetcher"}),o,r.propsForFetcher,u`${m} => (${d})`)),ze(t)&&Fn(o.treeStore.tree,e)){let d=o.repeaterInfo.get(t.id);if(y(d,"jsxForNode: `repeaterInfo` must exist when transforming the child of a repeater."),mt(t)){let b=o.links.getPathVariablesForRepeaterInfo(d);b&&i.push(w=>ce.tag(o.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new A({value:b}),w))}let f=o.bindings.create("index"),{data:h,args:g,variableFallbackList:S,key:C}=bb(t,d.annotations,r,o,f),N=o.variables.variableIdsByProviderId.get(t.id)?.has(bc)?new v(Jo(bc,t.id,!1)):void 0;i.push(b=>u`${h}?.map((${g}) => {${u.joinLines(...S,N&&u`const ${N} = ${f} + 1`,...o.declarations.component.list(t),u`return (${ce.tag(o.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new A({key:C,id:ye`${t.id}-${C}`}),b)})`)}})`)}return i}function bk(e,t,r){let n=Sr(e)?t.propsForContainer:t.propsForElement,i=r.events.overlayTriggerOverlayBindings.get(e.id);if(i&&i.size>0){let l=n.props;l||(l=new A),l.id=l.id??r.elementIds.id(e)}let s=r.cssVariableDefinitions.getDefinitionsForNode(e)??{};if(!Me(s)){let l=n.props;l||(l=new A),l.style?Object.assign(l.style,s):l.style=s}}async function Pl(e,t,r,o){try{if(ho(e)){y(t&&r.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let l=Bv(e,t,r);return ce`${u.joinLines(ce.children(r.layoutTemplateSlotBinding),ce.tag(u`div`,new A({className:l})))}`}await Nk(e,r),r.metrics.count("nodes");let n=Av(e,t,r,o);if(!n)return ce``;U(e)&&await hk(e,r,n.propsForElement,o);let i=gk(e,r,n.propsForElement),a=Ck(o,e,r,n);for(let l of wk(e,r)){if(wt(l)&&!r.events.overlayState.has(l.id))continue;let c=await Pl(l,e,r,a);c&&(i+=Y(ce.children(c)))}bk(e,n,r);let s=await kk(e,r,o,a,n,ce.fromTrustedString(i));return ce.applyTransforms(s,vk(e,t,n,r,o))}catch(n){return fk.reportError(n,{node:e.id,primaryVariant:r.rootId}),r.errors.record(e,n),ce``}}async function Fl(e,t,r,o,n=`framer-${Gn(5)}`){let{combinedVariableControlMap:i}=t.combineVariableControlMap(r.treeStore.tree,void 0,P,P.activeBundleHash),a={inheritedControlMap:i},s=ub(e,t,r,o,n);return{ctx:s,jsx:await Pl(e,null,s,a)}}async function Dl(e,t,{modulesStore:r,errors:o,treeStore:n,rootId:i}){let a=n.tree.get(i),s=n.tree.getScopeNodeFor(a);if(Ep(n.tree,s,e))return;for(let c of t)if(Mt(c)&&c.type==="codeFile"){let m=P.componentForIdentifier(c.value),d=P.errorForIdentifier(c.value);m?d&&o.record(e,"CodeError",c.value):o.record(e,"MissingModule",c.value);return}let l=Ik(t);l.length>0&&await r.preloadExternalModules(l),await Hn(P,t.map(c=>c.value),r)}function Ik(e){let t=[];for(let r of e)Ir(r)&&t.push(r);return t}function Tk(e,t){if(!be(e.codeComponentIdentifier))return;let r=new Set([e.codeComponentIdentifier]);for(let o of t.variants){let n=Qo(o,e.id,t.treeStore.tree);n&&(y(U(n),"Expected a CodeComponentNode in the variant",n?.id),be(n.codeComponentIdentifier)&&r.add(n.codeComponentIdentifier))}return r}async function Nk(e,t){if(U(e)){if(e.codeComponentIdentifier==="framer/Prototype"){let n=xs(e,P);if(!n)return;await Dl(e,[pt("prototype",n,"default")],t)}let r=Tk(e,t);if(!r)return;let o=[];for(let n of r)o.push(Q(n));await Dl(e,o,t)}if(Vp(e)){if(!be(e.codeOverrideIdentifier))return;await Dl(e,[Q(e.codeOverrideIdentifier)],t)}mt(e)&&await Dl(e,[Q(e.dataIdentifier)],t)}function wk(e,t){return!wn(e)||gn(e)||xe(e)?hu():U(e)&&e.codeComponentIdentifier!=="framer/Prototype"?Mg(t.treeStore.tree,e,P).map(r=>r.node):e.children}function xk(e,t,r,o,n){if(!Na(e)){if(mt(e)){let i=t.variables.variableIdsByProviderId.get(e.id)??new Set,a=mb(e,t,r,o,i);if(a){let s=t.declarations.file.dedupe("QueryData",fb(e,t)),l=t.bindings.createWithNode("collection",e),c=t.bindings.createWithNode("paginationInfo",e),p=t.bindings.createWithNode("loadMore",e);n.push(m=>ce.tag(t.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,Br(s,t,a,u`(${l}, ${c}, ${p}) => (<>${m}</>)`)))}return}$(e,"All data repeater types should be handled")}}function Rk(e,t,r,o){let n=[];return Vr(e)&&n.push(i=>u`(${fd}) => (<>${i}</>)`),ze(e)&&xk(e,t,r,o,n),n}async function kk(e,t,r,o,n,i){let a=Br(Cb(e,t,r,n),t,Fe(e)?void 0:n.propsForElement,ce.applyTransforms(i,Rk(e,t,r,n)));if((U(e)||xe(e))&&qp(e,"framer/useShowRelativeOverlay")){let s=Y(a);for(let l of e.children){if(!wt(l)||!t.events.overlayState.has(l.id))continue;let c=await Pl(l,e,t,o);c&&(s+=Y(ce.children(c)))}return ce.fromTrustedString(s)}return a}function Br(e,t,r,o){if(!r)return ce.tag(e,void 0,o);let{props:n=new A,overrides:i}=r,a=[];if(i)switch(t.scopeType){case"SmartComponent":A.addSpreadAtEnd(n,v.fn(u`addPropertyOverrides`,i,u`baseVariant`,u`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(s=>ce.tag(t.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new A({breakpoint:u`baseVariant`,overrides:i}),s));break;default:break}return ce.applyTransforms(ce.tag(e,n,o),a)}async function Ll(e,t,r,o,n,i){return vo(t)&&t.usesDOMRectCached()&&!t.getDOMRect()&&(await Vk(t,o,r,n),!t.cache.getRawDOMRect(t.id)&&i)?tt.atOrigin(i):e.getRect(t)}async function Vk(e,t,r,o){if(t){let a=(await t({ids:[e.id]}))?.measurements?.[0];if(a){let{layoutMetrics:s}=a,l=tt.from(s);e.cache.setRawDOMRect(e.id,l);return}}if(!r)return;let n=Mk(r,o);if(n){let i=tt.atOrigin(n);e.cache.setRawDOMRect(e.id,i)}}function Mk(e,t){if(!Mt(e))return;let r=t.getPersistedModuleByLocalIdentifier(e);if(!r)return;let{intrinsicWidth:o,intrinsicHeight:n}=r.metadata;if(G(o)&&G(n))return{width:o,height:n}}var er={Screen:u`Screen`,activeVariantCallback:x.activeVariantCallback,css:x.css,delay:x.delay,ref:x.ref,serializationHash:x.serializationHash,sharedStyleClassNames:x.sharedStyleClassNames,restProps:x.restProps,refBinding:x.refBinding},Dk=new Set(Object.values(er).map(e=>Y(e))),Ib=kt(async(e,t,{serializationId:r,initialIntrinsicSize:o})=>{let n=t.treeStore.tree.getScopeNodeFor(e);if(!we(n))return[];let i=t.treeStore.tree.get(e.id);y(i,"Must have a source node to serialize. This should be a primary variant."),y(we(n),"Must have a scope node to serialize. This should be a CanvasPage Node.");let{assetMap:a,engineChanges:s,modulesStore:l,treeStore:c}=t,p={assetMap:a,engineChanges:s,modulesStore:l,treeStore:c},m=`FramerScreen${Te(e.id)}`,d=pt("screen",e.id,"default").value,{jsx:f,ctx:h}=await Fl(i,n,p,new Set(Dk).add(m),r);y(f,"There must be JSX to serialize.");let g=h.imports,S=await Ll(p.treeStore.tree,i,d,t.measureNodes,p.modulesStore,o),C=h.events.navigationTargets.size>0,N=h.events.handlers.size>0,b=h.events.variantOnAppearId.get(e.id),w=h.events.keyBindHooks.size>0,M=[];for(let ie of h.events.navigationTargets)ie!==sd&&M.push(ie);let L=h.fonts.fontObjects,F=new Map(h.fonts.fontReferences),{variables:H}=h.variables,z=[],J=new Set(h.css.sharedStyleIds),me=[];for(let ie of J){let Ie=Ae("css",ie),ct=g.addImport(`../${Ie}`,{exportSpecifier:"*",importBinding:"sharedStyle"});me.push(ct),z.push(v.fn(g.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),u`${ct}.fonts`))}let fe;for(let ie of h.componentPresetIds){fe??=g.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"});let Ie=u`${fe}.fonts?.[${ie}]`;z.push(u`(${Ie} ? ${v.fn(h.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),Ie)} : [])`)}let de=new Map;An(h.css.get(),de);let le=new v(m),R=g.addImport("react",{exportSpecifier:"useRef"}),Z=te.lines(C&&`const preload = ${Y(M)};`,...h.declarations.file.list(),u`const ${er.serializationHash} = ${r}`,u`const ${er.Screen} = ${Pk({props:u`style, className`},u`const fallbackRef = ${v.fn(u`${R}<HTMLElement>`,u`null`)}`,u`const ${er.refBinding} = ${er.ref} ?? fallbackRef`,C?u`const navigate = ${v.fn(g.addImport("framer",{exportSpecifier:"usePrototypeNavigate"}),{preload:u`preload`})}`:void 0,N&&u`const { ${er.activeVariantCallback}, ${er.delay} } = ${v.fn(g.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}))}`,...h.events.handlers.values(),u`const ${er.sharedStyleClassNames} = ${me.map(ie=>u`${ie}.className`)}`,...h.declarations.component.list(),w&&te.linesFrom(h.events.keyBindHooks),b&&v.fn(g.addImport("framer",{exportSpecifier:"useOnAppear"}),b),H.size>0&&u`const { ${u.listFrom(H)} } = {}`,u`return ${f}`)}`,u`const ${er.css} = ${[...h.css.conditionalRules(r),ds,...Bn(de),...me.map(ie=>u`...${ie}.css`)]}`,us(le,r,er.Screen,er.css,{framerIntrinsicHeight:S.height,framerIntrinsicWidth:S.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerScreen:void 0,framerDisplayContentsDiv:!1},g),u`${le}.displayName = ${`Screens/${n.name?.trim()||"Generated Component"}`};`,u`${le}.defaultProps = ${{width:S.width,height:S.height}};`,qs({componentName:le,fontObjects:L,fontReferences:F,imports:g,declarations:h.declarations.font,sharedFontArrays:z}));return[{type:"screen",revision:void 0,source:new v(te.sections(te.linesFrom(g.statements),Z)),artifacts:{assets:h.assets.keys,packageDependencies:h.packages.dependencies,metrics:h.metrics.get()}}]});function Pk({props:e},...t){return new v(te.lines(u`React.forwardRef(function({ ${e}, ...${er.restProps} }, ${er.ref}) {`,...t,u`});`))}var Nb="{serializationId}";function Tb(e){return`.${Nb} ${e}`}var wb=kt(async(e,{treeStore:t},{serializationId:r})=>{let o=new Kr,n=new ls(o),i=new Vo(n),a=e.getFontsForCodeGeneration(),s=e.moduleSourceRevision,l=Sn(e);for(let C of a)i.addFontObjectBySelector(C,l);let c=[],p=new En,m={colors:p};for(let{selectors:C,declarations:N}of e.getCSS(m)){let b=C.map(Tb);c.push(`${b.join(", ")} { ${N} }`)}let d=t.tree.getNodesWithTrait(e.cache.replicaInstances??[],Th).filter(Dm).sort((C,N)=>(N.breakpointWidth??0)-(C.breakpointWidth??0));for(let C=0;C<d.length;C++){let N=d[C];if(N===void 0)continue;let b=d[C+1],w=N.breakpointWidth-1,M=b?.breakpointWidth??0;for(let{selectors:L,declarations:F}of N.getCSS(m)){let z=`${L.map(Tb).join(", ")} { ${F} }`;c.push(`@media (max-width: ${w}px) and (min-width: ${M}px) { ${z} }`)}}let f=p.getWideGamutColorRules(`.${r}`);f.length&&c.push(`@supports (color: color(display-p3 1 1 1)) { ${f.join(" ")} }`);let h=c.map(C=>C.replaceAll(Nb,r)),g=Di({fontObjects:i.fontObjects,fontReferences:i.fontReferences}),S=u.joinLines(u`import { fontStore } from "framer";`,u`fontStore.loadFonts(${a});`,...n.list(),u`export const fonts = ${g};`,u`export const css = ${h};`,u`export const className = ${r};`);return[{revision:s,type:"css",source:S,artifacts:{metrics:{nodes:c.length}}}]});function Ed(e){if(Ct(e))return{widthType:e.widthType,heightType:e.heightType,...Io(e)?{minHeight:e.minHeight,maxHeight:e.maxHeight,minWidth:e.minWidth,maxWidth:e.maxWidth}:Jp}}function Ad(e,t){if($e(t))return{min:e.getRect(t).width}}var Fk=new Set(Object.values(x).map(e=>Y(e)));function Lk(e,t){if(nr(e)){let r=t.get(e.parentid);return!Pe(r)||!r.isLoaded()?null:r}return t.current(e)}var Bd=kt(async(e,t,{serializationId:r,initialIntrinsicSize:o})=>{let{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,aiGenerationStore:l,measureNodes:c}=t,p=At(e,s.tree)?e.moduleSourceRevision:void 0,m=Lk(e,s.tree);y(m?.isLoaded(),"The scope node must be valid.");let d=Fd(m),f=Ht(m)?m.baseVariantId:e.id,h=s.tree.get(f);y(h,"Must have a source node to serialize. This should be a primary variant.");let g={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},S=`Framer${e.id}`,C=new v(S),{jsx:N,ctx:b}=await Fl(h,m,g,new Set(Fk).add(S),r);y(N,"There must be JSX to serialize.");let w=b.imports,M=Pe(m),L=M?void 0:m.instanceIdentifier,F=await Ll(g.treeStore.tree,h,L,c,g.modulesStore,o),H=Ht(m)?m.getReplicaVariants():[],{variants:z,hook:J}=b.preload.getHook(),{gestures:me,breakpoints:fe,classNames:de,sizes:le,appearEventMap:R}=Jk(h,H,b,g,z),Z=Ue(m)?[m.baseVariantId,...m.getTopLevelReplicaVariants().map(As)]:[],ie=Z.length>1,Ie=!Me(me),ct=!Me(R),K=!Me(fe),O=u`${w.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,{mediaQueries:ne,sharedStyleImports:Ke,sharedFontArrays:Ee,css:He}=Uk(r,b,H,fe,m),ve=ce.applyTransforms(N,Xk(m,b,Gk(m,h,H,ne,g.treeStore,b))),{props:Jt,types:tr,propertyControls:Wr,variableMap:cr}=Bs(m,g,b,Ms(m),d,F),gt=Ok(m,t),st=!K&&u`const ${x.layoutDependency} = ${v.fn(b.declarations.file.dedupe("createLayoutDependency",u`(props, variants) => {${u.joinLines(u`if (props.layoutDependency) return variants.join('-') + props.layoutDependency`,u`return variants.join('-')`)}}`),u`props`,x.variants)}`,{cursors:co}=b.customCursors,fa=w.addImport("react",{exportSpecifier:"useRef"}),Hr=te.sections(Ie&&u`const ${x.enabledGestures} = ${me};`,ie&&`const ${x.cycleOrder} = ${Y(Z)};`,K&&`const ${x.breakpoints} = ${Y(ne)}`,K&&`const ${x.isBrowser} = () => typeof document !== "undefined";`,M&&u`const ${x.variant} = undefined;`,M&&u`const ${x.breakpoints} = undefined;`,M&&u`const ${x.layoutId} = undefined;`,M&&u`const ${x.className} = undefined;`,M&&u`const ${x.style} = undefined;`,u`const ${x.serializationHash} = ${r}`,`const ${x.variantClassNames} = ${Y(de)};`,!K&&zk,...b.declarations.file.list(),`export interface Props extends React.HTMLAttributes<HTMLDivElement> { ${tr} }`,`const ${x.Component} = ${Ak(u`const fallbackRef = ${v.fn(u`${fa}<HTMLElement>`,u`null`)}`,u`const ${x.refBinding} = ${x.ref} ?? fallbackRef`,u`const ${x.defaultLayoutId} = ${v.fn(O)}`,`const { ${x.activeLocale}, ${x.setLocale} } = ${v.fn(w.addImport("framer",{exportSpecifier:"useLocaleInfo"}))}`,Ue(m)||W(m)?u`const ${x.componentViewport} = ${v.fn(b.imports.addImport("framer",{exportSpecifier:"useComponentViewport"}))}`:void 0,Hk({data:gt,imports:w,variables:b.variables.variables,metadataVariables:W(m)?ly(m):new v.Set}),Jt,W(m)&&$k({webPageNodeId:e.id,hasData:!!gt,imports:w,bindings:b.bindings}),K?u.joinLines(u`const [${x.baseVariant}, ${x.hydratedBaseVariant}] = ${v.fn(w.addImport("framer",{exportSpecifier:"useHydratedBreakpointVariants"}),x.variant,x.breakpoints,u`false`)};`,u`const ${x.gestureVariant} = undefined;`):Ek(h.id,Ie,ie,w),st,jk(b),...b.events.routeHandlers.values(),b.events.handlers.size>0&&u`const { ${x.activeVariantCallback}, ${x.delay} } = ${v.fn(w.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}),K?u`undefined`:x.baseVariant)}`,...b.events.handlers.values(),ct&&v.fn(w.addImport("framer",{exportSpecifier:"useOnVariantChange"}),K?x.hydratedBaseVariant:x.baseVariant,R),u`const ${x.sharedStyleClassNames} = ${Ke.map(ue=>u`${ue}.className`)}`,...b.declarations.component.list(),co,J?.(Ie?x.enabledGestures:u`undefined`),u`return (${ve})`)}`,He,us(C,r,x.Component,x.css,Bk(m,b,F,le,cr),w),`${S}.displayName = ${Y(m.name?.trim()||"Generated Component")};`,`${S}.defaultProps = ${Y({width:F.width,height:F.height})};`,Wr&&v.fn(w.addImport("framer",{exportSpecifier:"addPropertyControls"}),C,new v(`${Y(Wr)} as any`)),qs({componentName:C,fontObjects:b.fonts.fontObjects,fontReferences:b.fonts.fontReferences,imports:w,declarations:b.declarations.font,sharedFontArrays:Ee})),[ae]=W(m)?await sy(m,t,{serializationId:r}):[];return Fs([{type:d,revision:p,source:new v(te.sections(te.linesFrom(w.statements),Hr)),artifacts:{packageDependencies:b.packages.dependencies,errors:b.errors.errors,assets:b.assets.keys,metrics:b.metrics.get(),kitSectionsStructure:l.cacheKitSectionsStructure(e.id,b.kitSectionsStructure.structure)}},ae,b.localizedValues.module(p)])});function Ek(e,t,r,o){let n=A.fromEntries([[x.defaultVariant,e],[x.variant,x.variant],[x.variantClassNames,x.variantClassNames],[x.enabledGestures,t?x.enabledGestures:void 0],[x.cycleOrder,r?x.cycleOrder:void 0],[x.ref,x.refBinding]]),i=v.fn(o.addImport("framer",{exportSpecifier:"useVariantState"}),n),a=x.variants,s=x.baseVariant,l=u`setVariant`,c=x.gestureVariant,p=x.classNames,m=x.setGestureState,d=x.gestureHandlers,f=x.clearLoadingGesture,h=x.isLoading;return te.lines(u`const ${{variants:a,baseVariant:s,setVariant:l,gestureVariant:c,classNames:p,setGestureState:m,gestureHandlers:d,clearLoadingGesture:f,isLoading:h}} = ${i}`)}function Ak(...e){return te.sections(u`React.forwardRef<HTMLDivElement, Props>(function(props, ${x.ref}) {`,...e,u`});`)}function Bk(e,t,r,o,n){let{height:i,width:a}=r,s={propertyName:"variant",data:Object.fromEntries(Object.entries(o).map(([c,p])=>[c,jm(p)]))},l={framerIntrinsicHeight:i,framerIntrinsicWidth:a,framerRootFontSize:xr(e)?e.getPrimaryVariant()?.rootFontSize:void 0,framerCanvasComponentVariantDetails:JSON.stringify(s),framerVariables:n&&JSON.stringify(n),framerImmutableVariables:!0,framerDisplayContentsDiv:!1,framerAutoSizeImages:!0,framerComponentViewportWidth:!0,framerColorSyntax:!0,framerVectorSets:t.vectorSets.annotation()};if(he(e)){let c={},p=e.getBreakpointValues();for(let m in p){let d=t.treeStore.tree.get(m);c[m]={...p[m],canvasClassName:Vb(m),minHeight:d?.height,viewportHeight:d?.viewportHeight,name:d?.name??void 0,width:d?.widthType===0?d?.width:void 0,rootFontSize:d?.rootFontSize??Ma}}l.framerHitTargets=t.hitTargets.annotation(),l.framerBreakpoints=JSON.stringify(c),l.framerDefaultVariant=e.baseVariantId,l.framerTrackingIds=t.trackingIds.annotation(),l.framerLayoutTemplate=""}else W(e)?(l.framerAcceptsLayoutTemplate=t.acceptsLayoutTemplate,l.framerTrackingIds=t.trackingIds.annotation(),l.framerScrollSections=t.elementIds.annotation(),l.framerResponsiveScreen=""):Ue(e)?l.framerTrackingIds=t.trackingIds.annotation():Pe(e)?l.framerDesign="":Ue(e)||(l.framerScreen="");return l}function Ok(e,t){if(!W(e)||!mt(e)||!es(t.treeStore.tree,e))return;let o=e.getVariableControlMap(t.treeStore.tree,P,P.activeBundleHash)??new Map;return{defaultCollectionAlias:Os(e),identifier:e.dataIdentifier,controlMap:o}}var zk=te.lines("function addPropertyOverrides(overrides, ...variants) {","const nextOverrides = {}","variants?.forEach(variant => variant && Object.assign(nextOverrides, overrides[variant]))","return nextOverrides","}");function $k({webPageNodeId:e,hasData:t,imports:r,bindings:o}){let n=r.addImport(`../${iy(e).localId}`,{exportSpecifier:"default",importBinding:"metadataProvider"}),i=t?x.currentRouteData:u`undefined`,a=o.create("metadata"),s=r.addImport("framer",{exportSpecifier:"useMetadata"});return te.lines(u`const ${a} = React.useMemo(() => ${v.fn(n,i,x.activeLocale)}, [${i}, ${x.activeLocale}])`,v.fn(s,a))}function Wk(e){if(wr(e))return{type:e.gesture,topLevel:e.replicaInfo.inheritsFrom}}function Hk({data:e,imports:t,variables:r,metadataVariables:o}){if(!e)return;let n=t.addImport("framer",{exportSpecifier:"useCurrentPathVariables"}),i=t.addImport("framer",{exportSpecifier:"NotFoundError"}),a=t.addImport("framer",{exportSpecifier:"useQueryData"}),s=t.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"}),l=new Set;for(let[h]of e.controlMap){let g=Jo(h,void 0,!0);(r.has(g)||o.has(g))&&l.add(h)}function c(h){let g=t.addModuleImport(h);return y(g,"Can't import collection"),g}let p=new Set,m=Ay(e.controlMap,l,p,e.defaultCollectionAlias,c),d=Ey(e.identifier,e.controlMap,p,e.defaultCollectionAlias,c),f=u`const [${x.currentRouteData}] = ${v.fn(a,{from:d,select:m,where:v.fn(s,x.currentPathVariables,e.defaultCollectionAlias)})};`;return u.joinLines(u`const ${x.currentPathVariables} = ${v.fn(n)};`,f,u`const ${x.getFromCurrentRouteData} = (key) => {
            if (!${x.currentRouteData}) throw new ${i}(\`No data matches path variables: \${JSON.stringify(${x.currentPathVariables})}\`);
            return ${x.currentRouteData}[key];
        };`)}function Vb(e){return`framer-${Te(e)}-override`}function xb(e,t){if(!(!Rn(e)||kn(e)&&!e.fillEnabled))return e.fillType==="color"&&D(e.fillColor)?t(e.fillColor,e,"fill"):Em(e)}function Rb(e){if(!tp(e))return;let t=e.rootFontSize/16*100;return rp(t,"%")}function kb(e,t){return E(e)?e:v.fn(t.imports.addImport("framer",{exportSpecifier:"safeCSSValue"}),e)}function Gk(e,t,r,o,n,i){if(!he(e)&&!W(e))return;let a=Ml(n,i.declarations,i.variables,i.valueTransforms),s=he(e)?":root":"html",l=`${s} body`,c=Rb(t),p=xb(t,a)??"none",m=[ye`${l} { background: ${kb(p,i)}; }`];E(c)&&m.push(`${s} { font-size: ${c}; }`);for(let d of r){let f=o[d.id];if(f){let h=xb(d,a)??"none",g=Rb(d),S=[];if(Nt(p,h)||S.push(ye`${l} { background: ${kb(h,i)}; }`),Nt(c,g)||S.push(`${s} { font-size: ${g}; }`),S.length===0)continue;m.push(ye`@media ${f} { ${ye.join(S," ")} }`)}}return ye.join(m," ")}function Uk(e,t,r,o,n){let i=Gh(Hh(o)),a=[],s=new Map;if(he(n)){let g=n.getPrimaryVariant(),S={marginBottom:$n(g,t)};t.css.createRule(`[${Fi}="true"] > #overlay`,Vn(S));for(let C of r){let N={marginBottom:$n(C,t)},b=eo(N,S);!b||Me(b)||t.css.createRule(`[${Fi}="true"] > #overlay`,Vn(b),C.id)}}An(t.css.get(),s);let l={},c={};for(let g of r){let S=i[g.id];if(S){let C=new Map;if(An(t.css.get(g.id),C),!C.size)continue;he(n)?(l[g.id]=Bn(C),c[g.id]=`.${Vb(g.id)}`):a.push(ye`@media ${S} { ${ye.join(Bn(C)," ")}}`)}else An(t.css.get(g.id),s)}let p=[],m=[];for(let g of t.css.sharedStyleIds){let S=Ae("css",g),C=t.imports.addImport(`../${S}`,{exportSpecifier:"*",importBinding:"sharedStyle"});m.push(C),p.push(v.fn(t.imports.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),u`${C}.fonts`))}let d;for(let g of t.componentPresetIds){d??=t.imports.addImport(`../${Un}`,{exportSpecifier:"*",importBinding:"componentPresets"});let S=u`${d}.fonts?.[${g}]`;p.push(u`(${S} ? ${v.fn(t.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),S)} : [])`)}let f=[ds,...Bn(s),...m.map(g=>u`...${g}.css`),...t.css.conditionalRules(e)],h=_k(n,t,f,a,l,c,i);return{sharedStyleImports:m,sharedFontArrays:p,mediaQueries:i,css:u`const ${x.css} = ${h}`}}function _k(e,t,r,o,n,i,a){if(Ue(e)||Pe(e))return r;if(W(e))return[...r,...o];if(he(e)){let s=t.declarations.file.dedupe("breakpointRules",n),l=t.declarations.file.dedupe("breakpointKeys",u`Object.keys(${s})`),c=t.declarations.file.dedupe("selectors",i),p=t.declarations.file.dedupe("rules",r),m=t.declarations.file.dedupe("mediaQueries",a),d=t.bindings.create("target"),f=t.bindings.create("query"),h=t.bindings.create("selector"),g=t.bindings.create("rule"),S=t.imports.addImport("framer",{exportSpecifier:"RenderTarget"});return u`(target) => {${u.joinLines(u`const isStaticRenderer = ${d} === ${S}.canvas || ${d} === ${S}.export`,u`if (!isStaticRenderer) {${u.joinLines(u`return [...${p}, ...${l}.map(key => {${u.joinLines(u`const ${f} = ${m}[key]`,u`return ${ye`@media ${f} { ${u`${s}[key].join(" ")`} }`}`)}})]`)}}`,u`return [...${p}, ...${l}.flatMap(key => {${u.joinLines(u`const ${h} = ${c}[key]`,u`return ${s}[key].map(${g} => ${ye`${h} {${g}}`})`)}})]`)}}`}$(e)}function jk(e){if(e.events.needsPathVariables)return`const ${xC} = React.useContext(${e.imports.addImport("framer",{exportSpecifier:"PathVariablesContext"})});`}function Jk(e,t,r,o,n){let i=Ed(e);y(i,"The primary variant should have a default size as it must be a FrameNode.");let a={default:i},s={[e.id]:`framer-v-${Te(e.id)}`},l={},c={},p={},m=Ad(o.treeStore.tree,e);m&&(p[e.id]=m);let d=r.events.variantOnAppearId.get(e.id),f={};!k(d)&&!v.isUndefined(d)&&(f.default=d);for(let h of t){r.metrics.count("variants");let g=Wk(h);if(g){let w=l[g.topLevel]??{};w[g.type]=g.type==="loading"?n?.has(g.topLevel):!0,l[g.topLevel]=w,c[g.topLevel]=[...c[g.topLevel]??[],h.id]}else s[h.id]=`framer-v-${Te(h.id)}`;let S=Ed(h);S&&(a[h.id]=S);let C=Ad(o.treeStore.tree,h);C&&(p[h.id]=C);let N=r.events.variantOnAppearId.get(h.id),b=Y(f[h.replicaInfo.inheritsFrom??""]??d);!k(N)&&Y(N)!==b&&(f[h.id]=N)}return{gestures:l,breakpoints:p,classNames:s,sizes:a,appearEventMap:f}}function Xk(e,t,r){let o=[];if((he(e)||W(e))&&r){let i=t.declarations.file.dedupe("HTMLStyle",u`({value}) => {${u.joinLines(u`const onCanvas = ${v.fn(t.imports.addImport("framer",{exportSpecifier:"useIsOnFramerCanvas"}))}`,u`if (onCanvas) return null`,u`return ${ce.tag(u`style`,new A({"data-framer-html-style":"",dangerouslySetInnerHTML:{__html:u`value`}}))}`)}}`);o.push(a=>ce`${u.joinLines(ce.tag(i,new A({value:r})),a)}`)}if(Ue(e)){let i=t.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=t.imports.addImport("framer-motion",{exportSpecifier:"motion.create"}),s=t.declarations.file.dedupe("Variants",v.fn(a,u`${i}.Fragment`));o.push(l=>ce.tag(s,new A({initial:!1,animate:x.variants}),l))}if(W(e)||he(e)||Pe(e)){let i=new A({id:he(e)?Va:ka});o.push(a=>ce`${u.joinLines(a,ce.tag(u`div`,i))}`)}let n=t.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"});if(o.push(i=>ce.tag(n,new A({id:u`layoutId ?? ${x.defaultLayoutId}`}),i)),W(e)||he(e)){let i=t.imports.addImport("framer",{exportSpecifier:"GeneratedComponentContext"});o.push(a=>ce.tag(u`${i}.Provider`,new A({value:{primaryVariantId:e.baseVariantId,variantClassNames:x.variantClassNames,isLayoutTemplate:he(e)?!0:void 0}}),a))}return o}function Mb(){let e=new v("b1d4f6a");return u`// Generated by Framer (${e})`}var Db={ref:x.ref,restProps:x.restProps,style:x.style,className:x.className,layoutId:x.layoutId},Od=u`css`,ji=u`Icon`,El=u`Component`,Ji=u`Props`,qk=[...Object.values(Db),Od,ji,El,Ji].map(e=>Y(e)),Pb=kt(async(e,t,r)=>{let{serializationId:o}=r,{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,vectorsStore:l}=t,c=s.tree.getScopeNodeFor(e);y(De(c),"Vector set item must be in a VectorSetNode.");let p=s.tree.get(e.id);y(p,"Must have a source node to serialize");let m={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},{ctx:d,jsx:f,svg:h,type:g}=Of(p,c,m,o,qk),S=pt("vectorSet",c.id,"default").localId,C=a.getPersistedModuleByLocalId(S);y(C,"VectorSet must be persisted.");let N=s.tree.getRect(e),{propertyControls:b,variableMap:w,types:M,props:L}=Bs(c,m,d,"VectorSet","vector",N),F=Kk(d),H={name:p.name??"Vector",empty:Yk(p)?!0:void 0,color:F,set:{localId:S,id:c.id,moduleId:C.id}},z=d.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),J=d.imports.addImport("framer",{exportSpecifier:"withCSS"}),me=Qk[g],fe=te.lines(...d.declarations.file.list(),u`interface ${Ji} extends ${z}.HTMLAttributes<${z}.${me}> { ${M??u``} }`,u`const ${El}: ${z}.ComponentType<${Ji}> = ${z}.forwardRef<${z}.${me}, ${Ji}>(function(props, ${Db.ref}) {${u.joinLines(L,...d.declarations.component.list(),u`return (${f})`)}})`,u`const ${Od} = ${d.css.rules}`,xo("This is a generated Framer component.",{framerIntrinsicWidth:N.width,framerIntrinsicHeight:N.height,framerSupportedLayoutWidth:"any-prefer-fixed",framerSupportedLayoutHeight:"any-prefer-fixed",framerVariables:w&&JSON.stringify(w),framerImmutableVariables:!0,framerVector:JSON.stringify(H),framerDisableUnlink:zy.has(H.set.moduleId)?!0:void 0}),u`const ${ji}: ${z}.ComponentType<${Ji}> = ${v.fn(J,El,Od,o)} as typeof ${El};`,u`${ji}.displayName = ${p.name??"Vector"};`,u`export default ${ji}`,b&&v.fn(d.imports.addImport("framer",{exportSpecifier:"addPropertyControls"}),ji,new v(`${Y(b)} as any`)));return l.cache(e.id,{svg:Y(h),color:F}),Fs([{revision:p.moduleSourceRevision,type:"vector",source:new v(te.sections(te.linesFrom(d.imports.statements),fe)),artifacts:{files:[{name:"icon.svg",type:"svgIcon",content:Y(h)}]}}])});function Kk(e){if(e.colors.uniqueColorCount!==1)return;let t=e.colors.singleColor;if(t)return{type:"static",value:t};let r=e.colors.singleVariableColor;if(r)return{type:"variable",value:Te(r)}}function Yk(e){return!e.children||e.children.length===0?!0:e.children.every(t=>t.visible===!1)}var Qk={0:u`HTMLImageElement`,1:u`HTMLDivElement`,3:u`HTMLSVGElement`,2:u`HTMLSVGElement`};var Fb=kt(async(e,{modulesStore:t},r)=>{let o=[];for(let a of e.getVectorSetItems()){let s=pt("vector",a.id,"default").localId,l=t.getPersistedModuleByLocalId(s);l&&o.push({id:a.id,name:a.name??"Vector",moduleId:l.id,saveId:r.includeVectorSetSaveIds?l.saveId:void 0})}let n={framerVectorSet:JSON.stringify({name:e.name??"Set",items:o})},i=new v(te.lines(xo("This is a generated Framer component.",n),u`const VectorSet: React.ComponentType<unknown> = function VectorSet() { return null; };`,u`export default VectorSet;`));return[{revision:e.moduleSourceRevision,type:"vectorSet",source:i}]});function ln(e,t){if(Ue(e,!0))return["canvasComponent"];if(W(e,!0))return["screen","webPageMetadata"];if(he(e,!0))return["layoutTemplate"];if(we(t.get(e.parentid)))return["screen"];if(De(e,!0))return["vectorSet"];if(we(e,!0))return["prototype"];if(bt(e,!0))throw new Error("Unhandled scope node type");if(nt(e))return["collection","draftCollection"];if(Xo(e))return["css"];if(Tr(e))return["componentPresets"];if(gn(e)&&De(t.getScopeNodeFor(e)))return["vector"];if(or(e))return["siteMetadata"];if(Rt(e))return["vector"];if(Pe(t.get(e.parentid)))return["design"];throw new Error(`Unsupported component node: ${e.__class} ${e.id}`)}function Ab(e){return Math.ceil(e/Math.ceil(e/100))}var Lb=class{constructor(t,r){T(this,"status",null);T(this,"results");T(this,"reportProgress");T(this,"onDone");this.reportProgress=t,this.onDone=r}async import(t,r,o){this.status="importing",this.results={scopeId:r,vectors:[],targetLayout:o};let n=o?{left:o.x+o.width*2,top:o.y}:{left:0,top:0};for(let i=0;i<t.length;i++){let a=t[i];if(!a)continue;let s=await eV(a,r,n);if(this.status!=="importing")return;s&&this.results.vectors.push(s),this.reportProgress?.({status:this.status,finishedCount:i+1})}await this.done()}cancel(){this.status="canceled"}async done(){this.results&&await this.onDone?.(this.results),this.status="done"}},Eb="run-svgo",Zk=1e6;async function eV(e,t,r){if(e.size>Zk){gr({type:"add",variant:"error",key:Eb,text:"Your SVG is too large to upload. You may need to convert to a different format, such as PNG.",icon:"error",duration:5e3});return}try{let o=await e.text(),n=$y(o),i=rV(e.name),a=Gg(o,Dg.createEmpty,n);return a?(a.parentid=t,a.set({name:i,isVectorSetItem:!0,...r}),{node:a,size:n}):void 0}catch(o){console.error("Failed to insert SVG:",o),gr({type:"add",variant:"error",key:Eb,text:"Failed to insert SVG",icon:"error"});return}}var tV=/[_-]/gu;function rV(e){let[t]=xu(e);return $u(t.replace(tV," "))}var oV={cache:!0,mutable:!0,update:!0,parentid:!0,originalid:!0,duplicatedFrom:!0,moduleSourceRevision:!0,moduleSourceRevisionHint:!0,moduleSourceRevisionCommittedHint:!0,kitSectionsStructure:!0,layoutTemplateIdentifierOverride:!0};function Fo(e,t){if(!k(t)&&!oV[e]&&!e.startsWith("export")&&!Fp(e))return t}function nV(e,t){if(e!=="children")return Fo(e,t)}function iV(e,t,r,o,n){if(!Pa(e)||!Si(t))return t;if(t.type==="slot")return!rr(t.value)||U(r)&&r.slotsAreChildNodes?t:t.value.map(i=>{let a=n.get(i.reference);return Rs(o,a)?a:void 0});if(t.type==="componentinstance"){if(!E(t.value))return t;let i=n.get(t.value);return Rs(o,i)?i:void 0}else if(t.type==="array"){if(!rr(t.value))return t;let i=[],a=!1;for(let s of t.value){if(!Si(s)||s.type!=="componentinstance"||(a=!0,!E(s.value)))continue;let l=n.get(s.value);Rs(o,l)&&i.push(l)}return a?i:t}return t}function aV(e,t){return(r,o,n)=>Fo(r,iV(r,o,n,t,e))}var Xi=ge("ModuleSourceRevision");function qK(e){return Ur(Xt(e,Fo))}function sV(e,t){switch(e.__class){case"CollectionItemNode":case"ImageStylePresetNode":case"InlineCodeStylePresetNode":case"LayoutTemplateNode":case"LinkStylePresetNode":case"SmartComponentNode":case"TableStylePresetNode":case"WebPageNode":return Ur(Xt(e,Fo));case"FrameNode":{let r=t.get(e.parentid);return!r||!Pe(r)?void 0:Ur(Xt(e,aV(t,r.id)))}case"CollectionNode":{y(nt(e),"Expected collection node");let r=Xt(t.root.locales),o=Xt(e,nV),n=Xt(e.getUnsortedChildren()?.map(i=>i.moduleSourceRevision));return Ur(r+o+n)}case"PresetsListNode":{let r=e.children?.filter(o=>!At(o,t))??[];return Ur(Xt(r,Fo))}case"TextStylePresetNode":case"BlockquoteStylePresetNode":{if(mi(e))return e.moduleSourceRevision;let r=Xt(e,Fo);return e.cache.replicaInstances?.forEach(o=>{let n=t.getNodeWithTrait(o,mi);n&&(r+=Xt(n,Fo))}),Ur(r)}case"VectorSetNode":{y(De(e),"Expected VectorSetNode");let r=e.getVectorSetItems().map(o=>{let n=pt("vector",o.id,"default").localId,i=t.getNodeWithTrait(n,_m);return i?i.save.moduleId:""});return Ur(Xt(r)+e.name)}case"ShapeContainerNode":{if(!Rt(e))return;let r=t.getScopeNodeFor(e);if(!De(r))return;let o=Xt(e,Fo);return Ur(o+Xt(r.variables))}case"CanvasPageNode":case"RootNode":return;case"ComponentPresetNode":return;case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BooleanShapeNode":case"BoxShadow":case"CanvasNode":case"CanvasScopeNode":case"DesignPageNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeComponentNode":case"CodeFileEntityTypeRootNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"LayoutTemplateEntityTypeRootNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"OvalShapeNode":case"OverlayNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathNode":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PolygonShapeNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RectangleShapeNode":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextNode":case"RichTextVariableEditTool":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"ShapeGroupNode":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"StarShapeNode":case"StringVariableEditTool":case"DateVariableEditTool":case"StyledTextDraft":case"SVGNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextNode":case"VectorSetEntityTypeRootNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"ZoomSelectTool":case"ZoomTool":return;default:$(e.__class,"getModuleRevision: node.__class must be a valid value")}}function $d(e,t){let r=e.get(t);return!r||!At(r,e)?!1:k(r.moduleSourceRevisionHint)||r.moduleSourceRevisionCommittedHint===r.moduleSourceRevisionHint?(Xi.debug(`Hint hasn't changed for ${r.id}.`),!1):(Xi.debug(`Initial Revision: ${r.moduleSourceRevision}`),!0)}function zd(e,t){let r=e.get(t);if(!r||!At(r,e))return;let o=performance.now(),n=sV(r,e);Xi.debug(`Spent ${performance.now()-o}ms computing module revision for ${r.id}`);let i=G(n)&&n!==r.moduleSourceRevision;Xi.debug(`Revisions: ${r.moduleSourceRevision}, ${n}`);let a=r.moduleSourceRevisionHint,s=i?{moduleSourceRevision:n,moduleSourceRevisionCommittedHint:a}:{moduleSourceRevisionCommittedHint:a};return Xi.debug(i?`Updating moduleSourceRevision for ${r.id}.`:`Updating moduleSourceRevisionCommittedHint for ${r.id}.`),r.setIgnoringReplica(s,e),i?n:void 0}function Bb(e,t){return t(r=>{if(r.isViewOnly)return;let o=r.get(e);return nt(o)&&o.getUnsortedChildren()?.forEach(n=>{$d(r,n.id)&&zd(r,n.id)}),zd(r,e)})}function Ob(e,t){return t(r=>{if(!r.isViewOnly)return e.reduce((o,n)=>(o[n.id]=zd(r,n.id)??1,o),{})})}var lV=2;function Wd(e){if(W(e))return lV}function o7(e,t,r){if(t.type==="siteMetadata"||t.type==="webPageMetadata")return!0;let o=ln(e,r).includes(t.type);if(y(e.id===t.name&&o,"sourceNode and module must match"),Es(t))return!1;let n=Wd(e);if(n===void 0)return!0;let i=t.metadata.codeGenVersion;return G(i)&&i>=n}var Hd=1;function cV(e){let t=e.metadata.compatibleTextStyleVersion;return G(t)?t:0}function s7(e){return cV(e)<Hd}var Lo=uo(fn());function zb(e,t){if(Ue(e))return"Smart Component";if(W(e))return"web page";if(we(t.get(e.parentid)))return"prototype screen";if(we(e))return"prototype";if(nt(e))return"CMS collection"}function $b(e,t){return W(t)?cy(e,t):t.name??void 0}function Wb(e,t="module",r){let o="is too large and will not update";gr({type:"add",variant:"warning",text:r?(0,Lo.jsxs)(Lo.Fragment,{children:[(0,Lo.jsxs)(Vs,{children:["The ",t]})," \u201C",r,"\u201D ",(0,Lo.jsx)(Vs,{children:o})]}):(0,Lo.jsxs)(Vs,{children:["A ",t," ",o]}),key:`module-too-large-${e}`,duration:1/0,extraAction:{title:"Learn more",onClick(){Gt("ui_interaction",{page:"module-too-large-toast",id:"learn_more"}),Fg("https://www.framer.com/help/articles/how-to-fix-module-too-large-warning/")}}});let i=`module-too-large-toast-${t.split(" ").join("-")}`;Gt("ui_impression",{page:i})}var Al=class{constructor(){T(this,"queue",[]);T(this,"synchronize",async()=>{for(let t of this.snapshot())await t.task()})}snapshot(t){return this.queue=this.queue.filter(t??(r=>!r.promise.isResolved())),Array.from(this.queue)}get size(){return this.snapshot().length}async request(t,r){let o=new yu;this.queue.push({id:r?.id,promise:o,task:()=>(o.state!=="initial"||(o.pending(),(t()??Promise.resolve()).finally(()=>o.resolve())),o)}),r?.synchronize!==!1&&await this.synchronize()}};function Bl(e,t){if(!ap(e)||!t.isGroundNode(e))return!1;let r=t.get(e.parentid);return!!(r&&we(r))}function oo(e){if(or(e))return ny.localIdName;switch(e.id){case Zh:return"componentPresets";default:return e.id}}function cn(e,t){return ln(e,t).map(o=>Ae(o,oo(e)))}function qi(e,t,r){return e?cn(e,t).every(o=>!k(r.getModuleEntryByLocalId(o))):!1}function Hb(e,t){if(!Eo(e,t)||Pe(e))return!1;if(!bt(e)){let r=t.getScopeNodeFor(e);if(Pe(r))return!1}return!0}function Eo(e,t){if(or(e))return!0;if(!t.has(e.id))return!1;if(Ht(e))return!0;if(fi(e))return!1;if(nt(e)||Xo(e)||Tr(e)||De(e))return!0;if(Rt(e)){let r=t.get(e.parentid);return De(r)}if(Pe(e))return!1;if(t.isGroundNode(e)&&nr(e)){let r=t.getScopeNodeFor(e);if(Pe(r))return!0}return!!(we(e)||Bl(e,t))}var dV=1e4,uV=1e3,Ki=ge("CodeGenerationStore");function pV(e){return!(nt(e)||we(e)||or(e)||nr(e)||Tr(e)||De(e))}function mV(e,t){if(!Rt(t))return;let r=e.getScopeNodeFor(t);return y(De(r),"Vector set item must be in a VectorSetNode."),r.variables}function fV(e){let t=e.name?.trim();return t||(it(e)?"Text":Wh(e,e.__class))}function Gb(e,t,r,o,n){let i={},a=fV(t);i.metadata||(i.metadata={});let s=[...n?.files??[]];pV(t)&&s.push({name:"tree.json",type:"nodeTree",content:JSON.stringify(Object.assign(t.toJS(),{__treeSerializationVersion:e.serializationVersion,__vectorSetVariables:mV(e,t)}))});let l=Wd(t);l&&(i.metadata.codeGenVersion=l);let c=n?.packageDependencies;return c&&(i.metadata.packageDependencies=Array.from(c)),Sy(r)&&(i.metadata.compatibleCmsVersion=yy),fo(t)&&(i.metadata.compatibleTextStyleVersion=Hd),i.assets=n?.assets?Array.from(n.assets):[],{...i,title:a,files:s,errors:n?.errors??[],type:r,name:o}}async function hV(e,t,r,o){if(e&&t instanceof Cu&&t.code===1001){let n=Nh(e,a=>r.treeIndex.getScopeIdFor(a))??void 0,i=new gs({type:"CodeGeneration",nodeId:Ht(e)?e.baseVariantId:e.id,reason:"FileTooLarge",sourceNodeId:e.id,scopeId:n});Wb(e.id,zb(e,r.tree),$b(r.tree,e)),await o(a=>{if(a.isViewOnly)return;a.lineage.setEditReason("codegeneration");let s=a.ensureErrorListNode();Ki.debug("Writing ClientFileTooLarge error to tree for",e.id),a.insertNode(i,s.id)})}else Ki.reportError(t)}var lr,Yi,Ol=class{constructor(t,r,o,n){this.treeStore=t;this.modulesStore=r;this.runWhenIdle=o;this.scheduleDocumentUpdateIgnoringUndo=n;_(this,lr,new Al);_(this,Yi,new ha({delay:dV,task:()=>this.runWhenIdle(()=>void I(this,lr).synchronize())}));T(this,"process",I(this,lr).synchronize);T(this,"changeScope",()=>I(this,Yi).debounce(uV));T(this,"isIdle",()=>I(this,lr).size===0);T(this,"isBlocking",()=>I(this,lr).snapshot().some(t=>t.promise.state==="pending"))}enqueue(t,r){I(this,lr).snapshot(a=>a.promise.isResolved()?!1:a.id===t?a.promise.state!=="initial":!0);let o=this.treeStore.tree.get(t);if(!o||!Hb(o,this.treeStore.tree))return;let n=oo(o),i={};for(let{type:a,artifacts:s}of r){let l=Gb(this.treeStore.tree,o,a,n,s);i[Ae(a,n)]=l}I(this,lr).request(async()=>{try{Ki.debug("Persisting transient modules for",t),await this.modulesStore.upsertBatch(i)}catch(a){await hV(o,a,this.treeStore,this.scheduleDocumentUpdateIgnoringUndo)}},{id:t,synchronize:!1})}async persist(t,r,o){let n=this.treeStore.tree.get(t);if(n)return this.enqueue(t,r),o?I(this,Yi).debounce():(await I(this,lr).synchronize(),cn(n,this.treeStore.tree).map(i=>this.modulesStore.getPersistedModuleByLocalId(i)))}async persistBatch(t){let r={},o="batch";for(let n in t){let i=this.treeStore.tree.get(n),a=t[n];if(!i||!a)continue;let s=oo(i),l=new Set;for(let{type:c,artifacts:p}of a){let m=Ae(c,s);y(!l.has(m),"Duplicate local module id",m),l.add(m),r[m]=Gb(this.treeStore.tree,i,c,s,p),o+=`-${m}`}}I(this,lr).snapshot(n=>n.promise.isResolved()?!1:n.id===o?n.promise.state!=="initial":!0),await I(this,lr).request(async()=>{Ki.debug("Persisting transient modules for batch: ",o);try{await this.modulesStore.upsertBatch(r)}catch(n){Ki.reportError(n)}},{id:o,synchronize:!0})}};lr=new WeakMap,Yi=new WeakMap;var gV=()=>({stylePresets:[],componentPresets:[],collections:[],smartComponents:[],screens:[],prototypes:[],webpages:[],metadata:[],layoutTemplates:[]}),qe=ge("CodeGenerationStore");var yV=500,_b=1500,SV=6e4;function CV(e){for(let t in e.to)if(t in sg||t in ag||t in _h)return!0;return!1}function vV(e){return De(e)?yV:_b}var dn,at,no,ii,Qi,ai,si,Vt,zl,jb,Ub=class extends Dn{constructor(r,o,n,i,a,s,l,c,p,m,d=new Map){super();this.treeStore=r;this.modulesStore=o;this.vectorsStore=n;this.aiGenerationStore=i;this.assetMap=a;this.timeline=s;this.engineChanges=l;this.scheduleDocumentUpdateIgnoringUndo=c;this.updateTreeCache=p;this.measureNodes=m;_(this,zl);_(this,dn,new Set);_(this,at);_(this,no,new Map);_(this,ii);_(this,Qi,new ha({delay:_b,maxDelay:SV,task:()=>this.runWhenIdle(()=>{this.generateAndUpdateQueuedComponents()})}));_(this,ai,new Map);_(this,si);T(this,"testing",{setComponentGenerationQueue:r=>{se(this,at,r)},flushQueuedCallbacks:()=>{I(this,no).forEach(r=>r.forEach(o=>o()))},generateAndUpdateQueuedComponents:r=>this.generateAndUpdateQueuedComponents(r),setSerializationId:r=>{se(this,si,r)},setModulesStore:r=>{Object.assign(this,{modulesStore:r}),Object.assign(this.persistence,{modulesStore:r})},waitForProcessing:async r=>{await this.serialization.promise(r)}});T(this,"persistence");T(this,"moduleTypeOrder",{localization:0,webPageMetadata:1,siteMetadata:2,collection:3,draftCollection:4,css:5,componentPresets:6,vector:7,vectorSet:8,canvasComponent:9,screen:10,["prototype"]:11,codeFile:12,config:13,layoutTemplate:14,design:15});_(this,Vt,new Map);T(this,"serialization",{idle:async()=>{let r=[];for(let o of I(this,Vt).keys())r.push(this.serialization.promise(o)?.then(()=>this.untilCompiled(o)));await Promise.all(r)},isIdle:()=>I(this,Vt).size===0,prepare:r=>{I(this,at).delete(r);let o=I(this,Vt).get(r)??Su();I(this,Vt).set(r,o)},cancel:r=>{I(this,at).delete(r),I(this,Vt).get(r)?.resolve(),I(this,Vt).delete(r)},preparing:r=>I(this,Vt).has(r),promise:r=>I(this,Vt).get(r),commit:async(r,o,n)=>{let i=()=>{I(this,Vt).get(r.id)?.reject(),I(this,Vt).delete(r.id)};try{let a=await et(this,zl,jb).call(this,r,o,n);return a||i(),a}catch(a){throw qe.reportError(a),i(),a}}});se(this,at,d),se(this,ii,this.timeline.openNodeChangesReader()),this.persistence=new Ol(this.treeStore,this.modulesStore,f=>this.runWhenIdle(f),f=>this.scheduleDocumentUpdateIgnoringUndo(f)),iC(()=>nc.isTest||this.treeStore.tree.isViewOnly?!1:this.hasBlockingUpdates()?(qe.debug("Showing Unsaved Changes dialog (generation queue #: ",I(this,at).size,", component ids to generate: ",[...I(this,at).keys()],")"),I(this,dn).clear(),this.generateAndUpdateQueuedComponents().then(()=>{this.persistence.process()}).catch(f=>qe.reportError(f)),!0):!1),window.addEventListener("blur",async()=>{try{await this.generateAndPersistAllQueuedComponents()}catch(f){qe.reportError(f)}})}isIdle(){return I(this,at).size===0&&this.serialization.isIdle()&&this.persistence.isIdle()}documentDidLoad(){I(this,at).clear(),I(this,no).clear(),I(this,ai).clear()}telemetrySession(r){let o=I(this,ai).get(r);if(o)return o;let n=this.treeStore.tree.get(r);y(n,"TelemetrySession: source node must exist");let i=new Ws(n);return I(this,ai).set(r,i),i}getSerializationId(){return I(this,si)?`framer-${I(this,si)}`:`framer-${Gn(5)}`}async generateAndPersistAllQueuedComponents(){await this.ensureSiteMetadataModule(),await this.generateAndUpdateQueuedComponents(),await this.serialization.idle(),await this.persistence.process()}debugGetComponentSourceNodes(){let r=gV();y(!1,"This method should only be used in tests.");for(let{node:o,skipChildren:n}of this.treeStore.tree.root.walkWithSkipChildren())W(o)?(r.webpages.push(o),r.metadata.push(o),n()):Ue(o)?(r.smartComponents.push(o),n()):nt(o)?(r.collections.push(o),n()):Xo(o)?(r.stylePresets.push(o),n()):Tr(o)?r.componentPresets.push(o):Bl(o,this.treeStore.tree)?(r.screens.push(o),n()):we(o)?r.prototypes.push(o):or(o)?r.metadata.push(o):he(o)&&r.layoutTemplates.push(o);return r}postProcess(r,o,n){if(!this.treeStore.tree.isViewOnly){if(n){I(this,ii).clear();return}this.ingestChanges(r),I(this,Qi).debounce(vV(o))}}ingestChanges(r){for(let[o,n]of I(this,ii).read()){if(n.length===0||n.every(a=>a.ignoreInCodeGeneration))continue;let i=r.get(o);if(i){if(At(i,this.treeStore.tree)){km(i,n)&&this.addChangeToQueue(i);continue}if(or(i)){if(!n.some(CV))continue;this.addChangeToQueue(i)}else if(we(i))this.addChangeToQueue(i);else{let a=this.treeStore.treeIndex.getGroundNodeIdFor(o),s=r.get(a);if(!s||U(s))continue;let l=r.getScopeNodeFor(s);if(!we(l))continue;this.queueCanvasPageNodesFollowingLinks(r,s)}}}}queueCanvasPageNodesFollowingLinks(r,o){if(this.addChangeToQueue(o),!(!o.cache.links||o.cache.links.size===0))for(let n of o.cache.links){let i=this.treeStore.treeIndex.getGroundNodeIdFor(n),a=r.get(i);!a||U(a)||this.queueCanvasPageNodesFollowingLinks(r,a)}}changeScope(){this.treeStore.tree.isViewOnly||nc.isTest||this.isIdle()||this.serialization.idle().then(()=>this.generateAndUpdateQueuedComponents()).then(()=>{if(!_e.isOn("prioritizedModuleEvaluation")){this.persistence.process();return}this.persistence.isIdle()||this.persistence.changeScope()}).catch(r=>qe.reportError(r))}async createVectorSet(r,o){let n=r[0];if(!n)return;let i=this.treeStore.tree.getScopeNodeFor(n);y(De(i),"VectorSet: VectorSetNode must exist.");let a=performance.now(),s=await this.batchSerializeVectors(r,o);if(!s)return;let l={},c=0,p=Object.keys(s).length,m=Ab(p),d=[];for(let f in s){let h=s[f];h&&(l[f]=h,c++,!(c%m!==0&&c!==p)&&(d.push(l),l={}))}for(let f=0;f<d.length;f++){let h=d[f];h&&(await this.persistence.persistBatch(h),o?.("persisting",f))}await this.forceComponentUpdate(i.id),qe.debug("createVectorSet: Spent ",performance.now()-a,"ms creating a new vector set.")}async createModuleFromComponentSource(r,o){if(y(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot create smart components or web pages."),y(Eo(r,this.treeStore.tree),"CodeGenerationStore: componentSourceNode must be a valid component source."),qi(r,this.treeStore.tree,this.modulesStore))return;qe.debug("createModuleFromComponentSource",r.id),this.serialization.prepare(r.id);let i=await this.generateComponent(r.id,1,void 0,{intrinsicSize:o});if(!i)throw new Error("Code not generated");return await this.compileOutput(r,i),cn(r,this.treeStore.tree).map(a=>this.modulesStore.getPersistedModuleByLocalId(a))}revisionNodes(){let r=[];for(let o of this.treeStore.tree.root.children)At(o,this.treeStore.tree)&&r.push(o),(Tr(o)||Uu(o))&&o.children.forEach(n=>{At(n,this.treeStore.tree)&&r.push(n),nt(n)&&n.getUnsortedChildren().forEach(i=>{At(i,this.treeStore.tree)&&r.push(i)})});return r}nodesWithStaleModules(r,o){let n=[],i=o?.ignoreHint??!1;for(let a of this.revisionNodes())mo(a)||r&&!r(a)||(!i&&a.moduleSourceRevisionHint!==a.moduleSourceRevisionCommittedHint||!this.allModulesAreAtRevision(a.id))&&n.push(a);return n}async updateComponent(r,o=0){y(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates.");let n=this.treeStore.tree.get(r);if(!n||!Eo(n,this.treeStore.tree))return!1;if(this.serialization.preparing(r))return await this.serialization.promise(r),await this.untilCompiled(r),!0;qe.debug("Update component: ",r,", Condition: ",o);let i=I(this,at).get(r);this.serialization.prepare(r);let a=await this.generateComponent(r,o,i);return a?this.compileOutput(n,a):!1}async forceComponentUpdate(r){return y(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates."),await this.updateComponent(r,2)?(await this.persistence.process(),!0):!1}queueCallbackAfterComponentCompilation(r,o){let n=I(this,no).get(r);n?n.push(o):I(this,no).set(r,[o])}untilCompiled(r){return new Promise(o=>{this.queueCallbackAfterComponentCompilation(r,o)})}calculateNewModuleRevision(r){let o=this.treeStore.tree.get(r);if(!o||!At(o,this.treeStore.tree))return 1;if(!(!$d(this.treeStore.tree,r)||!this.treeStore.tree.has(r)))return Bb(r,this.scheduleDocumentUpdateIgnoringUndo)}allModulesAreAtRevision(r,o){let n=this.treeStore.tree.get(r);if(!n||!At(n,this.treeStore.tree))return!1;let i=o??n.moduleSourceRevision;return ln(n,this.treeStore.tree).every(a=>this.modulesStore.forType(a).getByStableName(oo(n)).sourceRevision()===i)}async ensureDependencyModulesExist(){for(let r of this.revisionNodes()){if(!Eo(r,this.treeStore.tree))return;if(!qi(r,this.treeStore.tree,this.modulesStore))try{await this.updateComponent(r.id)}catch(o){qe.error("Error updating dependency module",r.id,o)}}}async ensureSourceNode(r){let o=this.treeStore.tree.get(r),n=bt(o)&&!o.isLoaded()?await o.load():o;if(n){if(W(n)&&await this.ensureSiteMetadataModule(),nt(n)&&await this.ensureDependentModulesAreCompatibleWithCollection(n),Rt(n)){let i=this.treeStore.tree.getScopeNodeFor(n);if(!De(i))return;let a=Ae("vectorSet",i.id);if(this.modulesStore.getModuleEntryByLocalId(a))return;await this.createModuleFromComponentSource(i)}await this.ensureAllNodesWithLinksHaveLinkedScopesLoaded(n)}}async ensureSiteMetadataModule(){if(this.treeStore.tree.isViewOnly)return;let r=this.treeStore.tree.root;if(!qi(r,this.treeStore.tree,this.modulesStore))return this.updateComponent(r.id)}hasBlockingUpdates(){if(I(this,at).size>0){for(let[r,o]of I(this,at))if(this.treeStore.tree.has(r)&&o)return!0}return!this.persistence.isIdle()||!this.serialization.isIdle()}async updateModules(r,o){let n=this.treeStore.tree.get(r),i=this.timeline.remoteTreeVersion;if(!n||!Eo(n,this.treeStore.tree))return!1;let a=[];for(let{revision:l,source:c,type:p,artifacts:m}of o){let d={assets:m?.assets,submodules:m?.submodules,binaryAssets:m?.binaryAssets,preventCircularImports:p==="canvasComponent",telemetrySession:this.telemetrySession(r),treeVersion:i,sourceRevision:l,kitSectionsStructure:m?.kitSectionsStructure,svgIcon:m?.files?.find(g=>g.type==="svgIcon")?.content,stableName:!0},f=this.modulesStore.forType(p).getByStableName(oo(n)),h=te.sections(Mb(),c);f.currentSourceEquals(h,d)||a.push({localId:f.localId,source:h,options:d})}if(a.length===0)return!1;let s=await this.modulesStore.updateSources(a);return Rt(n)&&this.vectorsStore.delete(r),W(n)&&this.aiGenerationStore.deleteKitSectionsStructure(r),s}allModulesExistForSources(r,o){let n=oo(r);for(let i of o)if(!this.modulesStore.getPersistedModuleByLocalId(Ae(i.type,n)))return!1;return!0}async compileOutput(r,o){if(this.treeStore.tree.isViewOnly)return!1;let n=o.slice().sort((a,s)=>this.moduleTypeOrder[a.type]-this.moduleTypeOrder[s.type]);if(this.allModulesExistForSources(r,n))await this.updateModules(r.id,n);else for(let a of n){let s=await this.updateModules(r.id,[a]),l=oo(r);!this.modulesStore.getPersistedModuleByLocalId(Ae(a.type,l))&&s&&await this.persistence.persist(r.id,[a])}return nt(r)&&await this.ensureDependentModulesCanRenderCollectionColors(r),I(this,no).get(r.id)?.forEach(a=>a()),I(this,no).delete(r.id),this.persistence.persist(r.id,o,!0),!0}pauseCodeGeneration(r){return qe.debug("Pausing code generation for",r),I(this,dn).add(r),()=>{qe.debug("Resuming code generation for",r),I(this,dn).delete(r),I(this,Qi).debounce()}}async generateAndUpdateQueuedComponents(r){if(this.treeStore.tree.isViewOnly)return[];await this.ensureDependencyModulesExist();let o=[],n=new Map;for(let[a]of I(this,at)){if(I(this,dn).has(a)||this.serialization.preparing(a))continue;let s=this.treeStore.tree.get(a);if(!s||!Eo(s,this.treeStore.tree)||r&&!ln(s,this.treeStore.tree).includes(r)){I(this,at).delete(a);continue}if(this.serialization.prepare(a),Rt(s)){let l=this.treeStore.tree.getScopeNodeFor(s);if(!l)continue;let c=n.get(l.id)??[];c.push(s),n.set(l.id,c)}else o.push(s)}let i=new Set;qe.debug("Batch generating queued vector nodes");for(let a of n.values())try{let s=await this.batchSerializeVectors(a,void 0,i);for(let l in s)this.persistence.persist(l,s[l],!0)}catch{}qe.debug("Generating queued components",{ids:o.map(As)});for(let a of o)try{qe.debug("Flushing queue of ",a.id);let s=await this.generateComponent(a.id,1);s&&(await this.compileOutput(a,s),i.add(a.id))}catch{}return Array.from(i)}async batchSerializeVectors(r,o,n){let i=r[0];if(!i)return;await this.ensureSourceNode(i.id),await this.ensureSourceCache(i.id),r.forEach(m=>this.serialization.prepare(m.id));let a=await Ob(r,this.scheduleDocumentUpdateIgnoringUndo);y(a,"VectorSet: newModuleRevisions must exist");let s={assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},l=await Promise.all(r.map(async m=>{if(!a[m.id])return;let g=(await this.serializerForSourceNode(m)(m,s,{serializationId:this.getSerializationId()}))?.[0];return y(g,"VectorSet: source must exist.",m.id),this.serialization.promise(m.id)?.resolve(),I(this,Vt).delete(m.id),[m.id,g]})),c=0,p={};for(let m of l){if(!m)continue;let[d,f]=m;await this.updateModules(d,[f])&&(p[d]=[f],o?.("serializing",c),c++,n?.add(d))}return p}async createVersionedVectorSet(r){await this.generateAndPersistAllQueuedComponents();let o=await this.generateComponent(r.id,2,void 0,{includeVectorSetSaveIds:!0});return!o||!await this.compileOutput(r,o)?!1:(await this.persistence.process(),!0)}async generateComponent(r,o,n,i){qe.debug("Ensure source node",r),await this.ensureSourceNode(r),qe.debug("Ensure source cache",r),await this.ensureSourceCache(r);let a=await this.calculateNewModuleRevision(r),s=this.treeStore.tree.get(r);if(!s||!Eo(s,this.treeStore.tree)||!this.shouldGenerateUnderCondition(o,s,a,n)){qe.debug("Cancel serialization",r),this.serialization.cancel(r);return}let l=Ht(s)?s.getPrimaryVariant():s;return qe.debug("Serialize",r),this.serialization.commit(s,l,i)}shouldGenerateUnderCondition(r,o,n,i){let a=i??I(this,at).get(o.id);if(I(this,at).delete(o.id),!qi(o,this.treeStore.tree,this.modulesStore))return!0;switch(r){case 2:return!0;case 1:return!k(n)||!this.allModulesAreAtRevision(o.id,n);case 0:return!k(n)&&!!a&&!this.allModulesAreAtRevision(o.id,n);default:$(r)}}addChangeToQueue(r){if(!this.shouldSkipChange(r)){if(Rt(r)&&this.vectorsStore.queue(r.id),mo(r)){let o=r.parentid;y(o,"Collection node has no parent"),I(this,at).set(o,!0);return}I(this,at).set(r.id,!0)}}serializerForSourceNode(r){return nt(r)?hC:Ht(r)?Bd:Xo(r)?wb:we(r)?vC:or(r)?ay:Tr(r)?SC:De(r)?Fb:Rt(r)?Pb:Pe(this.treeStore.tree.get(r.parentid))?Bd:Ib}shouldSkipChange(r){if(U(r)){let o=Q(r.codeComponentIdentifier);if(Mt(o)&&o.type==="screen")return!0}return!1}async ensureSourceCache(r){let o=this.treeStore.tree.get(r);!o||o.update===o.cache.lastUpdate||await new Promise(n=>{this.runBeforeNextFrame(()=>{bt(o)&&o.update!==o.cache.lastUpdate&&this.updateTreeCache(o.id),n()})})}async ensureDependentModulesAreCompatibleWithCollection(r){let o=Ae("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);!n||n.size===0||await Promise.all(Array.from(n).map(async i=>{let a=i,s=this.modulesStore.getPersistedModuleByLocalId(a);if(!(!s||!Es(s)))return this.forceComponentUpdate(s.name)}))}async ensureDependentModulesCanRenderCollectionColors(r){let o=Ae("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);if(!n||n.size===0)return;let i=this.modulesStore.forType("collection").getByStableName(r.id);i&&i.annotations(null,"default")?.framerColorSyntax&&await Promise.all(Array.from(n).map(async a=>{let[s,l]=Xm(a);s==="draftCollection"||this.modulesStore.forType(s).getByStableName(l)?.annotations(null,"default")?.framerColorSyntax||await this.forceComponentUpdate(l)}))}async ensureAllNodesWithLinksHaveLinkedScopesLoaded(r){let o=new Set;this.treeStore.tree.beginAllowPartialScopeAccess();for(let n of r.walkWithSkipChildren()){if(!Be(n.node))continue;let i=n.node.getLink();if(!La(i))continue;let a=this.treeStore.tree.get(i.webPageId);!a||a.loaded||this.modulesStore.forType("screen").getByStableName(i.webPageId)?.annotations(null,"default")?.framerScrollSections||(o.add(a),n.skipChildren())}this.treeStore.tree.endAllowPartialScopeAccess(),await this.treeStore.tree.loadScopes(Array.from(o))}};dn=new WeakMap,at=new WeakMap,no=new WeakMap,ii=new WeakMap,Qi=new WeakMap,ai=new WeakMap,si=new WeakMap,Vt=new WeakMap,zl=new WeakSet,jb=async function(r,o,n){if(!or(r)&&!this.treeStore.tree.has(o.id))return;let i=this.telemetrySession(r.id),a=i.start("synchronize"),s=performance.now();qe.debug("Waiting for ModulesStore to be idle",{id:r.id}),await this.modulesStore.whenIdle();let l=performance.now()-s;qe.debug("Waited",Math.round(l/1e3*100)/100,"seconds for ModulesStore to be idle",{id:r.id}),a.end();let c=r.draftOrCurrent();if(bt(c)&&(!c.isLoaded()||c.loaded.children?.length===0))return;let p=i.start("serialize");nt(r)&&bV(r,this.treeStore,this);let m=this.serializerForSourceNode(r);I(this,Vt).get(r.id)?.resolve(),I(this,Vt).delete(r.id);let d=await m(r,{assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},{serializationId:this.getSerializationId(),initialIntrinsicSize:n?.intrinsicSize,includeVectorSetSaveIds:n?.includeVectorSetSaveIds});return d.forEach(({source:f,artifacts:h})=>{if(qe.trace("serializeComponent",`
>>>> >>>>
`,Y(f),`
<<<< <<<<`),h?.submodules)for(let[g,S]of h.submodules)qe.trace("serializeComponent",`
>>>>`,g,`>>>>
`,S,`
<<<<`,g,"<<<<")}),p.end(d),d};function bV(e,t,r){let o=e.instanceIdentifier,n=P.dataForIdentifier(o);if(!n||!Object.values(n.properties).some(s=>s?.type==="image"))return;let a=new Set;for(let s of t.tree.root.children){if(!bt(s))continue;if(W(s)&&s.dataIdentifier===o){a.add(s);continue}s.loaded?.some(c=>ze(c)&&c.dataIdentifier===o)&&a.add(s)}a.forEach(s=>{r.forceComponentUpdate(s.id).catch(ke)})}var IV=ge("exportToHTML");function li(e,t,r,o=new Set([t]),n=new Set){for(let{node:i,skipChildren:a}of t.walkWithSkipChildren()){if(n.has(i)){a();continue}n.add(i);for(let s of df(i,r)){let l=cf(s);if(!l)continue;let c=e.getNode(l);if(c){if(!e.isGroundNode(c)){IV.reportError("Navigation target node must be ground node",{sourceId:i.id,targetId:c.id});continue}o.add(c),li(e,c,r,o,n)}}U(i)&&Object.values(ks(e,i,r)).flat().forEach(s=>li(e,s.node,r,o,n))}return o}async function Jb(e,t){await t.codeGenerationStore.updateComponent(e.id,1)}async function Xb(e,t,r,o={}){let{waitForAll:n=!0,persist:i=!0}=o,a=li(t.tree,e,r),s=[],l=[];for(let p of a)l.push(pt("screen",p.id,"default").value),p!==e&&s.push(Jb(p,t));let c=Jb(e,t);return s.push(c),await Promise.all(n?s:[c]),i&&await t.codeGenerationStore.persistence.process(),Hn(r,l,t.stores.modulesStore)}function qb(e,t){let r=t.getPrimaryVariant();Pc(r)&&(e.routes[t.id]=r.pageEffects)}function iQ(e,t,r){let o=t.getPrimaryVariant();if(Pc(o)){let n={};for(let i in o.pageEffects)n[i]=r.dedupe("effect",o.pageEffects[i]);e.routes[t.id]=n}}function Kb(e,t){if(U(e)&&Og(t,e)){let r=zg(t,e);return y(W(r),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),y(r.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(W(e)&&e.isLoaded())return{entryNode:e.getPrimaryVariant(),entryScopeNode:e};if(nr(e)){let r=t.getGroundNodeFor(e),o=t.getScopeNodeFor(r);if(Pe(o))return{entryNode:r,entryScopeNode:o}}if($e(e)){let r=t.getScopeNodeFor(e);return y(xr(r),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),y(r.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(Lt(e)&&!$e(e)){let r=t.getScopeNodeFor(e);return y(Ue(r),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:e,entryScopeNode:r}}if(Rm(e)&&e.isVectorSetItem){let r=t.getScopeNodeFor(e);return y(De(r),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:e,entryScopeNode:r}}return{entryNode:e}}function Yb(e,t){let r=e.getGroundNodeFor(t),o=e.getScopeNodeFor(r);return we(o)&&!U(r)}var Qb="utils";function Zb(e,t){if(!W(t)||!t.dataIdentifier)return;let r=Q(t.dataIdentifier);if(!be(r)||r.kind!=="localModuleExport")return;let o=e.getPersistedModuleByLocalId(r.localId);if(o&&o.exports.includes(Qb))return{exportIdentifier:Qb,moduleURL:o.moduleURL,collectionId:r.localIdName}}var eI=ge("renderInfoForPreviewItem");function ci(e){let t=e.root.getDefaultLocale(),r=e.root.locales,o=[t];return r&&o.push(...r),o}function tI(e,t,r,o,n){let i=[],a=[],s={global:n.root.globalPageEffect,routes:{}},l=new Set,c=ci(e.tree),m=Qm(c,{includeDrafts:!0}).find(S=>S.id===o);for(let S of n.root.children){if(!he(S)&&!W(S))continue;if(he(S)&&i.push({id:S.id,moduleIdentifier:Hy(),layoutTemplate:{moduleIdentifier:S.instanceIdentifier}}),W(S)){let b=S.isLoaded()?Gc(tf(S)):[],w=es(n,S),M=Zb(e.stores.modulesStore,S);M&&a.push(M),i.push({id:S.id,moduleIdentifier:S.instanceIdentifier,collectionId:M?.collectionId,path:w,elements:b,layoutTemplate:NV(S,m)}),S.isLoaded()&&qb(s,S)}let N=P.componentForIdentifier(S.instanceIdentifier)?.fonts;if(!N){eI.debug("Did not find fonts for component:",S.instanceIdentifier);continue}for(let b of Wy(N))l.add(b)}let d=r?e.stores.previewStore.getPathSlugs(t.id,r,m):void 0,f=[],h=d?.unresolvedSlugs;for(let S in h){let C=h[S];y(C),f.push({variableId:S,collectionId:C.collectionId,collectionItemId:C.collectionItemId})}let g=d?.pathVariables?Gc(d.pathVariables):[];return eI.debug("renderInfoFor",{webPageNode:t,collectionItemNodeId:r,initialUnresolvedPathSlugs:f}),{kind:"webpage",routes:i,collectionUtils:a,locales:c,initialPathVariables:g,pageEffects:s,preloadFonts:Array.from(l),initialRoute:t.id,initialUnresolvedPathSlugs:f,initialLocaleId:o}}function NV(e,t){if(!zo(e))return;let r=e.getResolvedControlPropValues(P,Gy(),void 0,t);return{moduleIdentifier:e.layoutTemplateIdentifier,props:Me(r)?void 0:r,richTextControlKeys:e.getRichTextControlKeys(P),vectorSetItemControls:e.getComponentVectorSetChildren(P)}}function rI(e,t){if(!t)return{kind:"empty"};switch(t.type){case"component":return y(be(t.componentId),"Previewing component should provide module identifier",t.componentId),{kind:"module",layout:"component",moduleIdentifier:t.componentId,locales:ci(e.tree),initialLocaleId:e.stores.chromeStore.canvasLocaleId};case"node":{let r=e.tree.get(t.nodeId);y(r,"Previewing node should provide correct node id",t.nodeId);let o=Kb(r,e.tree),n=o.entryScopeNode;if(he(n))return tI(e,n,t.collectionItemNodeId,e.stores.chromeStore.canvasLocaleId,e.tree);if(Pe(n))return{kind:"module",moduleIdentifier:pt("design",r.id,"default").value,layout:"design-screen",locales:ci(e.tree),initialLocaleId:e.stores.chromeStore.canvasLocaleId};if(W(o.entryScopeNode))return tI(e,o.entryScopeNode,t.collectionItemNodeId,e.stores.chromeStore.canvasLocaleId,e.tree);if(Ue(o.entryScopeNode)){let i={variant:o.entryNode.id};return{kind:"module",moduleIdentifier:o.entryScopeNode.instanceIdentifier,props:i,layout:"component",locales:ci(e.tree),initialLocaleId:e.stores.chromeStore.canvasLocaleId}}if(De(o.entryScopeNode))return{kind:"module",moduleIdentifier:pt("vector",o.entryNode.id,"default").value,layout:"component",locales:ci(e.tree),initialLocaleId:e.stores.chromeStore.canvasLocaleId};if(U(o.entryNode)){let i=o.entryNode.getCodeComponentProps(P);return{kind:"module",moduleIdentifier:o.entryNode.codeComponentIdentifier,props:i,layout:"component",locales:ci(e.tree),initialLocaleId:e.stores.chromeStore.canvasLocaleId}}if(Yb(e.tree,o.entryNode)){let i=e.tree.getGroundNodeFor(o.entryNode),a=li(e.tree,o.entryNode,P),s=[];for(let l of a){let c=e.tree.getGroundNodeFor(l),p=pt("screen",c.id,"default").value;s.push({id:c.id,moduleIdentifier:p})}return{kind:"prototype",routeId:i.id,routes:s}}throw new Error(`Unsupported node for preview: ${r.id}`)}default:$(t)}}var wV="getVectorSetItems";function oI(e){return wV in e}function nI(e,t){return e.getNodesWithTrait(t,o=>At(o,e)).flatMap(o=>{if(o.moduleSourceRevision===void 0)return[];let n=cn(o,e).filter(a=>!a.includes("draftCollection")),i=o.moduleSourceRevision;return n.map(a=>({moduleIdentifier:gu(a,"default").value,moduleRevision:i}))})}function xV(e){return e.stores.chromeStore.mainView===1?e.stores.chromeStore.codeEditorPreviewVisible:e.stores.chromeStore.mainView===3}function tZ(e,t={}){let{previewStore:r,fullsizePreviewStore:o,loadingStore:n,chromeStore:i}=e.stores;if(!n.hasMinimalEditableData)return;let{visible:a,shownOnLaunch:s,source:l="unknown"}=t,c=xV(e),p=typeof a=="boolean"?a:!c;if(i.setPreviewVisible(p),!c&&p){r.addActiveSession();let m=r.computePreviewItem();if(!RV(e,m))r.item=m;else if(m?.type==="node"){let d=e.tree.get(m.nodeId);y(d,"Did not find previewNode",m.nodeId),o.updatePreviewSize(d)}kV(e,m).then(d=>{r.targetModuleRevisions=nI(e.tree,d)}).catch(ke).finally(()=>{r.item=m}),aC({shown_on_launch:s,source:l})}else c&&!p&&(r.removeActiveSession(),r.stickyPreviewItem=!1,r.item=void 0)}function RV(e,t){if(!t||t.type!=="node")return!1;let r=rI(e,t);switch(r.kind){case"module":{let o=Q(r.moduleIdentifier);return Mt(o)?!!e.stores.modulesStore.getModuleEntryByLocalId(o.localId):!1}case"webpage":{let o=Ae("screen",r.initialRoute);return!!e.stores.modulesStore.getModuleEntryByLocalId(o)}case"prototype":{let o=Ae("prototype",r.routeId);return!!e.stores.modulesStore.getModuleEntryByLocalId(o)}case"empty":return!1;default:$(r)}}async function kV(e,t){if(Ac(e,"canDesign")||!t)return[];let r=await VV(t,e),o=await e.codeGenerationStore.generateAndUpdateQueuedComponents();return await e.codeGenerationStore.serialization.idle(),[r,...o]}async function VV(e,t){if(Ac(t,"canDesign"))return Promise.resolve(void 0);if(e.type==="component"){await t.codeGenerationStore.updateComponent(e.componentId,1);return}else if(e.collectionItemNodeId){let r=t.stores.treeStore.tree.getParent(e.collectionItemNodeId);return r?(await t.codeGenerationStore.updateComponent(r.id,1),r.id):void 0}else{let r=t.stores.treeStore.tree,o=r.get(e.nodeId);y(o,"Did not find previewNode",e.nodeId);let n=r.getCanvasScopeNodeFor(o);if(y(n,"Tried triggering code generation for non canvas scope node:",o.id),oI(n))return Rt(o)?(await t.codeGenerationStore.updateComponent(o.id,1),o.id):Promise.resolve(void 0);if(Ht(n))return await t.codeGenerationStore.updateComponent(n.id,1),n.id;if(we(n))return await Xb(o,t,P),o.id;if(Pe(n))return await t.codeGenerationStore.updateComponent(o.id,1),o.id;$(n)}}var Zi=class Zi extends Dn{constructor(){super(...arguments);T(this,"menu",null)}show(r,o){if(!_e.isOn("improvedMenus")){DV(r,o);return}let n={...o,className:o.options?.className},i=Zi.buildItems(r);this.menu={items:i,config:n,startTime:performance.now()}}close(){this.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null)})}};T(Zi,"buildItems",(r,o=[])=>{let n=[];for(let[i,a]of r.entries()){if(!k(a.submenu)&&!rr(a.submenu))continue;let{submenu:s,...l}=a,c=o?[...o,i]:[i],p={...l,path:c};if(p.type==="separator"){if(i===0||i===r.length-1||n[n.length-1]?.type==="separator")continue;n.push(p);continue}if(a.disabled&&(p.enabled=!1),a.action&&(p.role=a.action),a.role){let{states:d,options:f}=Ny(a.role),h=d[a.role],{label:g,checked:S,visible:C}=f[a.role]??{};E(g)&&(p.label=g),k(a.checked)&&ur(S)&&(p.checked=S),k(a.visible)&&ur(C)&&(p.visible=C),k(a.disabled)&&k(a.enabled)&&ur(h)&&(p.enabled=h)}if(a.visible===!1)continue;if(s){let d=Zi.buildItems(s,c),f={...p,submenu:d};n.push(f);continue}let m=MV(p);n.push(m)}return n.length>0&&n[n.length-1]?.type==="separator"&&n.pop(),n.length>0&&n[0]?.type==="separator"&&n.shift(),n});var iI=Zi;function MV(e){let{role:t}=e;if(!t)return e;let r={...e};return!Jm&&!e.acceleratorWindows&&(r.acceleratorWindows=_y[t]),e.accelerator||(r.accelerator=Uy[t]),r}function DV(e,t){let r=jy.buildFromTemplate(e),o={...t.options,onCancel:t.onCancel};r.popup(t.location,o).catch(ke).finally(t.onDone)}var ZV={};bT(ZV,{amethyst:()=>FV,aquaBlue:()=>LV,atomDark:()=>EV,atomLight:()=>AV,ayuDark:()=>BV,ayuLight:()=>OV,cmsTheme:()=>PV,cobalt2:()=>zV,cyberpunk:()=>$V,dracula:()=>WV,framerDark:()=>ea,framerLight:()=>HV,freeCodeCamp:()=>GV,githubDark:()=>UV,githubLight:()=>_V,levelUp:()=>jV,magic:()=>XV,monokaiPro:()=>JV,neoCyan:()=>qV,nightOwl:()=>KV,sandpackDark:()=>YV,sandpackLight:()=>QV});var PV={colors:{surface1:Bt.cmsCodeBlockSurface1,surface3:Bt.cmsCodeBlockSurface3,disabled:Bt.cmsCodeBlockDisabled,accent:Bt.cmsCodeBlockAccent,errorSurface:Bt.cmsCodeBlockErrorSurface},syntax:{plain:Bt.cmsCodeBlockPlain,comment:Bt.cmsCodeBlockComment,keyword:Bt.cmsCodeBlockKeyword,tag:Bt.cmsCodeBlockTag,punctuation:Bt.cmsCodeBlockPunctuation,definition:Bt.cmsCodeBlockDefinition,property:Bt.cmsCodeBlockProperty,static:Bt.cmsCodeBlockStatic,string:Bt.cmsCodeBlockString},font:{mono:Pg.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},FV={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},LV={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},EV={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},AV={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},BV={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},OV={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},zV={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},$V={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},WV={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ea={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},HV={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},GV={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},UV={colors:{surface1:"#0d1117",surface3:ea.colors?.surface3,disabled:ea.colors?.disabled,accent:ea.colors?.accent,errorSurface:ea.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},_V={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},jV={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},JV={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},XV={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},qV={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},KV={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},YV={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},QV={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};function aI(e){return e!=null&&typeof e=="object"&&e.nodeType===1}function sI(e,t){return t&&e==="hidden"?!1:e!=="visible"&&e!=="clip"}function Gd(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let r=getComputedStyle(e,null);return sI(r.overflowY,t)||sI(r.overflowX,t)}return!1}function $l(e,t,r,o,n,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=r||a>=t&&s>=r?i-e-o:a>t&&s<r||i<e&&s>r?a-t+n:0}function Ud(e,t){let{scrollMode:r,block:o,inline:n,boundary:i,skipOverflowHiddenElements:a}=t,s=typeof i=="function"?i:z=>z!==i;if(!aI(e))throw new TypeError("Invalid target");let l=document.scrollingElement||document.documentElement,c=[],p=e;for(;aI(p)&&s(p);){if(p=p.parentNode,p===l){c.push(p);break}p===document.body&&Gd(p)&&!Gd(document.documentElement)||Gd(p,a)&&c.push(p)}let m=window.visualViewport,d=m?.width??innerWidth,f=m?.height??innerHeight,h=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,{height:S,width:C,top:N,right:b,bottom:w,left:M}=e.getBoundingClientRect(),L=o==="start"||o==="nearest"?N:o==="end"?w:N+S/2,F=n==="center"?M+C/2:n==="end"?b:M,H=[];for(let z of c){let{height:J,width:me,top:fe,right:de,bottom:le,left:R}=z.getBoundingClientRect();if(r==="if-needed"&&N>=0&&M>=0&&w<=f&&b<=d&&N>=fe&&w<=le&&M>=R&&b<=de)return H;let Z=getComputedStyle(z),ie=parseInt(Z.borderLeftWidth,10),Ie=parseInt(Z.borderTopWidth,10),ct=parseInt(Z.borderRightWidth,10),K=parseInt(Z.borderBottomWidth,10),O=0,ne=0,Ke="offsetWidth"in z?z.offsetWidth-z.clientWidth-ie-ct:0,Ee="offsetHeight"in z?z.offsetHeight-z.clientHeight-Ie-K:0;if(l===z)o==="start"?O=L:o==="end"?O=L-f:o==="nearest"?O=$l(g,g+f,f,Ie,K,g+L,g+L+S,S):O=L-f/2,n==="start"?ne=F:n==="center"?ne=F-d/2:n==="end"?ne=F-d:ne=$l(h,h+d,d,ie,ct,h+F,h+F+C,C),O=Math.max(0,O+g),ne=Math.max(0,ne+h);else{o==="start"?O=L-fe-Ie:o==="end"?O=L-le+K+Ee:o==="nearest"?O=$l(fe,le,J,Ie,K+Ee,L,L+S,S):O=L-(fe+J/2)+Ee/2,n==="start"?ne=F-R-ie:n==="center"?ne=F-(R+me/2)+Ke/2:n==="end"?ne=F-de+ct+Ke:ne=$l(R,de,me,ie,ct+Ke,F,F+C,C);let{scrollLeft:He,scrollTop:ve}=z;O=Math.max(0,Math.min(ve+O,z.scrollHeight-J+Ee)),ne=Math.max(0,Math.min(He+ne,z.scrollWidth-me+Ke)),L+=ve-O,F+=He-ne}H.push({el:z,top:O,left:ne})}return H}function lI(e){return e===Object(e)&&Object.keys(e).length!==0}function eM(e,t="auto"){let r="scrollBehavior"in document.body.style;e.forEach(({el:o,top:n,left:i})=>{o!==document.body&&(o.scroll&&r?o.scroll({top:n,left:i,behavior:t}):(o.scrollTop=n,o.scrollLeft=i))})}function tM(e){return e===!1?{block:"end",inline:"nearest"}:lI(e)?e:{block:"start",inline:"nearest"}}function cI(e,t){let r=!e.ownerDocument.documentElement.contains(e);if(lI(t)&&typeof t.behavior=="function")return t.behavior(r?[]:Ud(e,t));if(r)return;let o=tM(t);return eM(Ud(e,o),o.behavior)}function NZ(e,t){if(!vg(e)){t.onlyNodesWithFormInputFontStyles=!1;return}Nr("formInputFontFamily",t,e),rM(t,e),Nr("formInputFontColor",t,e),Nr("formInputFontWeight",t,e),Nr("formInputFontStyle",t,e),Nr("formInputFontLineHeight",t,e),Nr("formInputFontLineHeightUnit",t,e),Nr("formInputFontTextAlignment",t,e),Nr("formInputFontLetterSpacing",t,e),Nr("formInputFontLetterSpacingUnit",t,e),ft(t.formInputFontSelector)&&(t.formInputFontSelector=new Set),Sa(e.formInputFontSelector)&&t.formInputFontSelector.add(e.formInputFontSelector),t.formInputOpenTypeFontFeatures=_d(t.formInputOpenTypeFontFeatures,e.formInputOpenTypeFontFeatures)}function rM(e,t){let r=e.formInputFontSize,o=e.formInputFontSizeUnit;if(yt(r)&&yt(o)||k(t.formInputFontSize))return;let[n,i]=G(t.formInputFontSize)?[t.formInputFontSize,"px"]:go(t.formInputFontSize);if(ft(o))e.formInputFontSizeUnit=i;else if(yo(i,o)){e.formInputFontSizeUnit=oe,e.formInputFontSize=oe;return}ft(r)?e.formInputFontSize=n:yo(n,r)&&(e.formInputFontSize=oe)}function _d(e,t){let r=new Set(Cn(e)?Object.keys(e):void 0),o=t??[],n=Cn(e)?e:{};for(let i of o){if(!yi(i))continue;let a=n[i];k(a)&&(n[i]=Cn(e)?oe:!0),r.delete(i)}for(let i of r)yi(i)&&(n[i]=oe);return n}var oM={borderBottom:oe,borderLeft:oe,borderRight:oe,borderTop:oe,borderWidth:oe,borderColor:oe,borderStyle:oe,borderPerSide:oe};function Le(e,t){return yt(t)?oe:ft(t)?e:yo(e,t)?oe:e}function nM(e,t){return yt(t)?oe:ft(t)||dr(e,t)?e:oe}function iM(e,t,r){return y(Cn(e)),yt(e)?oe:e.length!==t.length?oe:(e.forEach((o,n)=>{let i=t[n];y(i);let a=o.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":ta(o,i,r);break;default:$(a)}}),e)}function ta(e,t,r){switch(e.type){case"array":{if(y(t.type==="array"),y(r.type==="array"),yt(e.value))break;if(ft(e.value)){if(Pt(t.value)){e.value=t.value;break}e.value=t.value.map(o=>dM(r.control,o.id))}if(Pt(t.value)){e.value=Le(t.value,e.value);break}if(Pt(e.value)){e.value=oe;break}e.value=iM(e.value,t.value,r.control);break}case"slot":{if(y(t.type===e.type),yt(e.value))break;y(r.type==="slot"),y(!D(t.value),"Slots don't support dynamic values"),ft(e.value)?e.value=t.value:e.value=oe;break}case"object":if(y(t.type===e.type),yt(e.value))break;if(y(r.type==="object"),ft(e.value))if(t.value===null)e.value=null;else{e.value={};for(let o in r.controls){let n=r.controls[o];y(n);let i=cM(n);i&&(e.value[o]=i)}}if(e.value===null||t.value===null){e.value!==t.value&&(e.value=oe);break}for(let o in e.value){let n=r.controls[o];y(n);let i=e.value[o];y(i);let a=t.value[o];y(a,"getControlProps(), should have added these if they were missing from the document data"),ta(i,a,n)}break;case"transition":if(y(t.type===e.type),yt(e.value))break;if(ft(e.value)){e.value=t.value;break}if(D(e.value)||D(t.value)||!e.value||!t.value){e.value=Le(t.value,e.value);break}dr(e.value,t.value)||(e.value=oe);break;case"responsiveimage":if(y(t.type==="image"),e.value=Le(t.value,e.value),e.type==="responsiveimage"){let o=E(t.alt)?t.alt:"";e.alt=Le(o,e.alt);let{positionX:n,positionY:i}=t;e.positionX=Le(n,e.positionX),e.positionY=Le(i,e.positionY)}break;case"fusednumber":y(t.type===e.type),e.single=Le(t.value.single,e.single),e.isFused=Le(t.isFused,e.isFused),e.fused[0]=Le(t.value.fused[0],e.fused[0]),e.fused[1]=Le(t.value.fused[1],e.fused[1]),e.fused[2]=Le(t.value.fused[2],e.fused[2]),e.fused[3]=Le(t.value.fused[3],e.fused[3]);break;case"link":{if(y(t.type===e.type),yt(e.value))break;if(ft(e.value)){e.value=t.value;break}if(D(e.value)||D(t.value)||!e.value||!t.value){e.value=Le(t.value,e.value);break}if(!fc(e.value,t.value)){e.value=oe;break}break}case"linkrelvalues":{if(y(t.type===e.type),yt(e.value))break;if(ft(e.value)){e.value=t.value;break}if(D(e.value)||D(t.value)||!e.value||!t.value){e.value=Le(t.value,e.value);break}dr(e.value,t.value)||(e.value=oe);break}case"pagescope":if(y(t.type===e.type),yt(e.value))break;if(ft(e.value)){e.value=t.value;break}if(!e.value||!t.value){e.value=Le(t.value,e.value);break}if(!fc(e.value,t.value)){e.value=oe;break}break;case"font":{if(y(r.type==="font"),y(t.type===e.type),yt(e.value))break;if(ft(e.value)){if(k(t.value)){e.value=t.value;break}let h=new Set([t.value.fontSelector]),g=je,S=new Set,C=new Set,N=je,b=je,w=je,M=new Set,L={};if(r.displayFontSize){let[F,H]=gi(t.value.fontSize)?go(t.value.fontSize):[];g=F,H&&S.add(H)}if(r.displayTextAlignment&&(b=t.value.textAlignment),r.controls==="extended"){let[F,H]=t.value.lineHeight??[];N=F,H&&C.add(H);let[z,J]=t.value.letterSpacing??[];w=z,J&&M.add(J)}t.value.openTypeFontFeatures&&(L=(t.value.openTypeFontFeatures??[]).reduce((F,H)=>(yi(H)&&(F[H]=!0),F),{})),e.value={fontSelector:h,lineHeightValue:N,lineHeightUnits:C,fontSizeValue:g,fontSizeUnits:S,textAlignment:b,letterSpacingValue:w,letterSpacingUnits:M,openTypeFontFeatures:L};break}if(k(e.value)){k(t.value)||(e.value=oe);break}if(k(t.value)){e.value=oe;break}let{fontSelector:o,lineHeight:[n,i]=[],fontSize:a,textAlignment:s,letterSpacing:[l,c]=[],openTypeFontFeatures:p}=t.value;e.value.fontSelector.add(o);let[m,d]=gi(a)?go(a):[],f=e.value.fontSizeValue!==m||!k(d)&&!e.value.fontSizeUnits.has(d);r.displayFontSize&&f&&(e.value.fontSizeValue=oe,d&&e.value.fontSizeUnits.add(d)),r.displayTextAlignment&&e.value.textAlignment!==s&&(e.value.textAlignment=oe),r.controls==="extended"&&(e.value.lineHeightValue!==n&&(e.value.lineHeightValue=oe),i&&e.value.lineHeightUnits.add(i),e.value.letterSpacingValue!==l&&(e.value.letterSpacingValue=oe),c&&e.value.letterSpacingUnits.add(c)),e.value.openTypeFontFeatures=_d(e.value.openTypeFontFeatures,p);break}case"customcursor":case"scrollsectionref":{y(t.type===e.type);let o=dr(t.value,e.value)?e.value:t.value;e.value=Le(o,e.value);break}case"border":{if(y(t.type===e.type),ft(e.value)){D(t.value)?e.value=t.value:ot(t.value)?e.value=null:e.value={...t.value};break}if(D(t.value)||D(e.value)||ot(t.value)||ot(e.value)){yo(t.value,e.value)&&(e.value=oM);break}let o=e.value;o.borderTop=Le(t.value.borderTop,o.borderTop),o.borderRight=Le(t.value.borderRight,o.borderRight),o.borderBottom=Le(t.value.borderBottom,o.borderBottom),o.borderLeft=Le(t.value.borderLeft,o.borderLeft),o.borderWidth=Le(t.value.borderWidth,o.borderWidth),o.borderColor=Le(t.value.borderColor,o.borderColor),o.borderStyle=Le(t.value.borderStyle,o.borderStyle);break}case"boxshadow":y(t.type===e.type),e.value=mm(t.value,e.value);break;case"multicollectionreference":y(t.type===e.type),e.value=nM(t.value,e.value);break;case"gap":{if(y(t.type===e.type),e.value=Le(t.value,e.value),!yt(e.columnGap)){let o=D(t.value)?oe:It(t.value);ft(e.columnGap)?e.columnGap=o:yo(o,e.columnGap)&&(e.columnGap=oe)}if(!yt(e.rowGap)){let o=D(t.value)?oe:zn(t.value);ft(e.rowGap)?e.rowGap=o:yo(o,e.rowGap)&&(e.rowGap=oe)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":y(t.type===e.type),e.value=Le(t.value,e.value);break;default:}}function ra(e){switch(e.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:e.type,value:je};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:e.type,value:je};case"gap":return{type:e.type,value:je,columnGap:je,rowGap:je};case"trackingid":return{type:e.type,value:je,trackingIdAIPrompt:je};case"fusednumber":return{type:"fusednumber",isFused:je,single:je,fused:[je,je,je,je]};case"responsiveimage":return{type:"responsiveimage",value:je,alt:je,positionX:je,positionY:je};case"eventhandler":return null;default:return null}}var aM={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function sM(e){return Object.hasOwn(aM,e)}function lM(e){return sM(e.type)}function cM(e){let t=ra(e);return t?(y(lM(t)),t):null}function dM(e,t){let r=ra(e);y(r);let o=r;return o.id=t,o}function WZ(e,t){let r={};for(let o in e){let n=e[o];if(!n)continue;let i=ra(n);i&&(r[o]=i)}for(let o of t)for(let n in o){let i=e[n];if(y(i),i.type==="eventhandler")continue;let a=r[n];y(a,"Each control prop should have a corresponding reduced control prop");let s=o[n];y(s),ta(a,s,i)}return r}var dI="--top-flash-inset",uI="--right-flash-inset",pI="--bottom-flash-inset",mI="--left-flash-inset",fI="--flash-radius",jd="flash_fh6lfgu",Jd="defaultStyle_d8eehx6",hI="warningStyle_wdvaq7i",gI="glowStyle_ghqxg7a";var na=2;function yI(e="default"){switch(e){case"glow":return[gI];case"default":return[Jd];case"warning":return[Jd,hI]}}function oa(e,t,r){e.style.setProperty(t,`${r??0}px`)}function SI(e,t){oa(e,dI,t?.inset?.top),oa(e,uI,t?.inset?.right),oa(e,pI,t?.inset?.bottom),oa(e,mI,t?.inset?.left),t?.radius&&oa(e,fI,t.radius),e.addEventListener("animationend",function r(){e.classList.remove(jd),e.classList.remove(...yI(t?.style)),e.removeEventListener("animationend",r)}),e.classList.add(jd),e.classList.add(...yI(t?.style))}function CI(e){SI(e,{style:"default",inset:{top:na,right:-(Ec.panelPadding-na),left:-(Ec.panelPadding-na),bottom:na}})}function vI({id:e,flash:t}){let r=document.getElementById(e);r instanceof HTMLDivElement&&(cI(r,{scrollMode:"if-needed",block:"start"}),t&&CI(r))}function bI(e){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}var II="breadcrumb-collection";function Wl(e,t,r=0){let o=t.getItemIds(e.id);return o?o[r]??o[0]:void 0}function pM(e,t,r){let o=e.tree.getNode(r);if(!o)return null;if(!qo(o))return{variableProvider:o,variableId:t};let n=e.tree.getNodeWithTrait(o.dataRepeaterArray.providerId,Qp);return n?{variableProvider:n,variableId:o.dataRepeaterArray.id}:null}function wee(e,t,r){let{chromeStore:o,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:s,codeEditorStore:l,selectionStore:c}=e.stores;if(r===Kp){o.setLocalizationsVisible(!0);return}let p=pM(e,t,r);if(!p)return;let{variableProvider:m,variableId:d}=p;if(lm(m))i.selectedVariableId=d,n.set({type:"Variables",source:"variableReference"});else if(W(m)||jr(m)){let{dataIdentifier:f}=m;if(!f)return;if(Ir(f)){if(o.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{o.chromeIsVisible=!0,mt(m)?(c.set(m.id),e.runAtEndOfFrame(()=>vI({id:"data-repeater-panel",flash:!0}))):W(m)?e.runAtEndOfFrame(()=>{let S=document.getElementById(II);S&&bI(S)}):void 0}});return}let h=Ii(e.tree,f);if(h){W(m)&&y(m.isLoaded(),"Web page node should be loaded");let S=Sm(d),C=jg(h),N=S[0],b=S[1],w=N===Ho,M=N===Wo,L=b;if(L||(w||M?L=C:L=N),!L)return;let H=mM({collectionNode:h,engine:e,variableId:L,variableProvider:m,offset:w?1:M?-1:0});H?(a.pushExistingItemToOverlayStack(H.item.id),a.setCollectionItemControlToHighlight(H.variableId)):(s.select(Cm,{keepHistory:!1}),c.set(h),a.setCollectionItemControlToHighlight(L));return}let g=py(P,f);g&&l.editFile(g.file)}}function mM({engine:e,variableId:t,variableProvider:r,offset:o=0}){let n=TI({engine:e,variableProvider:r});if(n)return n;let i=t.split(".");y(i.length>=0,"VariableID must not be empty");let a=t;if(i.length>1){let[c]=i,p=e.tree.getContentManagementNode()?.loaded;if(!p||!p.children.find(d=>d.variables.some(f=>f.id===c)))return;a=c}let s=Wl(r,e.stores.treeStore.sandboxCollectionData,o),l=e.tree.get(s);if(mo(l))return{item:l,variableId:a}}function TI({engine:e,variableProvider:t}){if(!Vh(t))return;let[r,...o]=t.collectionFilters?.filters.flatMap(l=>l?.itemKey!=="id"?[]:l.transforms).flatMap(l=>fM(l)??[])??[];if(!r?.providerId||o.length>0)return;let n=e.tree.getNode(r.providerId);if(!n||!(ze(n)||W(n))||!n.dataIdentifier||!Ii(e.tree,n.dataIdentifier))return;let a=Wl(n,e.stores.treeStore.sandboxCollectionData),s=e.tree.get(a);if(mo(s))return s?{item:s,variableId:r.id}:TI({engine:e,variableProvider:n})}function fM(e){if(!(e.name!=="equals"&&e.name!=="isIncludedIn"||!pe(e.value)||!e.value.providerId))return e.value}function Aee(e,t,r,o,n){if(ym(r.id))return;let i=e.getNodeWithTrait(r.providerId,mt);if(!i)return;let a=i.dataIdentifier;if(!Mt(a))return;let s=Ii(e,a);if(!s)return;n??=Wl(i,t);let l=e.getNodeWithTrait(n,mo);if(!l)return;let p=s.getPropertyControls(e)[r.id];if(!p)return;let m=s.getVariable(r.id);if(!m)return;let d=l.getControlProp(r.id),{controlProp:f,reducedControlProp:h}=hM(p,d);if(fy(f)&&(y(h,"Reduced control prop should not be null when a collection control prop is present"),s.id===l.parentid&&!(s.managedByPlugin&&!m.userEditable)&&m.type===o&&f.type===o))return{collectionNode:s,collectionItemNode:l,variableDefinition:m,controlDescription:p,rawControlProp:d,controlProp:f,reducedControlProp:h}}var NI=new WeakMap;function hM(e,t){let r=NI.get(e);if(r&&r.rawControlProp===t){let{controlProp:i,reducedControlProp:a}=r;return{controlProp:i,reducedControlProp:a}}let o=fm(e,t),n=ra(e);return n&&o&&ta(n,o,e),NI.set(e,{rawControlProp:t,controlProp:o,reducedControlProp:n}),{controlProp:o,reducedControlProp:n}}var gM="codemark",ia=100,wI=new Tp(gM);function Or(e,t){var r,o;return"schema"in e?(r=t?.markType)!==null&&r!==void 0?r:e.schema.marks.code:(o=t?.markType)!==null&&o!==void 0?o:e.state.schema.marks.code}function io(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function kI(e,t,r,o){var n;let i=e.isInSet((n=t.state.storedMarks)!==null&&n!==void 0?n:t.state.doc.resolve(r).marks()),a=t.state.doc.rangeHasMark(r,o,e);return!!(i||a)}var xI={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,r,o,n,i,a,s)=>{if(kI(e,t,n,i))return!1;let l=o[1],c=e.create(s),p=n+l.length,m=t.state.tr.delete(n,i).insertText(l).addMark(n,p,c),d=m.setSelection(qt.create(m.doc,p)).removeStoredMark(e),f=d.setMeta(a.input,{transform:d,from:n,to:i,text:`\`${l}${r}`});return t.dispatch(f),!0}},RI={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,r,o,n,i,a,s)=>{if(kI(e,t,n,i))return!1;let l=e.create(s),c=o[1],p=n,m=t.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,l),d=m.setSelection(qt.create(m.doc,p)).addStoredMark(l),f=d.setMeta(a.input,{transform:d,from:n,to:i,text:`\`${c}${r}`});return t.dispatch(f),!0}};function yM(e,t,r,o,n,i,a){if(t.composing)return!1;let{state:s}=t,l=s.doc.resolve(r);if(l.parent.type.spec.code)return!1;let c="\uFFFC",p=l.parent.textBetween(Math.max(0,l.parentOffset-ia),l.parentOffset,void 0,c)+n,m=n+l.parent.textBetween(l.parentOffset,Math.min(l.parent.nodeSize-2,l.parentOffset+ia),void 0,c),d=xI.match.exec(p),f=RI.match.exec(m);if(d){let h=xI.handler(e,t,n,d,r-d[0].length+n.length,o,i,a);if(h)return h}return f?RI.handler(e,t,n,f,r,o+f[0].length-n.length,i,a):!1}function VI(e,t){t||(t={});let r=new pr({isInputRules:!0,state:{init:()=>null,apply(o,n){let i=o.getMeta(r);return i||(o.selectionSet||o.docChanged?null:n)}},props:{handleTextInput(o,n,i,a){let s=Or(o,t);return yM(s,o,n,i,a,{input:r,cursor:e},t.attrs)}}});return r}function zr(e,t,r="next"){let o={action:r};return e.dispatch(e.state.tr.setMeta(t,o)),!1}function MI(e,t,r,o,n){if(e.state.selection.empty||r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{from:i,to:a}=e.state.selection;if(a-i>=ia||e.state.doc.rangeHasMark(i,a,o))return!1;let s=e.state.tr.addMark(i,a,o.create(n)),l=s.setSelection(qt.create(s.doc,a)).removeStoredMark(o);return e.dispatch(l),!0}function SM(e,t,r,o,n){var i;if(r.metaKey)return zr(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=e.state;if(!a.empty)return!1;let l=t.getState(e.state),c=a.$from,p=!!o.isInSet(c.marks()),m=!!o.isInSet((i=c.marksAcross(io(s,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===e.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&l?.active?(e.dispatch(e.state.tr.removeStoredMark(o)),!0):p===m&&c.parentOffset!==0?!1:p&&(!l?.active||l.side===-1)&&c.parentOffset!==0?(e.dispatch(e.state.tr.removeStoredMark(o)),!0):m&&l?.side===-1?(e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0):!1}function DI(e,t,r,o,n){if(SM(e,t,r,o,n))return!0;let{selection:a}=e.state,s=a.$from;return a.empty&&s.parentOffset===s.parent.nodeSize-2?zr(e,t):!1}function CM(e,t,r,o,n){var i;if(r.metaKey)return zr(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=e.state,l=t.getState(e.state),c=!!o.isInSet(a.$from.marks()),p=!!o.isInSet((i=io(s,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&l?.side===-1&&a.$from.parentOffset===0)return!1;if(l?.side===0&&a.$from.parentOffset===0)return e.dispatch(e.state.tr.removeStoredMark(o)),!0;if(c&&p&&l?.side===0)return e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0;if(c&&!p&&l?.active&&a.$from.parentOffset===0||!c&&l?.active&&l?.side===0)return e.dispatch(e.state.tr.removeStoredMark(o)),!0;if(c===p)return!1;if(p||!a.empty&&c){let m=a.empty?a.from-1:a.from,d=e.state.tr.setSelection(qt.create(s,m));return!a.empty&&p?e.dispatch(d.addStoredMark(o.create(n))):e.dispatch(d.removeStoredMark(o)),!0}if((p||!a.empty&&c)&&!l?.active){let m=a.empty?a.from-1:a.from;return e.dispatch(e.state.tr.setSelection(qt.create(s,m)).removeStoredMark(o)),!0}if(c&&!l?.active&&a.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(qt.create(s,a.from-1)).addStoredMark(o.create(n))),!0;if(c&&!p&&l?.active&&l.side!==-1)return e.dispatch(e.state.tr.addStoredMark(o.create(n))),!0;if(c&&!p&&l?.active){let m=a.from-1;return e.dispatch(e.state.tr.setSelection(qt.create(s,m)).addStoredMark(o.create(n))),!0}return!1}function PI(e,t,r,o,n){if(CM(e,t,r,o,n))return!0;let{selection:a}=e.state,s=a.$from,l=t.getState(e.state);return s.pos===1&&s.parentOffset===0&&l?.side===-1?!0:a.empty&&s.parentOffset===0?zr(e,t):!1}function FI(e,t,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=io(i,n.from-1),s=!!o.isInSet(a.marks()),l=a.parentOffset===0,c=!!o.isInSet(io(i,n.to+1).marks());if((!s||l)&&!c)return zr(e,t);let p=t.getState(e.state);if(n.empty&&p?.side===-1){let m=e.state.tr.delete(n.from-1,n.from);return e.dispatch(m),!0}return!1}function LI(e,t,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=!!o.isInSet(n.$from.marks()),s=n.$from.parentOffset===0,l=!!o.isInSet(io(i,n.to+2).marks());return(!a||s)&&!l?zr(e,t):!1}function EI(e,t){var r,o;if(!e)return null;let{selection:n,doc:i}=e;if(!n.empty)return null;let a=!!t.isInSet((r=e.storedMarks)!==null&&r!==void 0?r:[]),s=!!t.isInSet(n.$from.marks()),l=!!t.isInSet((o=io(i,n.from+1).marks())!==null&&o!==void 0?o:[]),c=n.$from.parentOffset===0;return s!==l||!s&&a!==s||s&&c?e.tr.removeStoredMark(t):null}function vM(){let e=document.createElement("span");return e.classList.add("fake-cursor"),e}function bM(e){e||(e={});let t=new pr({key:wI,appendTransaction:(r,o,n)=>{var i;let a=t.getState(o),s=(i=r[0])===null||i===void 0?void 0:i.getMeta(t);return a?.next||s?.action==="click"?EI(n,Or(n,e)):null},state:{init:()=>null,apply(r,o,n,i){var a;let s=r.getMeta(t);if(s?.action==="next")return{next:!0};let l=Or(i,e),c=l.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(r.selection.from).marks()),p=l.isInSet(i.doc.resolve(r.selection.from).marks()),m=l.isInSet(io(i.doc,r.selection.from+1).marks()),d=r.selection.$from.parentOffset===0;return r.selection.empty?!c&&m&&(!p||d)?{active:!0,side:-1}:c&&(!p||d)?{active:!0,side:0}:!c&&p&&!m?{active:!0,side:0}:c&&p&&!m?{active:!0,side:-1}:null:null}},props:{attributes:r=>{var o;let{active:n=!1}=(o=t.getState(r))!==null&&o!==void 0?o:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:r=>{var o;let{active:n,side:i}=(o=t.getState(r))!==null&&o!==void 0?o:{};if(!n)return hc.empty;let a=Np.widget(r.selection.from,vM,{side:i});return hc.create(r.doc,[a])},handleKeyDown(r,o){switch(o.key){case"`":return MI(r,t,o,Or(r,e),e.attrs);case"ArrowRight":return DI(r,t,o,Or(r,e),e.attrs);case"ArrowLeft":return PI(r,t,o,Or(r,e),e.attrs);case"Backspace":return FI(r,t,o,Or(r,e));case"Delete":return LI(r,t,o,Or(r,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return zr(r,t);case"e":case"a":return o.ctrlKey?zr(r,t):!1;default:return!1}},handleClick(r){return zr(r,t,"click")}}});return t}function AI(e){let t=bM(e),r=VI(t,e);return[t,r]}var Zee=AI;function nte(e,t){if(!t)return!1;let r=e.selection,o=r.$from.node(1);if(!ht(o)||!Xr(o)||r.$to.parentOffset===r.$to.parent.content.size)return!1;let i=o.attrs.tag;return i==="p"||i==="div"?!1:BI(e,t)}function ite(e,t){if(!t)return!1;let o=e.selection.$from.node(1);if(!ht(o)||Xr(o))return!1;let n=o.attrs.tag;return n==="p"||n==="div"?!1:BI(e,t)}function BI(e,t){if(!t)return!1;let r=j.nodes.lineBreak.create(),o=e.tr.replaceSelectionWith(r).scrollIntoView();return t(o),!0}function ate(e,t){let r=e.selection;if(r.from!==r.to)return!1;let o=r.$from.node(-1);return!xp(o)||Rp(r.$from.node(-3))||r.$from.parentOffset!==0||r.$from.index(-1)!==0||r.$from.index(-2)!==0?!1:hy(j.nodes.listItem)(e,t&&(n=>{if(r.$from.depth>3){let i=r.$from.before(-1);n.join(i)}t(n)}))}var dte=Bc(/^([ai]|\d+)\.\s$/iu,j.nodes.numberedList,e=>{let t=e[1];switch(t){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(t)}}},(e,t)=>t.childCount+t.attrs.start===Number(e[1])),ute=Bc(/^\s*([-+*])\s$/u,j.nodes.bulletedList);function gte(){return new pr({appendTransaction(e,t,r){let o,n=r.selection.$from.parent;if(t.selection instanceof kr&&e.find(a=>a.steps.find(s=>s instanceof bp))){let a=t.doc.firstChild,s=ht(n)&&!Xr(n);if(a&&ht(a)&&s){let l=IM(a);if(o??=r.tr,l){let c=l.marks.find(bo);o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let p of l.marks)o.addMark(0,r.doc.content.size,p),o.addStoredMark(p)}else{let c=a.attrs.inlineStyles;o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return o}})}function IM(e){for(let t=0;t<e.childCount;t++){let r=e.child(t);if(r.type===j.nodes.text)return r}}function bte(e,t){let r=t.getFontsForLoading().filter(i=>!Ao.isSelectorLoaded(i)),o=t.getTextStylePresets(!1).filter(ip),n=e.getNodesWithTrait(o,fo).filter(i=>!Ao.isSelectorLoaded(i.font)).map(i=>i.font);return r.push(...n),r}var OI=[Rr.youtube,Rr.vimeo,Rr.codeblock,Rr.twitter];async function zI(e,t){let r=Q(t);Ir(r)&&await e.stores.modulesStore.addExternalModulesToProject([r],{onTreeUpdate(){}})}var $I=new WeakMap;async function Rte(e){let{modules:t}=await e.stores.modulesStore.lookUpModules(OI.map(Sp)),r=[];for(let o=0;o<t.length;o++){let n=t[o];y(n,"Module must exist");let i=OI[o];y(i,"Module component must exist"),$I.set(i,n),y(n.files.module,"Module must have a module file"),r.push(oc(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await e.stores.modulesStore.preloadExternalModules(r)}function aa(e,t){let r=$I.get(t);y(r,"Preloaded module must exist");let o=e.getNodeWithTrait(r.id,lc);return o?o.codeComponentIdentifier:(y(r.files.module,"Module must have a module file"),oc(r.id,r.saveId,r.files.module,t.exportSpecifier??"default").value)}async function WI(e,t){let{moduleIdentifier:r}=await vy(e,t);if(r.kind==="externalModuleExport"){let o=e.tree.getNodeWithTrait(r.moduleId,lc);if(o)return o.codeComponentIdentifier}return r.value}async function ao(e,t,r,o={}){await zI(e,r);let n=t.state,i=n.tr;i.replaceRangeWith(n.selection.from,n.selection.to,j.nodes.module.create({identifier:r,props:o}));let a=n.selection.from===0?0:n.selection.from-1;i.setSelection(Ip.create(i.doc,a)),t.dispatch(i)}async function Hl(e,t,r,o){let n=await WI(e,r);await ao(e,t,n,o)}async function Gl(e,t,r,o){Gt("collection_record_youtube_add",{source:"cms"});let n=o?{url:{type:"string",value:o}}:void 0;try{let i=aa(e.tree,Rr.youtube);await ao(e,t,i,n),r?.()}catch(i){ke(i)}}async function Ote(e,t,r,o){let n=o?{url:{type:"string",value:o}}:void 0;try{let i=aa(e.tree,Rr.twitter);await ao(e,t,i,n),r?.()}catch(i){ke(i)}}async function Ul(e,t,r,o){Gt("collection_record_vimeo_add",{source:"cms"});let n=o?{video:{type:"string",value:o}}:void 0;try{let i=aa(e.tree,Rr.vimeo);await ao(e,t,i,n),r?.()}catch(i){ke(i)}}async function zte(e,t,r="",o){let n={code:{type:"string",value:r}};Gt("collection_record_codeblock_add",{source:"cms"});try{let i=aa(e.tree,Rr.codeblock);await ao(e,t,i,n),o?.()}catch(i){ke(i)}}function sa(e,t,r,o,n){return o.content.size===0?!1:(e.processWhenReady(()=>{let i=t.state,a=i.tr,s=n(o),l=TM(s),c=i.selection.$from.node(1),p=i.selection.$from.before(1),m=!s.content.child(0).isInline,d=i.selection instanceof kr||c?.content.size===0;if(l)a.replaceSelectionWith(l,!0);else if(m&&d){let f=c?p+c.nodeSize:i.selection.to;a.replaceRange(p,f,s)}else a.replaceSelection(s);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),t.dispatch(a)}),!0)}function TM(e){return e.openStart===0&&e.openEnd===0&&e.content.childCount===1?e.content.firstChild:null}function Qd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pn=Qd();function JI(e){pn=e}var da={exec:()=>null};function Ce(e,t=""){let r=typeof e=="string"?e:e.source,o={replace:(n,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Wt.caret,"$1"),r=r.replace(n,a),o},getRegex:()=>new RegExp(r,t)};return o}var Wt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},NM=/^(?:[ \t]*(?:\n|$))+/,wM=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,xM=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ua=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,RM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Zd=/(?:[*+-]|\d{1,9}[.)])/,XI=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,qI=Ce(XI).replace(/bull/g,Zd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),kM=Ce(XI).replace(/bull/g,Zd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),eu=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,VM=/^[^\n]+/,tu=/(?!\s*\])(?:\\.|[^\[\]\\])+/,MM=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",tu).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),DM=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Zd).getRegex(),Kl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ru=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,PM=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ru).replace("tag",Kl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),KI=Ce(eu).replace("hr",ua).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kl).getRegex(),FM=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",KI).getRegex(),ou={blockquote:FM,code:wM,def:MM,fences:xM,heading:RM,hr:ua,html:PM,lheading:qI,list:DM,newline:NM,paragraph:KI,table:da,text:VM},HI=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ua).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kl).getRegex(),LM={...ou,lheading:kM,table:HI,paragraph:Ce(eu).replace("hr",ua).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",HI).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kl).getRegex()},EM={...ou,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ru).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:da,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(eu).replace("hr",ua).replace("heading",` *#{1,6} *[^
]`).replace("lheading",qI).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},AM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,BM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,YI=/^( {2,}|\\)\n(?!\s*$)/,OM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Yl=/[\p{P}\p{S}]/u,nu=/[\s\p{P}\p{S}]/u,QI=/[^\s\p{P}\p{S}]/u,zM=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,nu).getRegex(),ZI=/(?!~)[\p{P}\p{S}]/u,$M=/(?!~)[\s\p{P}\p{S}]/u,WM=/(?:[^\s\p{P}\p{S}]|~)/u,HM=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,eT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,GM=Ce(eT,"u").replace(/punct/g,Yl).getRegex(),UM=Ce(eT,"u").replace(/punct/g,ZI).getRegex(),tT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",_M=Ce(tT,"gu").replace(/notPunctSpace/g,QI).replace(/punctSpace/g,nu).replace(/punct/g,Yl).getRegex(),jM=Ce(tT,"gu").replace(/notPunctSpace/g,WM).replace(/punctSpace/g,$M).replace(/punct/g,ZI).getRegex(),JM=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,QI).replace(/punctSpace/g,nu).replace(/punct/g,Yl).getRegex(),XM=Ce(/\\(punct)/,"gu").replace(/punct/g,Yl).getRegex(),qM=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),KM=Ce(ru).replace("(?:-->|$)","-->").getRegex(),YM=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",KM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Jl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,QM=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Jl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),rT=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",Jl).replace("ref",tu).getRegex(),oT=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",tu).getRegex(),ZM=Ce("reflink|nolink(?!\\()","g").replace("reflink",rT).replace("nolink",oT).getRegex(),iu={_backpedal:da,anyPunctuation:XM,autolink:qM,blockSkip:HM,br:YI,code:BM,del:da,emStrongLDelim:GM,emStrongRDelimAst:_M,emStrongRDelimUnd:JM,escape:AM,link:QM,nolink:oT,punctuation:zM,reflink:rT,reflinkSearch:ZM,tag:YM,text:OM,url:da},eD={...iu,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",Jl).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Jl).getRegex()},qd={...iu,emStrongRDelimAst:jM,emStrongLDelim:UM,url:Ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},tD={...qd,br:Ce(YI).replace("{2,}","*").getRegex(),text:Ce(qd.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},_l={normal:ou,gfm:LM,pedantic:EM},la={normal:iu,gfm:qd,breaks:tD,pedantic:eD},rD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GI=e=>rD[e];function $r(e,t){if(t){if(Wt.escapeTest.test(e))return e.replace(Wt.escapeReplace,GI)}else if(Wt.escapeTestNoEncode.test(e))return e.replace(Wt.escapeReplaceNoEncode,GI);return e}function UI(e){try{e=encodeURI(e).replace(Wt.percentDecode,"%")}catch{return null}return e}function _I(e,t){let r=e.replace(Wt.findPipe,(i,a,s)=>{let l=!1,c=a;for(;--c>=0&&s[c]==="\\";)l=!l;return l?"|":" |"}),o=r.split(Wt.splitPipe),n=0;if(o[0].trim()||o.shift(),o.length>0&&!o.at(-1)?.trim()&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;n<o.length;n++)o[n]=o[n].trim().replace(Wt.slashPipe,"|");return o}function ca(e,t,r){let o=e.length;if(o===0)return"";let n=0;for(;n<o;){let i=e.charAt(o-n-1);if(i===t&&!r)n++;else if(i!==t&&r)n++;else break}return e.slice(0,o-n)}function oD(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let o=0;o<e.length;o++)if(e[o]==="\\")o++;else if(e[o]===t[0])r++;else if(e[o]===t[1]&&(r--,r<0))return o;return r>0?-2:-1}function jI(e,t,r,o,n){let i=t.href,a=t.title||null,s=e[1].replace(n.other.outputLinkReplace,"$1");o.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:a,text:s,tokens:o.inlineTokens(s)};return o.state.inLink=!1,l}function nD(e,t,r){let o=e.match(r.other.indentCodeCompensation);if(o===null)return t;let n=o[1];return t.split(`
`).map(i=>{let a=i.match(r.other.beginningSpace);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var Xl=class{constructor(e){T(this,"options");T(this,"rules");T(this,"lexer");this.options=e||pn}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ca(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],o=nD(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:o}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let o=ca(r,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(r=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ca(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=ca(t[0],`
`).split(`
`),o="",n="",i=[];for(;r.length>0;){let a=!1,s=[],l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))s.push(r[l]),a=!0;else if(!a)s.push(r[l]);else break;r=r.slice(l);let c=s.join(`
`),p=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${c}`:c,n=n?`${n}
${p}`:p;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,i,!0),this.lexer.state.top=m,r.length===0)break;let d=i.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let f=d,h=f.raw+`
`+r.join(`
`),g=this.blockquote(h);i[i.length-1]=g,o=o.substring(0,o.length-f.raw.length)+g.raw,n=n.substring(0,n.length-f.text.length)+g.text;break}else if(d?.type==="list"){let f=d,h=f.raw+`
`+r.join(`
`),g=this.list(h);i[i.length-1]=g,o=o.substring(0,o.length-d.raw.length)+g.raw,n=n.substring(0,n.length-f.raw.length)+g.raw,r=h.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),o=r.length>1,n={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");let i=this.rules.other.listItemRegex(r),a=!1;for(;e;){let l=!1,c="",p="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let m=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),d=e.split(`
`,1)[0],f=!m.trim(),h=0;if(this.options.pedantic?(h=2,p=m.trimStart()):f?h=t[1].length+1:(h=t[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,p=m.slice(h),h+=t[1].length),f&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),l=!0),!l){let C=this.rules.other.nextBulletRegex(h),N=this.rules.other.hrRegex(h),b=this.rules.other.fencesBeginRegex(h),w=this.rules.other.headingBeginRegex(h),M=this.rules.other.htmlBeginRegex(h);for(;e;){let L=e.split(`
`,1)[0],F;if(d=L,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),F=d):F=d.replace(this.rules.other.tabCharGlobal,"    "),b.test(d)||w.test(d)||M.test(d)||C.test(d)||N.test(d))break;if(F.search(this.rules.other.nonSpaceChar)>=h||!d.trim())p+=`
`+F.slice(h);else{if(f||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(m)||w.test(m)||N.test(m))break;p+=`
`+d}!f&&!d.trim()&&(f=!0),c+=L+`
`,e=e.substring(L.length+1),m=F.slice(h)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let g=null,S;this.options.gfm&&(g=this.rules.other.listIsTask.exec(p),g&&(S=g[0]!=="[ ] ",p=p.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!g,checked:S,loose:!1,text:p,tokens:[]}),n.raw+=c}let s=n.items.at(-1);if(s)s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){let c=n.items[l].tokens.filter(m=>m.type==="space"),p=c.length>0&&c.some(m=>this.rules.other.anyLine.test(m.raw));n.loose=p}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:o,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=_I(t[1]),o=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===o.length){for(let a of o)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<r.length;a++)i.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:i.align[a]});for(let a of n)i.rows.push(_I(a,i.header.length).map((s,l)=>({text:s,tokens:this.lexer.inline(s),header:!1,align:i.align[l]})));return i}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=ca(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=oD(t[2],"()");if(i===-2)return;if(i>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let o=t[2],n="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(o);i&&(o=i[1],n=i[3])}else n=t[3]?t[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?o=o.slice(1):o=o.slice(1,-1)),jI(t,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let o=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[o.toLowerCase()];if(!n){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return jI(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o||o[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let i=[...o[0]].length-1,a,s,l=i,c=0,p=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+i);(o=p.exec(t))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(s=[...a].length,o[3]||o[4]){l+=s;continue}else if((o[5]||o[6])&&i%3&&!((i+s)%3)){c+=s;continue}if(l-=s,l>0)continue;s=Math.min(s,s+l+c);let m=[...o[0]][0].length,d=e.slice(0,i+o.index+m+s);if(Math.min(i,s)%2){let h=d.slice(1,-1);return{type:"em",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return o&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,o;return t[2]==="@"?(r=t[1],o="mailto:"+r):(r=t[1],o=r),{type:"link",raw:t[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,o;if(t[2]==="@")r=t[0],o="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=t[0],t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},so=class Kd{constructor(t){T(this,"tokens");T(this,"options");T(this,"state");T(this,"tokenizer");T(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||pn,this.options.tokenizer=this.options.tokenizer||new Xl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Wt,block:_l.normal,inline:la.normal};this.options.pedantic?(r.block=_l.pedantic,r.inline=la.pedantic):this.options.gfm&&(r.block=_l.gfm,this.options.breaks?r.inline=la.breaks:r.inline=la.gfm),this.tokenizer.rules=r}static get rules(){return{block:_l,inline:la}}static lex(t,r){return new Kd(r).lex(t)}static lexInline(t,r){return new Kd(r).inlineTokens(t)}lex(t){t=t.replace(Wt.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let o=this.inlineQueue[r];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],o=!1){for(this.options.pedantic&&(t=t.replace(Wt.tabCharGlobal,"    ").replace(Wt.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(a=>(n=a.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let a=r.at(-1);n.raw.length===1&&a!==void 0?a.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.at(-1).src=a.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}let i=t;if(this.options.extensions?.startBlock){let a=1/0,s=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},s),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(i=t.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let a=r.at(-1);o&&a?.type==="paragraph"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(n),o=i.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let a=r.at(-1);a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(n);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let o=t,n=null;if(this.tokens.links){let s=Object.keys(this.tokens.links);if(s.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)s.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,n.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,a="";for(;t;){i||(a=""),i=!1;let s;if(this.options.extensions?.inline?.some(c=>(s=c.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length);let c=r.at(-1);s.type==="text"&&c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):r.push(s);continue}if(s=this.tokenizer.emStrong(t,o,a)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),r.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),r.push(s);continue}let l=t;if(this.options.extensions?.startInline){let c=1/0,p=t.slice(1),m;this.options.extensions.startInline.forEach(d=>{m=d.call({lexer:this},p),typeof m=="number"&&m>=0&&(c=Math.min(c,m))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(s=this.tokenizer.inlineText(l)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(a=s.raw.slice(-1)),i=!0;let c=r.at(-1);c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):r.push(s);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return r}},ql=class{constructor(e){T(this,"options");T(this,"parser");this.options=e||pn}space(e){return""}code({text:e,lang:t,escaped:r}){let o=(t||"").match(Wt.notSpaceStart)?.[0],n=e.replace(Wt.endingNewline,"")+`
`;return o?'<pre><code class="language-'+$r(o)+'">'+(r?n:$r(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:$r(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,o="";for(let a=0;a<e.items.length;a++){let s=e.items[a];o+=this.listitem(s)}let n=t?"ol":"ul",i=t&&r!==1?' start="'+r+'"':"";return"<"+n+i+`>
`+o+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+$r(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let o="";for(let n=0;n<e.rows.length;n++){let i=e.rows[n];r="";for(let a=0;a<i.length;a++)r+=this.tablecell(i[a]);o+=this.tablerow({text:r})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${$r(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let o=this.parser.parseInline(r),n=UI(e);if(n===null)return o;e=n;let i='<a href="'+e+'"';return t&&(i+=' title="'+$r(t)+'"'),i+=">"+o+"</a>",i}image({href:e,title:t,text:r,tokens:o}){o&&(r=this.parser.parseInline(o,this.parser.textRenderer));let n=UI(e);if(n===null)return $r(r);e=n;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${$r(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:$r(e.text)}},au=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},lo=class Yd{constructor(t){T(this,"options");T(this,"renderer");T(this,"textRenderer");this.options=t||pn,this.options.renderer=this.options.renderer||new ql,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new au}static parse(t,r){return new Yd(r).parse(t)}static parseInline(t,r){return new Yd(r).parseInline(t)}parse(t,r=!0){let o="";for(let n=0;n<t.length;n++){let i=t[n];if(this.options.extensions?.renderers?.[i.type]){let s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){o+=l||"";continue}}let a=i;switch(a.type){case"space":{o+=this.renderer.space(a);continue}case"hr":{o+=this.renderer.hr(a);continue}case"heading":{o+=this.renderer.heading(a);continue}case"code":{o+=this.renderer.code(a);continue}case"table":{o+=this.renderer.table(a);continue}case"blockquote":{o+=this.renderer.blockquote(a);continue}case"list":{o+=this.renderer.list(a);continue}case"html":{o+=this.renderer.html(a);continue}case"paragraph":{o+=this.renderer.paragraph(a);continue}case"text":{let s=a,l=this.renderer.text(s);for(;n+1<t.length&&t[n+1].type==="text";)s=t[++n],l+=`
`+this.renderer.text(s);r?o+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):o+=l;continue}default:{let s='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}parseInline(t,r=this.renderer){let o="";for(let n=0;n<t.length;n++){let i=t[n];if(this.options.extensions?.renderers?.[i.type]){let s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){o+=s||"";continue}}let a=i;switch(a.type){case"escape":{o+=r.text(a);break}case"html":{o+=r.html(a);break}case"link":{o+=r.link(a);break}case"image":{o+=r.image(a);break}case"strong":{o+=r.strong(a);break}case"em":{o+=r.em(a);break}case"codespan":{o+=r.codespan(a);break}case"br":{o+=r.br(a);break}case"del":{o+=r.del(a);break}case"text":{o+=r.text(a);break}default:{let s='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}},Xd,jl=(Xd=class{constructor(e){T(this,"options");T(this,"block");this.options=e||pn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?so.lex:so.lexInline}provideParser(){return this.block?lo.parse:lo.parseInline}},T(Xd,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Xd),iD=class{constructor(...e){T(this,"defaults",Qd());T(this,"options",this.setOptions);T(this,"parse",this.parseMarkdown(!0));T(this,"parseInline",this.parseMarkdown(!1));T(this,"Parser",lo);T(this,"Renderer",ql);T(this,"TextRenderer",au);T(this,"Lexer",so);T(this,"Tokenizer",Xl);T(this,"Hooks",jl);this.use(...e)}walkTokens(e,t){let r=[];for(let o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{let n=o;for(let i of n.header)r=r.concat(this.walkTokens(i.tokens,t));for(let i of n.rows)for(let a of i)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let n=o;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=o;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(i=>{let a=n[i].flat(1/0);r=r.concat(this.walkTokens(a,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let i=t.renderers[n.name];i?t.renderers[n.name]=function(...a){let s=n.renderer.apply(this,a);return s===!1&&(s=i.apply(this,a)),s}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=t[n.level];i?i.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),o.extensions=t),r.renderer){let n=this.defaults.renderer||new ql(this.defaults);for(let i in r.renderer){if(!(i in n))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,s=r.renderer[a],l=n[a];n[a]=(...c)=>{let p=s.apply(n,c);return p===!1&&(p=l.apply(n,c)),p||""}}o.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new Xl(this.defaults);for(let i in r.tokenizer){if(!(i in n))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,s=r.tokenizer[a],l=n[a];n[a]=(...c)=>{let p=s.apply(n,c);return p===!1&&(p=l.apply(n,c)),p}}o.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new jl;for(let i in r.hooks){if(!(i in n))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,s=r.hooks[a],l=n[a];jl.passThroughHooks.has(i)?n[a]=c=>{if(this.defaults.async)return Promise.resolve(s.call(n,c)).then(m=>l.call(n,m));let p=s.call(n,c);return l.call(n,p)}:n[a]=(...c)=>{let p=s.apply(n,c);return p===!1&&(p=l.apply(n,c)),p}}o.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,i=r.walkTokens;o.walkTokens=function(a){let s=[];return s.push(i.call(this,a)),n&&(s=s.concat(n.call(this,a))),s}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return so.lex(e,t??this.defaults)}parser(e,t){return lo.parse(e,t??this.defaults)}parseMarkdown(e){return(r,o)=>{let n={...o},i={...this.defaults,...n},a=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let s=i.hooks?i.hooks.provideLexer():e?so.lex:so.lexInline,l=i.hooks?i.hooks.provideParser():e?lo.parse:lo.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(c=>s(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(a);try{i.hooks&&(r=i.hooks.preprocess(r));let c=s(r,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let p=l(c,i);return i.hooks&&(p=i.hooks.postprocess(p)),p}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let o="<p>An error occurred:</p><pre>"+$r(r.message+"",!0)+"</pre>";return t?Promise.resolve(o):o}if(t)return Promise.reject(r);throw r}}},un=new iD;function Se(e,t){return un.parse(e,t)}Se.options=Se.setOptions=function(e){return un.setOptions(e),Se.defaults=un.defaults,JI(Se.defaults),Se};Se.getDefaults=Qd;Se.defaults=pn;Se.use=function(...e){return un.use(...e),Se.defaults=un.defaults,JI(Se.defaults),Se};Se.walkTokens=function(e,t){return un.walkTokens(e,t)};Se.parseInline=un.parseInline;Se.Parser=lo;Se.parser=lo.parse;Se.Renderer=ql;Se.TextRenderer=au;Se.Lexer=so;Se.lexer=so.lex;Se.Tokenizer=Xl;Se.Hooks=jl;Se.parse=Se;var Gte=Se.options,Ute=Se.setOptions,_te=Se.use,jte=Se.walkTokens,Jte=Se.parseInline;var Xte=lo.parse,qte=so.lex;var aD=/^(#{1,6})\s+(.+)$/m,sD=/\*\*(.*?)\*\*/,lD=/\*(.*?)\*/,cD=/^\s*[-*+]\s+(.+)$/m,dD=/^\s*(\d+)\.\s+(.+)$/m,uD=/^>\s+(.+)$/m,pD=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,mD=/`([^`]+)`/,fD=/```[\s\S]*?```/,hD=/^\s*\|(.+\|)+\s*$/m,gD=/~~(.*?)~~/,yD=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,SD=/^(-{3,}|_{3,})\s*$/m,CD=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,vD=/<(https?:\/\/[^>]+)>/;function pa(e){return!e||e.length===0?!1:[aD,sD,lD,cD,dD,uD,pD,mD,fD,hD,gD,yD,SD,CD,vD].some(r=>r.test(e))}function ma(e){let t=Se.parse(e,{async:!1,gfm:!0,breaks:!0}),r=document.createElement("div");return r.innerHTML=t,vp.fromSchema(j).parseSlice(r,{preserveWhitespace:!0})}var bD=ge("prosemirror:addMedia"),iT=[{extension:"mp4",mimeType:"video/mp4"}];function nT(e){return e=e.toLowerCase(),iT.some(({extension:t})=>e.endsWith(`.${t}`))}function ID(e){return e.startsWith("video/")}var aT=[...ps],sT=new Set(ms);for(let{extension:e,mimeType:t}of iT)aT.push(e),sT.add(t);var TD="failed-asset-upload-placeholder",lT="updateAssetReferences";function fre(e){return e.getMeta(lT)}function ND(e){return e.setMeta(lT,!0)}async function mn(e,t,r,{type:o,insertPosition:n,mediaExtractedFromHTML:i}){let a=t.state,s=a.tr,l=new _n(e,{silent:i}),c=[],p=[],m=[];for(let C of r)if(C instanceof File){let N=ID(C.type);if(y(!i,"we should not receive files if the media is already in a document"),!sT.has(C.type))continue;let b=URL.createObjectURL(C);c.push({uploadResultTask:l.createTask(C,w=>w),temporaryURL:b,type:N?"video":"image"}),p.push({src:b,isVideo:N}),m.push(b)}else{let N=ku(C.src);if(N){p.push({src:C.src,isVideo:nT(N.originalFilename??N.identifier)});continue}p.push({src:C.src,isVideo:nT(C.src)}),c.push({uploadResultTask:l.createTask(C.src,b=>b),temporaryURL:C.src,type:C.type})}if(!c.length)return Promise.resolve();if(!i)for(let{src:C,isVideo:N}of p){let b=j.nodes.image.create({src:C,type:N?"video":"image"});n?s.insert(n,b):a.selection.replaceWith(s,b)}s.scrollIntoView(),(o==="drop"||o==="paste")&&(s.setMeta(o,!0),s.setMeta("uiEvent",o)),t.dispatch(s);let d=c.map(C=>C.uploadResultTask());i&&Yc(l,d).catch(()=>{});let h=(await Promise.allSettled(d)).map((C,N)=>wD(C,N,c)),g=[];h.forEach(C=>{if(C.type==="asset")return g.push(C.asset)}),e.stores.assetStore.assetMap.patch(g),e.stores.assetStore.assetService?.addAssets(g);let S=new Map;c.forEach((C,N)=>{let b=h[N];y(b,"Asset upload result must be defined"),S.set(C.temporaryURL,b)}),xD(t,S),m.forEach(C=>URL.revokeObjectURL(C))}function wD(e,t,r){switch(e.status){case"fulfilled":{let{value:o}=e,{asset:n}=o;return o.type==="image"?{type:"asset",asset:n,imageSize:o.imageSize}:{type:"asset",asset:n}}case"rejected":{let o=r[t];return y(o,"Upload must be defined"),bD.reportError(new Error(e.reason)),{type:"failed upload"}}}}async function hre(e,t,r){let o=await oC.pickFile({allowedFileTypes:aT});if(!o)return;let n=o[0];return mn(e,t,[n],r)}function xD(e,t){let r=e.state,o=r.tr;r.doc.descendants((n,i)=>{if(!Tn(n))return;let a=t.get(n.attrs.src);if(a===void 0)return;let s={...n.attrs};if(a.type==="failed upload")s.src=TD;else if(s.src=Ru(Nu(a.asset)),a.imageSize){let l=by(a.imageSize);s.pixelWidth=l.nonZeroNaturalWidth,s.pixelHeight=l.nonZeroNaturalHeight}o.setNodeMarkup(i,n.type,s),ND(o)}),e.dispatch(o)}function Ql(e){let t=e.querySelector("b[id^='docs-internal-guid']")??e.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(t)for(let r=t.children.length-1;r>=0;r--){let o=t.children[r];if(o){for(o instanceof HTMLParagraphElement&&!_e.isOn("pasteMarkdown")&&RD(o),o instanceof HTMLDivElement&&kD(o);cT(o.firstChild);)o.removeChild(o.firstChild);for(;cT(o.lastChild);)o.removeChild(o.lastChild);(o.tagName==="BR"||o.childNodes.length===0)&&o.remove()}}}function cT(e){return e instanceof Element&&e.textContent===""&&e.querySelectorAll("img").length===0}function RD(e){if(e.textContent!=="")return;let t=e.querySelectorAll("img");t.length!==0&&e.replaceWith(...t)}function kD(e){let t=e.querySelector("table");t===null||t.querySelectorAll("tr").length===0||t.querySelectorAll("th, td").length===0||e.replaceWith(t)}function dT(e){let t=wp.map(o=>`${o}:has(img)`).join(", ");for(let o of e.querySelectorAll("*:empty"))o.setAttribute("data-original-empty","1");for(let o of e.querySelectorAll(t)){let n=o.parentNode;if(!n)continue;let i=o.querySelector("img");for(;i;){let a=document.createRange();a.setStart(o,0),a.setEndBefore(i);let s=a.extractContents();if(s.childNodes.length){let l=o.cloneNode(!1);l.appendChild(s),l.hasChildNodes()&&n.insertBefore(l,o)}n.insertBefore(i,o),i=o.querySelector("img")}}let r;for(;r=e.querySelector("*:empty:not([data-original-empty])");)r.remove();for(let o of e.querySelectorAll("[data-original-empty]"))o.removeAttribute("data-original-empty")}var VD=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,MD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function uT({engine:e,supportsMedia:t,supportsEmbeds:r,supportsLinks:o,supportsStyles:n,supportedTags:i,saveChanges:a}){return new pr({props:{clipboardSerializer:n?new su(j):void 0,transformPastedHTML(s){let l=On(s);return Ql(l),dT(l),l.innerHTML},handlePaste(s,l,c){let p=l.clipboardData?.getData("text/plain"),m=l.clipboardData?.getData("text/html");if(t){let{clipboardData:d}=l;if(d&&d.files.length>0)return mn(e,s,d.files,{type:"paste"}).finally(a),!0}if(E(p)){let f=["http:","https:","mailto:","www."].some(g=>p.startsWith(g)),h=s.state.selection;if(f&&h.from!==h.to&&o){let g=Ea({url:p}),S=s.state.tr;return S.addMark(h.from,h.to,j.marks.link.create({link:g,openInNewTab:Ss(g),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),s.dispatch(S),!0}if(r&&_e.isOn("cmsPasteModules")){let g=Q(p);if(be(g))return ao(e,s,g.value).catch(ke),!0;if(Ya(p))return Hl(e,s,p).catch(ke),!0}if(r){if(MD.test(p))return Gl(e,s,a,p).catch(ke),!0;if(VD.test(p))return Ul(e,s,a,p).catch(ke),!0}}return sa(e,s,l,c,d=>{if(n&&m&&PD(m))return d;let f=pa(p);p&&f&&(d=ma(p));let h=j.nodes.document.create(void 0),g=new In(h);g.insert(0,d.content);let S=[];if(g.doc.descendants((N,b)=>{if(ht(N)){let w=N.attrs.tag,M=i?.has(w)??!0,L=Mn(w)&&M?w:"p";g.setNodeMarkup(b,j.nodes.textBlock,{...N.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:L})}Tn(N)&&S.push({src:N.attrs.src,type:N.attrs.type})}),S.length&&t&&mn(e,s,S,{type:"paste",mediaExtractedFromHTML:!0}).finally(a),n){let b=s.state.selection,M=b.$from.parent,L=M.textContent,F=ht(M)&&L.length>0,H=b instanceof kr,J=!m&&p&&p.length>0&&!f;!F&&!J&&!H?FD(e,n.getStylePresetForTag,n.getStylePresetForLink,g):LD(s,g)}else g.removeMark(0,g.doc.content.size,j.marks.inlineStyles);o||g.removeMark(0,g.doc.content.size,j.marks.link);let C=d.content.child(0).isInline?g.doc.content.child(0).content:g.doc.content;return new bn(C,d.openStart,d.openEnd)})}}})}var pT="framer-match-formatting",DD=document.createComment(pT);function PD(e){return e.endsWith(`<!--${pT}-->`)}var su=class{constructor(t){T(this,"domSerializer");T(this,"nodes");T(this,"marks");this.domSerializer=Aa.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,r){return this.domSerializer.serializeNode(t,r)}serializeFragment(t,r){let o=this.domSerializer.serializeFragment(t,r);return o.appendChild(DD),o}};function FD(e,t,r,o){o.doc.descendants((n,i)=>{if(ht(n)){let a=n.attrs,s=E(a.textStylePreset)?e.tree.getNodeWithTrait(a.textStylePreset,Oo):void 0,l=Mn(a.tag)?a.tag:"p",c=s??t(l)??Ns(e.tree,l)??Ka.createDefault(l);ws(e,c),o.setNodeMarkup(i,j.nodes.textBlock,{...n.attrs,blockStyles:s?n.attrs.blockStyles:{},inlineStyles:s?n.attrs.inlineStyles:{},textStylePreset:c.id}),s||o.removeMark(i,n.nodeSize,j.marks.inlineStyles)}if(n.type===j.nodes.text){let a=n.marks.find(Ba);if(a){let s=r()??Is(e.tree)??bs.createDefault();Ts(e,s),o.addMark(i,i+n.nodeSize,j.marks.link.create({...a.attrs,linkStylePreset:s.id}))}}})}function LD(e,t){let r=e.state,o=r.selection;if(o instanceof kr){let l=r.doc.resolve(1);o=new qt(l)}let n=o.$from.parent,i=ht(n),s=o.$from.marks().find(bo);if(s)t.addMark(0,t.doc.content.size,s);else if(i){let l=j.marks.inlineStyles.create({inlineStyles:n.attrs.inlineStyles});t.addMark(0,t.doc.content.size,l)}else t.removeMark(0,t.doc.content.size,j.marks.inlineStyles);t.doc.descendants((l,c)=>{if(!ht(l))return;let p=i?n.attrs:l.attrs;t.setNodeMarkup(c,j.nodes.textBlock,p)})}var mT="framer-rich-text",ED=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,AD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function fT(e,t){return new pr({props:{handlePaste(r,o,n){let i=o.clipboardData?.getData("text/plain"),a=o.clipboardData?.getData("text/html");return i===""&&a===""?!0:sa(e,r,o,n,s=>{let l=!a&&i&&i.length>0;if(a?.endsWith(`<!--${mT}-->`))return s;let p=s;_e.isOn("pasteMarkdown")&&i&&pa(i)&&(p=ma(i));let d=r.state.selection,h=d.$from.parent,g=h.textContent,S=ht(h)&&g.length>0,C=d instanceof kr;return!S&&!l&&!C?OD(e,t,p):$D(r,p)})},clipboardSerializer:new lu(j)}})}function foe(e,t,r,o,n,i){return new pr({props:{transformPastedHTML(a){let s=On(a);return Ql(s),s.innerHTML},handlePaste(a,s,l){if(t){let{clipboardData:p}=s;if(p&&p.files.length>0)return mn(e,a,p.files,{type:"paste"}).finally(i),!0}let c=s.clipboardData?.getData("text/plain");if(E(c)){let m=["http:","https:","mailto:","www."].some(f=>c.startsWith(f)),d=a.state.selection;if(m&&d.from!==d.to&&o){let f=Ea({url:c}),h=a.state.tr;return h.addMark(d.from,d.to,j.marks.link.create({link:f,openInNewTab:Ss(f),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),a.dispatch(h),!0}if(r&&_e.isOn("cmsPasteModules")){let f=Q(c);if(be(f))return ao(e,a,f.value).catch(ke),!0;if(Ya(c))return Hl(e,a,c).catch(ke),!0}if(r){if(AD.test(c))return Gl(e,a,i,c).catch(ke),!0;if(ED.test(c))return Ul(e,a,i,c).catch(ke),!0}}return sa(e,a,s,l,p=>{let m=p;_e.isOn("pasteMarkdown")&&c&&pa(c)&&(m=ma(c));let d=j.nodes.document.create(void 0),f=new In(d);f.insert(0,m.content);let h=[];f.doc.descendants((S,C)=>{if(ht(S)){let N=S.attrs.tag,b=n?.has(N)??!0,w=Mn(N)&&b?N:"p";f.setNodeMarkup(C,j.nodes.textBlock,{...S.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:w})}Tn(S)&&h.push({src:S.attrs.src,type:S.attrs.type})}),h.length&&mn(e,a,h,{type:"paste",mediaExtractedFromHTML:!0}).finally(i),f.removeMark(0,f.doc.content.size,j.marks.inlineStyles),o||f.removeMark(0,f.doc.content.size,j.marks.link);let g=m.content.child(0).isInline?f.doc.content.child(0).content:f.doc.content;return new bn(g,m.openStart,m.openEnd)})}}})}var BD=document.createComment(mT),lu=class{constructor(t){T(this,"domSerializer");T(this,"nodes");T(this,"marks");this.domSerializer=Aa.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,r){return this.domSerializer.serializeNode(t,r)}serializeFragment(t,r){let o=this.domSerializer.serializeFragment(t,r);return o.appendChild(BD),o}};function OD(e,t,r){let o=j.nodes.document.create(void 0),n=new In(o);n.insert(0,r.content);let i=e.tree.getNodeWithTrait(t,xe);y(i,"RichTextNode for pasting not found");let a=zD(e.tree,i);n.doc.descendants((l,c)=>{if(ht(l)){let p=l.attrs,m=E(p.textStylePreset)?e.tree.getNodeWithTrait(p.textStylePreset,Oo):void 0,d=Mn(p.tag)?p.tag:"p",f=m??a[d]??i.getNodeTextStylePreset(e.tree,d)??Ns(e.tree,d)??Ka.createDefault(d);ws(e,f),n.setNodeMarkup(c,j.nodes.textBlock,{...l.attrs,blockStyles:m?l.attrs.blockStyles:{},inlineStyles:m?l.attrs.inlineStyles:{},textStylePreset:f.id}),m||n.removeMark(c,l.nodeSize,j.marks.inlineStyles)}if(l.type===j.nodes.text){let p=l.marks.find(Ba);if(p){let m=i.getNodeLinkStylePreset(e.tree)??Is(e.tree)??bs.createDefault();Ts(e,m),n.addMark(c,c+l.nodeSize,j.marks.link.create({...p.attrs,linkStylePreset:m.id}))}}});let s=r.content.child(0).isInline?n.doc.content.child(0).content:n.doc.content;return new bn(s,r.openStart,r.openEnd)}function zD(e,t){let r={};for(let o of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(o,Oo);n&&(r[n.tag]??=n)}return r}function $D(e,t){let r=e.state,o=r.selection;if(o instanceof kr){let m=r.doc.resolve(1);o=new qt(m)}let n=j.nodes.document.create(void 0),i=new In(n);i.insert(0,t.content);let a=o.$from.parent,s=ht(a),c=o.$from.marks().find(bo);if(c)i.addMark(0,i.doc.content.size,c);else if(s){let m=j.marks.inlineStyles.create({inlineStyles:a.attrs.inlineStyles});i.addMark(0,i.doc.content.size,m)}else i.removeMark(0,i.doc.content.size,j.marks.inlineStyles);i.doc.descendants((m,d)=>{if(!ht(m))return;let f=s?a.attrs:m.attrs;i.setNodeMarkup(d,j.nodes.textBlock,f)});let p=t.content.child(0).isInline?i.doc.content.child(0).content:i.doc.content;return new bn(p,t.openStart,t.openEnd)}function boe({engine:e,nodeId:t,getRichTextNode:r}){return _e.isOn("pasteMarkdown")?uT({engine:e,supportsMedia:!1,supportsEmbeds:!1,supportsLinks:!0,supportsStyles:{getStylePresetForTag:o=>{let n=r();if(n)return WD(e.tree,n,o)??n.getNodeTextStylePreset(e.tree,o)??void 0},getStylePresetForLink:()=>r()?.getNodeLinkStylePreset(e.tree)??void 0}}):fT(e,t)}function WD(e,t,r){for(let o of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(o,Oo);if(n&&n.tag===r)return n}}function Noe(e,t){let r=new Set,o=new Set;for(let n of t){if(o.has(n))continue;let i=e.get(n);if(i){if(bt(i)){r.add(n);continue}for(let a of i.ancestors())if(!o.has(a.id)&&(o.add(a.id),a.cache.reset(),!!bt(a))){r.add(a.id);break}}}return r}async function koe(e){return Lg.get(`/web/v1/sites/hostnames/${e}`)}var hT=class extends Dn{};var HD=/<([a-z1-9]+)/gi;function Loe(e){let t=new Set;return gT(e,t),t}function gT(e,t){let r=e.matchAll(HD);for(let[,o]of r)o&&t.add(o);return t}function Eoe(e,t){let r=Object.entries(e);for(let[o,n]of r)Pa(o)&&Si(n)&&n.type==="richtext"&&E(n.value)&&gT(n.value,t);return t}function yT(){return Hg.isOn("disableSecureCanvas")}var GD,UD,_D=new Promise((e,t)=>{GD=e,UD=t});function Goe(e){if(tg(e)){if(e.canvasSandbox?.sandbox.controlsVisibility)return Promise.resolve(e.canvasSandbox.sandbox.controlsVisibility);if(yT())return Promise.resolve(new my(e))}return $g(e)?e.stores.sandboxStore.getControlsVisibility():_D}function rne(e,t,r){return Nm(r)?qD(e,t,r):wm(r)?XD(e,t,r):Tm(r)?KD(e,t,r):null}function jD(e,t){return Ge(t*Math.sin(ac(e)),t*Math.cos(ac(e))*-1)}function JD(e,t){if(e.type==="conic"){let{angle:r,radius:o}=e;return t.map(n=>{let i=r+n.position*360;return jD(i,o)})}return t.map(r=>St.pointAtPercentDistance(e.axis,r.position))}function XD(e,t,r){let o=e.getRect(t),n=r.centerAnchorX*o.width,i=r.centerAnchorY*o.height,a=r.widthFactor*o.width,s=r.heightFactor*o.height,l=a*2,c=s*2,p=a+n,m=i-s,d={width:l,height:c},f=e.convertPointToCanvas(t,{x:n,y:i}),h=e.convertPointToCanvas(t,{x:p,y:i}),g=e.convertPointToCanvas(t,{x:n,y:m}),{rotation:S}=e.convertRectToCanvasWithRotation(t),C=St(f,h);return{type:"radial",start:f,end:h,center:St.pointAtPercentDistance(C,0),axis:C,rotation:S,size:d,topCenter:g}}function qD(e,t,r){let o=e.getRect(t),n={x:o.width/2,y:o.height/2},i=e.convertPointToCanvas(t,n),a=r.angle*Math.PI/180,s={x:-Math.sin(a)*100,y:Math.cos(a)*100},l=e.convertPointToCanvas(t,Ge.add(n,s)),c=St(i,l),p=Zl(r.angle),m=tt.pointsAtOrigin(o),d=Math.floor(p/90)+3,f=m[d%4],h=e.convertPointToCanvas(t,f),g=m[(d+2)%4],S=e.convertPointToCanvas(t,g),C=St.perpendicular(c,h),N=St.intersection(C,c);if(!N)return null;let b=Ge.subtract(i,N),w=Ge.add(N,b,b),M=m[(d+1)%4],L=e.convertPointToCanvas(t,M),F=St.perpendicular(C,L),H=St.perpendicular(c,i),z=St.intersection(F,H);if(!z)return null;let J={width:Ge.distance(z,i)*2,height:Ge.distance(N,w)};return{type:"linear",start:N,end:w,center:i,axis:St(N,w),startCorner:h,endCorner:S,size:J}}function KD(e,t,r){let o=e.getRect(t),n=e.convertPointToCanvas(t,{x:o.width/2*r.centerAnchorX/.5,y:o.height/2*r.centerAnchorY/.5}),[i,a]=tt.midPoints(o),s=tt.center(o),l=Ge.distance(s,i),c=Ge.distance(s,a),p=Math.min(l,c),m=e.totalAncestorRotation(t),d=Zl(m+r.angle);return{type:"conic",start:Ge(s.x,s.y-p),center:n,rotation:0,radius:p,angle:d}}var one=(e,t,r,o)=>{let n=JD(e,t),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&Ge.distance(r,i)<o)return!0;let s=St(i,a),l=St.perpendicular(s,r),c=St.intersection(s,l);if(e.type==="radial"&&Ge.distance(r,e.topCenter)<o)return!0;if(e.type==="conic")return Ge.distance(r,e.center)<=e.radius+40;if(!c)return!1;let p=Ge.distance(r,c),m=Ge.distance(r,i),d=Ge.distance(r,a),f=Ge.distance(i,a);return m>f&&d<m?Math.max(d,p)<o:d>f&&m<d?Math.max(m,p)<o:p<o};function YD(e,t){let r=e.reduce((a,s)=>Math.abs(a.position-t)<Math.abs(s.position-t)?a:s),o=e.findIndex(a=>a===r),n=r.position-t>0?o-1:o+1,i=e[n]??r;return[r,i]}function nne(e,t,r,o){let[n,i]=YD(t,r),a=ya([n.position,i.position],[0,1])(r),s=cu(e,n,o),l=cu(e,i,o);return ya([0,1],[s,l])(a)}function cu(e,t,r){let o=t.value;if(!Fa(o))return o;let n=up(o),i=n?Bg(n,e):null;return i&&_u(i)?i.colorForMode(r):pp(o)||"transparent"}function ine(e,t,r){return t.map(o=>o.merge({value:cu(e,o,r)}))}function ane(e,t){let r=St(t,e.center),o=e.center.x,n=e.center.y-e.radius,i=St(Ge(o,n),e.center),a=St.intersectionAngle(i,r),l=Zl(a)-e.angle,c=Zl(l);return Math.abs(c/360)}function Zl(e){if(e===360)return e;let t=e%360;return t<0?360+t:t}function sne(e){return e.sort((t,r)=>t.position-r.position)}function lne(e){let t=!1,r=ya([e.stops[0]?.position??0,e.stops[e.stops.length-1]?.position??1],[0,1]),o=e.stops.map(n=>((n.position<0||n.position>1)&&(t=!0),n.merge({position:r(n.position)})));return t?o:void 0}export{ir as a,YL as b,QL as c,ZL as d,e0 as e,t0 as f,r0 as g,o0 as h,n0 as i,i0 as j,a0 as k,s0 as l,l0 as m,c0 as n,GN as o,d0 as p,na as q,SI as r,cI as s,vI as t,II as u,Wl as v,wee as w,h0 as x,g0 as y,yT as z,GD as A,UD as B,Goe as C,NZ as D,ta as E,ra as F,WZ as G,Aee as H,Zee as I,nte as J,ite as K,BI as L,ate as M,dte as N,ute as O,eP as P,tP as Q,rP as R,gte as S,bte as T,zI as U,Rte as V,aa as W,Gl as X,Ote as Y,zte as Z,tC as _,oC as $,V0 as aa,TD as ba,fre as ca,ND as da,mn as ea,hre as fa,uT as ga,foe as ha,boe as ia,rne as ja,jD as ka,JD as la,one as ma,nne as na,cu as oa,ine as pa,ane as qa,sne as ra,lne as sa,nC as ta,Noe as ua,Uc as va,BP as wa,OP as xa,SO as ya,bC as za,CO as Aa,GC as Ba,lj as Ca,Sl as Da,Tl as Ea,wl as Fa,w4 as Ga,cb as Ha,P8 as Ia,F8 as Ja,KR as Ka,YR as La,QR as Ma,ZR as Na,L8 as Oa,ub as Pa,ln as Qa,Ab as Ra,Lb as Sa,qK as Ta,sV as Ua,o7 as Va,s7 as Wa,cn as Xa,Eo as Ya,iC as Za,Ub as _a,li as $a,Xb as ab,iQ as bb,Kb as cb,Yb as db,Zb as eb,ci as fb,rI as gb,oI as hb,nI as ib,xV as jb,tZ as kb,iI as lb,koe as mb,hT as nb,Loe as ob,gT as pb,Eoe as qb,PV as rb,UV as sb,_V as tb,ZV as ub};
//# sourceMappingURL=https://app.framerstatic.com/chunk-IZDFJLUX.mjs.map
